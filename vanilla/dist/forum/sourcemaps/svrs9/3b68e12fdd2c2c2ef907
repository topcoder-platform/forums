{"version":3,"sources":["webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersAnimation.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersBackgroundStyling.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersButtons.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersFeedback.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersLinks.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersMargin.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersPositioning.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersReset.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersSpinner.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersVisibility.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpers.ts","webpack://vanilla-forum/./library/src/scripts/theming/getThemeVariables.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleUtils.ts","webpack://vanilla-forum/./library/src/scripts/utility/appUtils.tsx","webpack://vanilla-forum/./library/src/scripts/styles/globalStyleVars.ts","webpack://vanilla-forum/./library/src/scripts/@types/api/core.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersColors.ts","webpack://vanilla-forum/./library/src/scripts/forms/buttonStyles.ts","webpack://vanilla-forum/./library/src/scripts/icons/iconClasses.ts","webpack://vanilla-forum/./library/src/scripts/content/attachments/AttatchmentType.ts","webpack://vanilla-forum/./library/src/scripts/utility/idUtils.ts","webpack://vanilla-forum/./library/src/scripts/apiv2.ts","webpack://vanilla-forum/./library/src/scripts/forms/formElementStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/panelListStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/panelWidgetStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/panelAreaStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/panelLayoutStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/EmbedContainer.tsx","webpack://vanilla-forum/./library/src/scripts/redux/ReduxActions.ts","webpack://vanilla-forum/./library/src/scripts/icons/common.tsx","webpack://vanilla-forum/./library/src/scripts/styles/shadowHelpers.ts","webpack://vanilla-forum/./library/src/scripts/styles/textUtils.ts","webpack://vanilla-forum/./library/src/scripts/modal/ModalSizes.ts","webpack://vanilla-forum/./library/src/scripts/layout/DeviceContext.tsx","webpack://vanilla-forum/./library/src/scripts/redux/getStore.ts","webpack://vanilla-forum/./library/src/scripts/forms/InputBlockStyles.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/embedStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/Paragraph.tsx","webpack://vanilla-forum/./library/src/scripts/forms/Button.tsx","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersTypography.ts","webpack://vanilla-forum/./library/src/scripts/forms/borderStylesCalculator.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersBorders.ts","webpack://vanilla-forum/./library/src/scripts/forms/styleHelperButtonGenerator.ts","webpack://vanilla-forum/./library/src/scripts/styles/metasStyles.ts","webpack://vanilla-forum/./library/src/scripts/gdn.ts","webpack://vanilla-forum/./library/src/scripts/icons/fileTypes.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/dropDownStyles.ts","webpack://vanilla-forum/./library/src/scripts/forms/InputBlock.tsx","webpack://vanilla-forum/./library/src/scripts/forms/ErrorMessages.tsx","webpack://vanilla-forum/./library/src/scripts/forms/InputTextBlock.tsx","webpack://vanilla-forum/./library/src/scripts/features/notifications/NotificationsActions.ts","webpack://vanilla-forum/./library/src/scripts/layout/frame/frameStyles.ts","webpack://vanilla-forum/./library/src/scripts/content/userContentStyles.ts","webpack://vanilla-forum/./library/src/scripts/forms/inputStyles.tsx","webpack://vanilla-forum/./library/src/scripts/routing/links/backLinkStyles.ts","webpack://vanilla-forum/./library/src/scripts/headers/titleBarStyles.ts","webpack://vanilla-forum/./library/src/scripts/theming/ThemeActions.ts","webpack://vanilla-forum/./library/src/scripts/features/users/UserActions.ts","webpack://vanilla-forum/./library/src/scripts/locales/localeActions.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersfPadding.ts","webpack://vanilla-forum/./library/src/scripts/features/users/suggestion/UserSuggestionActions.ts","webpack://vanilla-forum/./library/src/scripts/routing/links/LinkContextProvider.tsx","webpack://vanilla-forum/./library/src/scripts/theming/themeReducer.ts","webpack://vanilla-forum/./library/src/scripts/locales/localeReducer.ts","webpack://vanilla-forum/./library/src/scripts/redux/reducerRegistry.ts","webpack://vanilla-forum/./library/src/scripts/content/spoilers.ts","webpack://vanilla-forum/./library/src/scripts/content/index.ts","webpack://vanilla-forum/./library/src/scripts/content/emoji.ts","webpack://vanilla-forum/./library/src/scripts/layout/ScreenReaderContent.tsx","webpack://vanilla-forum/./library/src/scripts/content/attachments/attachmentUtils.tsx","webpack://vanilla-forum/./library/src/scripts/features/users/suggestion/SuggestionTrie.ts","webpack://vanilla-forum/./library/src/scripts/features/users/suggestion/UserSuggestionModel.ts","webpack://vanilla-forum/./library/src/scripts/utility/fileUtils.tsx","webpack://vanilla-forum/./library/src/scripts/layout/ScrollOffsetContext.tsx","webpack://vanilla-forum/./library/src/scripts/layout/ConditionalWrap.tsx","webpack://vanilla-forum/./library/src/scripts/utility/componentRegistry.tsx","webpack://vanilla-forum/./library/src/scripts/layout/pageHeadingContext.tsx","webpack://vanilla-forum/./library/src/scripts/layout/bodyStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/Backgrounds.tsx","webpack://vanilla-forum/./library/src/scripts/loaders/loaderStyles.ts","webpack://vanilla-forum/./library/src/scripts/loaders/Loader.tsx","webpack://vanilla-forum/./library/src/scripts/theming/loadThemeFonts.ts","webpack://vanilla-forum/./library/src/scripts/theming/ThemeProvider.tsx","webpack://vanilla-forum/./library/src/scripts/AppContext.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/EmbedContent.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/CodePenEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/content/Translate.tsx","webpack://vanilla-forum/./library/src/scripts/content/DateTime.tsx","webpack://vanilla-forum/./library/src/scripts/routing/links/SmartLink.tsx","webpack://vanilla-forum/./library/src/scripts/content/attachments/Attachment.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/GettyImagesEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/ImgurEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/InstagramEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/content/TruncatedText.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/EmbedTitle.tsx","webpack://vanilla-forum/./library/src/scripts/content/collapsableContentStyles.tsx","webpack://vanilla-forum/./library/src/scripts/content/CollapsableContent.tsx","webpack://vanilla-forum/./library/src/scripts/content/hashScrolling.ts","webpack://vanilla-forum/./library/src/scripts/content/UserContent.tsx","webpack://vanilla-forum/./library/src/scripts/content/userLabelStyles.ts","webpack://vanilla-forum/./library/src/scripts/content/rolesStyles.ts","webpack://vanilla-forum/./library/src/scripts/content/Roles.tsx","webpack://vanilla-forum/./library/src/scripts/content/UserLabel.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/quoteEmbedStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/twitterEmbedStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/TwitterEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/VideoEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/embedErrorStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/EmbedRenderError.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/EmbedErrorBoundary.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/embedService.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/FileEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/GiphyEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/LinkEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/QuoteEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/SoundCloudEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/ImageEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/layout/frame/frameHeaderStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/components/containerStyles.ts","webpack://vanilla-forum/./library/src/scripts/styles/typographyStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/Heading.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/DropDownContents.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/DropDown.tsx","webpack://vanilla-forum/./library/src/scripts/layout/FlexSpacer.tsx","webpack://vanilla-forum/./library/src/scripts/layout/smartAlignStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/SmartAlign.tsx","webpack://vanilla-forum/./library/src/scripts/navigation/CloseButton.tsx","webpack://vanilla-forum/./library/src/scripts/content/attachments/attachmentStyles.ts","webpack://vanilla-forum/./library/src/scripts/content/attachments/attachmentIconsStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/frame/frameFooterStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/frame/FrameFooter.tsx","webpack://vanilla-forum/./library/src/scripts/layout/frame/frameBodyStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/frame/FrameBody.tsx","webpack://vanilla-forum/./library/src/scripts/features/users/userModel.ts","webpack://vanilla-forum/./library/src/scripts/content/code.ts","webpack://vanilla-forum/./library/src/scripts/flyouts/FlyoutToggle.tsx","webpack://vanilla-forum/./library/src/scripts/modal/Modal.tsx","webpack://vanilla-forum/./library/src/scripts/modal/modalStyles.ts","webpack://vanilla-forum/./library/src/scripts/modal/ModalView.tsx"],"names":["defaultTransition","properties","vars","globalVariables","length","transition","map","prop","index","animation","defaultTiming","defaultEasing","background","props","image","fallbackImage","workingImage","charAt","themeAsset","substr","startsWith","assetUrl","getBackgroundImage","backgroundColor","color","colorOut","undefined","backgroundAttachment","attachment","backgroundPosition","position","backgroundRepeat","repeat","backgroundSize","size","backgroundImage","url","objectFitWithFallback","top","right","bottom","left","margin","height","width","percent","$nest","objectFit","objectPosition","allLinkStates","styles","output","allButtonStates","visited","allStates","nested","debugMode","noState","hover","focus","focusNotKeyboard","accessibleFocus","active","logDebug","buttonStates","nest","userSelect","value","isImportant","val","important","pointerEvents","disabledInput","formElementVars","formElementsVariables","cursor","opacity","disabled","toString","linkStyleFallbacks","specificOverwrite","defaultOverwrite","globalDefault","setAllLinkColors","overwriteValues","linkColors","links","colors","overwrites","mergedColors","default","margins","marginVals","all","marginTop","unit","marginRight","marginBottom","marginLeft","vertical","horizontal","absolutePosition","topRight","px","topLeft","bottomRight","bottomLeft","middleOfParent","display","maxHeight","maxWidth","middleLeftOfParent","middleRightOfParent","fullSizeOfParent","sticky","flexHelper","middle","wrap","alignItems","justifyContent","flexWrap","middleLeft","inheritHeightClass","styleFactory","style","flexDirection","flexGrow","appearance","spinnerLoaderAnimation","keyframes","transform","deg","spinnerLoader","debug","debugHelper","globalVars","spinnerVars","mainColors","primary","thickness","speed","name","content","quote","borderRadius","borderTop","borderRight","fade","borderBottom","borderLeft","animationName","animationDuration","animationIterationCount","animationTimingFunction","srOnly","padding","overflow","clip","border","visibility","useThemeCache","visuallyHidden","onEmpty","displayNone","componentName","subElementName","$debugName","unitFunction","isNaN","importantUnit","withUnit","negative","trim","substring","getThemeVariables","state","getStore","getState","assets","theme","data","variables","DEBUG_STYLES","Symbol","for","objects","debugName","shouldLogDebug","styleObjs","shift","subcomponentName","restObjects","logWarning","callback","memoize","storeState","themeKey","getMeta","status","cacheKey","args","JSON","stringify","variableFactory","themeVars","componentVars","declaredVars","subcomponentVars","merge","normalizeVariables","newObj","Object","entries","key","componentThemeVariables","subComponentStyles","defaultValue","gdn","meta","parts","split","haystack","part","hasOwnProperty","isAllowedUrl","input","isUrl","protocols","require_tld","require_protocol","require_host","require_valid_protocol","allow_trailing_dot","allow_protocol_relative_urls","formatUrl","path","withDomain","indexOf","window","location","origin","siteUrl","_readyHandlers","onReady","push","_executeReady","Promise","resolve","handlerPromises","handler","exec","then","document","readyState","addEventListener","onContent","makeProfileUrl","username","encodeURIComponent","IIconSizes","colorPrimary","makeThemeVars","utility","elementaryColors","black","white","transparent","initialMainColors","fg","bg","secondary","emphasizeLightness","mixBgAndFg","weight","mix","mixPrimaryAndBg","messageColors","warning","error","confirm","deleted","linkColorDefault","linkColorState","body","radius","gutter","half","gutterSize","quarter","lineHeights","base","condensed","code","excerpt","panel","paddedWidth","middleColumn","fonts","large","medium","small","largeTitle","title","subTitle","mobile","weights","normal","semiBold","bold","families","alignment","headings","capitalLetterRatio","verticalOffset","verticalOffsetForAdjacentElements","icon","sizes","xSmall","spacer","embed","text","sizing","smallPadding","select","borderWidth","overlay","fontSize","spacing","verticalMargin","states","selected","overlayBg","modifyColorBasedOnLightness","dropShadow","fullPageHeadingSpacer","userContent","font","h1","h2","h3","h4","h5","h6","list","listDecoration","minWidth","buttonIcon","offset","separator","userContentHyphenation","minimumCharactersToHyphenate","minimumCharactersBeforeBreak","minimumCharactersAfterBreak","maximumConsecutiveBrokenLines","avoidLastWordToBeBroken","hyphenationZone","mixPrimaryAndFg","findColorMatch","hexCode","logError","LoadStatus","PublishStatus","colorValue","makeImportant","isLightColor","lightness","flip","Error","isLight","darken","lighten","flipIfMax","colorLightness","weightOffset","Math","abs","weightCurved","colorDarker","colorLighter","ButtonTypes","buttonGlobalVariables","formElVars","side","minHeight","compactHeight","buttonVariables","standard","STANDARD","spinnerColor","borders","focusAccessible","PRIMARY","TRANSPARENT","translucid","TRANSLUCID","buttonSizing","paddingHorizontal","lineHeight","buttonResetMixin","buttonClasses","generateButtonClass","buttonUtilityClasses","iconCompact","buttonIconCompact","buttonAsText","textPrimary","buttonAsTextPrimary","custom","pushLeft","pushRight","iconMixin","dimension","outline","asTextStyles","textAlign","fontWeight","buttonIconRightMargin","buttonIconLeftMargin","reset","iconVariables","fileType","newFolder","attachmentError","vanillaLogo","compact","settings","search","notifications","messages","user","userWarning","close","closeCompact","closeTiny","chevronLeftCompact","selectedCategory","signIn","chevronUp","plusCircle","deleteIcon","editIcon","categoryIcon","iconClasses","paddingRight","discussionIcon","alertIcon","alertIconCompact","AttachmentType","DEFAULT_PREFIX","idCache","uniqueIDFromPrefix","prefix","count","useUniqueID","useMemo","getRequiredID","suffix","id","getOptionalID","apiv2","axios","create","baseURL","headers","common","transformResponse","defaults","responseData","errors","indexArrayByKey","paramsSerializer","params","qs","uploadFile","file","a","requestConfig","allowedExtensions","ext","toLowerCase","maxSize","filePieces","extension","humanSize","humanFileSize","stringTotal","amount","unitAbbr","message","sprintf","t","includes","attachmentsString","join","FormData","append","post","response","catch","getFieldErrors","apiError","field","serverError","getGlobalErrorMessage","validFields","varsLayouts","layoutVariables","halfHeight","horizontalPadding","verticalPadding","fullWidth","giantInput","largeInput","errorSpacing","halfSize","placeholder","buttonMarginAlignment","DEFAULT","iconSize","SMALL","LARGE","root","paragraph","varsGlobal","paddingLeft","paddingTop","paddingBottom","actions","actionButton","activeButton","panelListVariables","globalVals","link","panelListClasses","mediaQueries","item","textDecoration","items","panelWidgetClasses","paddings","oneColumnDown","panelAreaClasses","classesPanelWidget","lineHeightAdjustment","foundationalWidths","fullGutter","panelWidth","middleColumnWidth","minimalMiddleColumnWidth","narrowContentWidth","breakPoints","twoColumns","xs","full","quarterSize","globalContentWidth","contentSizes","narrow","panelLayoutBreakPoints","noBleed","twoColumn","oneColumn","media","noBleedDown","twoColumnsDown","panelLayoutSpacing","extraPadding","noBreadcrumbs","largePadding","classesPanelArea","classesPanelList","titleBarVars","titleBarVariables","main","viewHeight","container","leftColumn","flexBasis","rightColumn","middleColumnMaxWidth","calc","breadcrumbs","isSticky","cssRule","EmbedContainerSize","EmbedContainer","inEditor","withPadding","htmlProps","classes","embedContainerClasses","className","classNames","makeRootClass","MEDIUM","children","ReduxActions","dispatch","api","actionCreator","apply","this","type","payload","requestType","responseType","errorType","dummyResponseType","dummyMetaType","request","createApiRequestAction","createApiResponseAction","createApiErrorAction","endpoint","actionCreators","requestPromise","get","c","bindThunkAction","asyncWorker","extra","started","result","done","failed","currentColorFill","fill","leftChevronPath","horizontalChevronViewBox","centred","RightChevronIcon","xmlns","viewBox","aria-hidden","transformOrigin","d","BottomChevronIcon","rotate","CloseIcon","CloseCompactIcon","CheckIcon","points","DropDownMenuIcon","WarningIcon","aria-label","warningMessage","cx","cy","r","stroke","strokeOpacity","accessibleImageMenu","DiscussionIcon","shadowHelper","shadowBaseColor","baseColor","boxShadow","embedHover","dropDown","modal","contrast","hasBorder","shadowColor","makeShadow","shadowOrBorderBasedOnLightness","referenceColor","borderStyles","shadowStyles","ColorHelper","nestedStyles","letterToLineHeightRatio","Position","vOffset","letterRatio","calculateOffset","isBefore","BEFORE","emptySpace","em","before","after","AFTER","ModalSizes","Devices","DeviceContext","React","createContext","DESKTOP","useDevice","useContext","DeviceProvider","calculateDevice","useCallback","breakpoints","clientWidth","XS","MOBILE","TABLET","NO_BLEED","useState","device","setDevice","useEffect","throttledUpdate","throttle","removeEventListener","Provider","store","initialState","initialActions","__ACTIONS__","middleware","thunk","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","actionSanitizer","action","quill","compose","applyMiddleware","reducer","combineReducers","getReducers","createStore","forEach","inputBlockVariables","inputBlockClasses","inputText","inputWrap","labelAndDescription","borderColor","labelNote","labelText","sectionTitle","fieldsetGroup","multiLine","resize","embedContainerVariables","dimensions","maxEmbedWidth","hoverFocusStates","FULL_WIDTH","whiteSpace","textOverflow","embedContentClasses","Paragraph","componentClasses","isError","accessibilityProps","role","Component","Button","buttonUtils","TEXT","TEXT_PRIMARY","ICON","ICON_COMPACT","TITLEBAR_LINK","titleBarClasses","linkButton","CUSTOM","RESET","DASHBOARD_STANDARD","DASHBOARD_PRIMARY","DASHBOARD_SECONDARY","DASHBOARD_LINK","getButtonStyleFromBaseClass","baseClass","legacyMode","submit","onClick","ariaLabel","ariaHidden","tabIndex","ref","buttonRef","onKeyDown","lang","onKeyDownCapture","aria-controls","controls","fontFallbacks","textInputSizingFromFixedHeight","fullBorderWidth","align","textShadow","shadow","fontFamily","family","concat","textTransform","placeholderStyles","$unique","singleLineEllipsis","overflowX","longWordEllipsis","getValueIfItExists","needle","fallback","checkIfKeyExistsAndIsDefined","typeIsStringOrNumber","variable","standardizeBorderRadius","radii","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","borderTopLeftRadius","isShorthand","topStyles","bottomStyles","setAllBorders","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","singleBorderStyle","keys","detailedStyles","fallbackBorderVariables","defaultsAll","rightStyles","leftStyles","detailedRadius","singleBorder","generateButtonStyleProperties","buttonTypeVars","setZIndexOnState","buttonGlobals","zIndex","buttonDimensions","defaultBorder","hoverBorder","cloneDeep","activeBorder","focusBorder","focusAccessibleBorder","verticalAlign","touchAction","metasVariables","metasClasses","metaStyle","draftStatus","permissions","translations","FileTypeGenericIcon","rx","strokeLinecap","FileTypeWordIcon","WORD","x","y","FileTypeExcelIcon","EXCEL","FileTypePDFIcon","unabbreviatedType","PDF","FileTypeImageIcon","IMAGE","fillOpacity","FileTypePowerPointIcon","PPT","FileTypeZipIcon","ARCHIVE","barStyle","AttachmentErrorIcon","dropDownVariables","widths","metas","contents","dropDownClasses","shadows","asModal","likeDropDownContent","metaItems","metaItem","section","toggleButtonIcon","listStyle","sectionHeading","sectionContents","noVerticalPadding","paddedFrame","InputTextBlockBaseClass","ErrorMessages","classesInputBlock","errorList","InputBlock","label","legend","hasErrors","errorID","labelID","OuterTag","LabelTag","labelClassName","wrapClassName","noteAfterInput","InputTextBlock","createRef","event","inputProps","onChange","inputRef","ownInputRef","classesInput","inputClasses","multiLineProps","blockProps","inputClassNames","InputBox","blockParams","describedBy","multiline","TextareaAutosize","required","aria-invalid","aria-describedby","aria-labelledby","maxLength","onKeyPress","current","NotificationsActions","dispatchApi","getNotificationACs","getNotificationsACs","markReadACs","read","markAllReadACs","generateApiActionCreators","GET_NOTIFICATION_REQUEST","GET_NOTIFICATION_RESPONSE","GET_NOTIFICATION_ERROR","GET_NOTIFICATIONS_REQUEST","GET_NOTIFICATIONS_RESPONSE","GET_NOTIFICATIONS_ERROR","MARK_READ_REQUEST","MARK_READ_RESPONSE","MARK_READ_ERROR","MARK_ALL_READ_REQUEST","MARK_ALL_READ_RESPONSE","MARK_ALL_READ_ERROR","frameVariables","header","footer","frameClasses","headerWrap","willChange","bodyWrap","footerWrap","flex","userContentVariables","blocks","embeds","codeInline","paddingVertical","codeBlock","nestedList","ceil","userContentClasses","headingStyle","tag","lists","listStylePosition","paragraphSpacing","linkStyle","linkStyles","codeStyles","wordWrap","flexShrink","spoilersAndQuotes","wordBreak","inputVariables","textStyles","applyInputCSSRules","TitleBarBorderType","backLinkVariables","backLinkClasses","getLineHeight","inHeading","guest","NONE","buttonSize","button","dropDownContents","endElements","compactSearch","buttonContents","resister","mobileDropDown","meBox","bottomRow","desaturate","headerColors","BORDER","SHADOW","getBorderVars","bar","logoContainer","alignSelf","logoFlexBasis","nav","locales","extraMeBoxIcons","topElement","localeToggle","languages","buttonOffset","centeredButtonClass","searchCancel","tabButtonActive","tabButton","scroll","scrollWithNoScrollBar","rightFlexBasis","leftFlexBasis","register","compactSearchResults","clearButtonClass","guestButton","desktopNavWrap","addGradientsToHintOverflow","logoFrame","logoHeight","logo","gradient","direction","createAction","actionCreatorFactory","ThemeActions","apiThunk","getAssets","async","COUNT_CACHE_PERIOD","UserActions","users","LOADING","getMeACs","currentTime","Date","getTime","lastRequested","countInformation","getCountsACs","getAllLocalesACs","fetchLocalesFromApi","force","localeLoadable","SUCCESS","paddingVals","UserSuggestionActions","bindDispatch","setActiveAC","trie","UserSuggestionModel","selectSuggestionsTrie","exactLookup","getValue","loadUsersACs","ERROR","partialLookup","getValueFromPartialsOfWord","USER_LIMIT","filterSuggestions","PENDING","order","limit","domID","userID","debounce","interalLoadUsers","suggestionID","suggestionIndex","SET_ACTIVE_SUGGESTION","searchName","searchCollator","Intl","Collator","usage","sensitivity","ignorePunctuation","numeric","filter","userSuggestion","suggestionIDPartial","compare","LOAD_USERS_REQUEST","LOAD_USERS_RESPONSE","LOAD_USERS_ERROR","LinkContext","linkContext","pushSmartLocation","isDynamicNavigation","makeHref","stringUrl","createPath","LinkContextProvider","withRouter","urlFormatter","href","isCurrentPage","URL","pathname","history","makeLocationDescriptorObject","initial","newHref","appRelativeLink","replace","INITIAL_STATE","themeReducer","produce","reducerWithInitialState","case","DEFAULT_LOCALE_STATE","localeReducer","nextState","dynamicReducers","registerReducer","replaceReducer","usersReducer","handleToggleSpoiler","triggeringElement","spoilerContainer","closest","classList","toggle","initAllUserContent","convertToSafeEmojiCharacters","delegateEvent","mountAllEmbeds","initCodeHighlighting","convertAllUserContent","ScreenReaderContent","Tag","PureComponent","mimeTypeToAttachmentType","mimeType","FILE","GetAttachmentIcon","SuggestionTrie","word","i","letter","node","char","getNode","min","MAX_PARTIAL_LOOKUP_ITERATIONS","potentialValue","lastSuccessfulUsername","currentUsername","activeSuggestionID","activeSuggestionIndex","insert","shouldKeepPreviousResults","previousSuccessfulName","newNameSubstring","sortSuggestions","firstUserID","stateSlice","rest","suggestions","defaultSuggestions","currentNode","isLoading","currentMoment","moment","looseCollator","ACTIVE_THRESHOLD","recentlyActive","lessActive","daysAgo90","subtract","dateLastActive","lastActiveMoment","isSameOrAfter","sortByName","userA","userB","casedSearchName","toLocaleLowerCase","aCasedName","bCasedName","exactToTheTop","sort","allUsers","FileSizeUnit","floor","log","values","fullValue","pow","Number","parseFloat","toFixed","B","KB","MB","GB","TB","getUnabbreviatedFileSizeUnit","HumanFileSize","numBytes","ScrollOffsetContext","setScrollOffset","resetScrollOffset","scrollOffset","getCalcedHashOffset","temporarilyDisabledWatching","hashOffsetRef","offsetClass","ScrollOffsetProvider","isScrolledOff","hashOffset","isWatchingEnabled","duration","setState","setTimeout","shouldWatchScroll","requestAnimationFrame","newScrolledValue","scrollY","isScrollingDown","previousScrollValue","isScrollingUp","offsetElement","getBoundingClientRect","scrollWatchingEnabled","scrollHandler","useScrollOffset","ConditionalWrap","condition","useTheme","_components","addComponent","component","_mountComponents","parent","querySelectorAll","HTMLElement","getAttribute","parse","getComponent","mountReact","variablesOnly","noTheme","overwrite","FontSizeCalculatorContext","setFontSize","FontSizeCalculatorProvider","bodyCSS","overscrollBehavior","bodyClasses","Backgrounds","loaderVariables","fullPage","loaderClasses","fullPageLoader","mediumLoader","smallLoader","loaderContainer","Loader","showLoader","minimumTime","styleClass","loaderStyleClass","Fragment","timeout","clearTimeout","defaultFontConfig","google","BaseThemeProvider","errorComponent","requestData","themeHeader","getElementById","themeFooter","prepareShadowRoot","webFontConfig","urls","WebFont","load","loadThemeFonts","ThemeProvider","connect","ownProps","themeActions","AppContext","rootStyle","EmbedContent","defaultDesc","noBaseClass","FOCUS_CLASS","isSmall","setContentRef","description","MIN_HEIGHT","Translate","translatedSource","match","childrenID","childrenMatch","standaloneID","textMatch","getInterpolatedComponent","logIDNotFound","errorHandler","source","translateFunction","DateTime","dateTime","timestamp","titleTime","humanTime","mode","interval","setInterval","forceUpdate","clearInterval","toLocaleString","year","month","day","weekday","hour","minute","inputMoment","seconds","diff","asSeconds","from","toDate","SmartLink","passthru","Consumer","context","to","activeClassName","target","rel","sanitizeUrl","Attachment","dateUploaded","attachmentClasses","attachmentIconClasses","classesMetas","box","download","format","c0","GettyImagesEmbed","throwError","useThrowError","useLayoutEffect","convertGettyEmbeds","embedType","photoID","foreignID","data-height","data-width","data-sig","embedSignature","data-items","gettyPosts","escapeHTML","loadGettyImages","remove","fallbackCallback","gie","q","widgets","sig","w","h","caption","is360","tld","ensureScript","images","Array","imgurEmbed","createIframe","imagesLength","tasks","instgrm","Embeds","process","TruncatedText","truncate","resizeListener","useMaxHeight","truncateTextBasedOnMaxHeight","truncateBasedOnLines","calculateLineHeight","lines","shave","element","parseInt","getComputedStyle","EmbedTitle","expand","collapsableContentClasses","paddingAdjustment","heightContainer","collapser","collapserIcon","linearGradient","CollapsableContent","isExpandedDefault","firstChild","isExpanded","setIsExpanded","containerMaxHeight","heightLimit","overshoot","useRef","scrollRef","measurements","useMeasure","nextTick","scrollTo","maxCollapsedHeight","targetHeight","useSpring","gradientProps","hasOverflow","toggleID","contentID","div","aria-expanded","scrollTop","pageYOffset","documentElement","behavior","useHashScrolling","calcedOffset","beforeScrollHandler","scrollToHash","preventDefault","targetID","hash","querySelector","forceRenderStyles","initHashScrolling","UserContent","ignoreHashScrolling","dangerouslySetInnerHTML","__html","userLabelVariables","avatar","userLabelClasses","fixLineHeight","avatarLink","topRow","isCompact","userName","rolesClasses","metaVars","Roles","roles","maxRoleCount","wrapper","classesMeta","userRoles","UserLabel","date","dateLink","displayOptions","category","showRole","showCategory","userUrl","dateComponent","categoryComponent","src","photoUrl","alt","roleID","quoteEmbedVariables","quoteEmbedClasses","embedVars","isPadded","titleLink","footerMain","footerSeparator","borderStyle","postLink","postLinkIcon","discussionLink","blockquote","twitterEmbedClasses","card","TWITTER_SCRIPT","TwitterEmbed","twitterLoaded","setTwitterLoaded","onRenderComplete","convertTwitterEmbeds","data-tweeturl","data-tweetid","statusID","renderTweet","contentElement","twttr","contains","add","options","conversation","createTweet","tweets","promises","VideoEmbed","ratioClass","frameSrc","isPlaying","setIsPlaying","togglePlaying","simplifyFraction","shorthand","VideoIframe","VideoThumbnail","PlayIcon","frameBorder","allow","allowFullScreen","cssStyle","strokeWidth","embedErrorClasses","renderErrorRoot","renderErrorIconLink","EmbedRenderError","warningTitle","EmbedErrorBoundary","registeredEmbeds","Map","registerEmbed","EmbedComponent","set","mountEmbed","mountPoint","reject","exception","EmbedClass","isAsync","onMountComplete","mountPoints","parsedData","author","codePenID","max","scrolling","dateInserted","attachmentType","ratioStyle","giphyID","convertImgurEmbeds","data-id","imgurID","convertInstagramEmbeds","permaLink","postID","data-instgrm-captioned","data-instgrm-permalink","data-instgrm-version","version","linkImage","insertUser","showUserLabel","showCompactUserInfo","showDiscussionLink","showPostLink","showCategoryLink","expandByDefault","discussionTitle","linkToDiscussion","postTitle","linkToPost","showHeader","cite","frameSource","resourceType","resourceID","playlistID","trackID","parameters","show_artwork","showArtwork","visual","useVisualPlayer","query","soundCloudPlayerUrl","contentRef","isFocused","setFocused","isOpen","setIsOpen","useFocusWatcher","newFocusValue","embedMenuClasses","imageContainer","ImageEmbedMenu","onVisibilityChange","onSave","newValue","syncBackEmbedValue","initialAlt","frameHeaderClasses","rootMinimal","backButton","heading","headingMinimal","spacerWidth","leftSpacer","backButtonIcon","closeMinimal","containerVariables","narrowContentSize","boxSizing","typographyClasses","pageTitle","componentSubTitle","Heading","depth","classesTypography","titleRef","renderAsDepth","DropDownContentSize","DropDownOpenDirection","FlyoutType","DropDownContents","e","TabHandler","isTabbable","stopPropagation","nativeEvent","stopImmediatePropagation","asDropDownClasses","openAsModal","isMedium","asModalClasses","isVisible","parentID","selfPadded","flyoutPosition","renderAbove","renderLeft","doNothing","onMouseDown","forceTryFocus","FlexSpacer","smartAlignClasses","inner","SmartAlign","Outer","outerTag","Inner","DropDown","ownID","classesDropDown","classesFrameHeader","ContentTag","flyoutType","FRAME","ownButtonRef","openDirection","AUTO","documentWidth","documentHeight","clientHeight","rect","centerX","centerY","ABOVE_LEFT","ABOVE_RIGHT","BELOW_LEFT","BELOW_RIGHT","resolveOpenDirection","FlyoutToggle","buttonBaseClass","buttonClassName","toggleButtonClassName","initialFocusElement","contentsClassName","CloseButton","closeMenuHandler","closeLabel","attachmentVariables","loading","loadingProgress","loadingContent","attachmentIconVariables","errorIconHeight","frameFooterClasses","justifiedRight","markRead","FrameFooter","justifyRight","validSelection","frameBodyClasses","noContentMessage","FrameBody","isSelfPadded","suggestionReducer","counts","countUnreadNotifications","mapUsersStoreState","currentUser","highlightCodeBlocks","domNode","importHLJS","hljs","highlightBlock","highlightText","highlightAuto","innerImport","onClose","ID","buttonID","controllerRef","ownIsVisible","ownSetVisibility","setVisibility","closeAllFlyouts","buttonClickHandler","buttonElement","activeElement","parentElement","handleBlockEventPropogation","hasFocus","useEscapeListener","returnElement","childrenData","aria-haspopup","exitHandler","elementToFocusOnExit","MODAL_CONTAINER_ID","Modal","exitElementSet","shiftKey","keyCode","handleShiftTab","handleTab","topModal","stack","isWholePage","ReactDOM","createPortal","scrollable","handleTabbing","onModalClick","handleModalClick","onOverlayClick","handleScrimClick","modalRef","selfRef","titleID","getModalContainer","pageContainer","getPageContainer","focusInitialElement","setAttribute","handleDocumentEscapePress","prevProps","elementToFocus","setCloseFocusElement","pop","removeAttribute","prevFocussedElement","focusHistory","setImmediate","createElement","appendChild","focusElement","tabHandler","getInitial","nextElement","getNext","previousElement","modalVariables","horizontalMargin","modalClasses","translate","pageHeader","ModalView","descriptionID","ownRef","aria-modal","isFullScreen","FULL_SCREEN","MODAL_AS_SIDE_PANEL","isSidePanel","isDropDown","MODAL_AS_DROP_DOWN","isLarge","isShadowed"],"mappings":"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","file":"shared.min.js?3b68e12fdd2c2c2ef907","sourcesContent":["/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\n\nexport const defaultTransition = (...properties) => {\n    const vars = globalVariables();\n    properties = properties.length === 0 ? [\"all\"] : properties;\n    return {\n        transition: `${properties.map((prop, index) => {\n            return `${prop} ${vars.animation.defaultTiming} ${vars.animation.defaultEasing}${\n                index === properties.length ? \", \" : \"\"\n            }`;\n        })}`,\n    };\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport {\n    BackgroundAttachmentProperty,\n    BackgroundImageProperty,\n    BackgroundPositionProperty,\n    BackgroundRepeatProperty,\n    BackgroundSizeProperty,\n    ObjectFitProperty,\n    PositionProperty,\n} from \"csstype\";\nimport { percent, px, quote, url, viewHeight, viewWidth } from \"csx\";\nimport { NestedCSSProperties, TLength } from \"typestyle/lib/types\";\nimport { assetUrl, themeAsset } from \"@library/utility/appUtils\";\nimport { colorOut, ColorValues } from \"@library/styles/styleHelpersColors\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\n\nexport interface IBackground {\n    color: ColorValues;\n    attachment?: BackgroundAttachmentProperty;\n    position?: BackgroundPositionProperty<TLength>;\n    repeat?: BackgroundRepeatProperty;\n    size?: BackgroundSizeProperty<TLength>;\n    image?: BackgroundImageProperty;\n    fallbackImage?: BackgroundImageProperty;\n}\n\nexport const getBackgroundImage = (image?: BackgroundImageProperty, fallbackImage?: BackgroundImageProperty) => {\n    // Get either image or fallback\n    const workingImage = image ? image : fallbackImage;\n    if (!workingImage) {\n        return;\n    }\n\n    if (workingImage.charAt(0) === \"~\") {\n        // Relative path to theme folder\n        return themeAsset(workingImage.substr(1, workingImage.length - 1));\n    }\n\n    if (workingImage.startsWith('\"data:image/')) {\n        return workingImage;\n    }\n\n    // Fallback to a general asset URL.\n    const assetImage = assetUrl(workingImage);\n    return assetImage;\n};\n\nexport const background = (props: IBackground) => {\n    const image = getBackgroundImage(props.image, props.fallbackImage);\n    return {\n        backgroundColor: props.color ? colorOut(props.color) : undefined,\n        backgroundAttachment: props.attachment || undefined,\n        backgroundPosition: props.position || `50% 50%`,\n        backgroundRepeat: props.repeat || \"no-repeat\",\n        backgroundSize: props.size || \"cover\",\n        backgroundImage: image ? url(image) : undefined,\n    };\n};\n\nexport const objectFitWithFallback = () => {\n    return {\n        position: \"absolute\" as PositionProperty,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        margin: \"auto\",\n        height: \"auto\",\n        width: percent(100),\n        $nest: {\n            \"@supports (object-fit: cover)\": {\n                objectFit: \"cover\" as ObjectFitProperty,\n                objectPosition: \"center\",\n                height: percent(100),\n            },\n        },\n    } as NestedCSSProperties;\n};\nexport function fakeBackgroundFixed() {\n    return {\n        content: quote(\"\"),\n        display: \"block\",\n        position: \"fixed\",\n        top: px(0),\n        left: px(0),\n        width: viewWidth(100),\n        height: viewHeight(100),\n    };\n}\n\nexport function centeredBackgroundProps() {\n    return {\n        backgroundPosition: `50% 50%`,\n        backgroundRepeat: \"no-repeat\",\n    };\n}\n\nexport function centeredBackground() {\n    const style = styleFactory(\"centeredBackground\");\n    return style(centeredBackgroundProps());\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ILinkStates } from \"@library/styles/styleHelpersLinks\";\nimport { logDebug } from \"@vanilla/utils/src/debugUtils\";\n\n// Similar to ILinkStates, but can be button or link, so we don't have link specific states here and not specific to colors\nexport interface IActionStates {\n    noState?: object;\n    allStates?: object; // Applies to all\n    hover?: object;\n    focus?: object;\n    focusNotKeyboard?: object; // Focused, not through keyboard?: object;\n    accessibleFocus?: object; // Optionally different state for keyboard accessed element. Will default to \"focus\" state if not set.\n    active?: object;\n}\n\nexport interface IButtonStates {\n    allStates?: object; // Applies to all\n    noState?: object; // Applies to stateless link\n    hover?: object;\n    focus?: object;\n    focusNotKeyboard?: object; // Focused, not through keyboard\n    accessibleFocus?: object; // Optionally different state for keyboard accessed element. Will default to \"focus\" state if not set.\n    active?: object;\n}\n\nexport const allLinkStates = (styles: ILinkStates) => {\n    const output = allButtonStates(styles);\n    const visited = styles.visited !== undefined ? styles.visited : {};\n    output.$nest[\"&:visited\"] = { ...styles.allStates, ...visited };\n    return output;\n};\n\nexport const allButtonStates = (styles: IButtonStates, nested?: object, debugMode?: boolean) => {\n    const allStates = styles.allStates !== undefined ? styles.allStates : {};\n    const noState = styles.noState !== undefined ? styles.noState : {};\n\n    const output = {\n        ...allStates,\n        ...noState,\n        $nest: {\n            \"&:hover\": { ...allStates, ...styles.hover },\n            \"&:focus\": { ...allStates, ...styles.focus },\n            \"&:focus:not(.focus-visible)\": { ...allStates, ...styles.focusNotKeyboard },\n            \"&&.focus-visible\": { ...allStates, ...styles.accessibleFocus },\n            \"&:active\": { ...allStates, ...styles.active },\n            ...nested,\n        },\n    };\n\n    if (debugMode) {\n        logDebug(\"allButtonStates: \");\n        logDebug(\"style: \", styles);\n        logDebug(\"nested: \", nested);\n        logDebug(\"output: \", output);\n    }\n\n    return output;\n};\n\n/*\n * Helper to write CSS state styles. Note this one is for buttons or links\n * *** You must use this inside of a \"$nest\" ***\n */\nexport const buttonStates = (styles: IActionStates, nest?: object) => {\n    const allStates = styles.allStates !== undefined ? styles.allStates : {};\n    const hover = styles.hover !== undefined ? styles.hover : {};\n    const focus = styles.focus !== undefined ? styles.focus : {};\n    const focusNotKeyboard = styles.focusNotKeyboard !== undefined ? styles.focusNotKeyboard : {};\n    const accessibleFocus = styles.accessibleFocus !== undefined ? styles.accessibleFocus : {};\n    const active = styles.active !== undefined ? styles.active : {};\n    const noState = styles.noState !== undefined ? styles.noState : {};\n\n    return {\n        \"&\": { ...allStates, ...noState },\n        \"&:hover\": { ...allStates, ...hover },\n        \"&:focus\": { ...allStates, ...focus },\n        \"&:focus:not(.focus-visible)\": { ...allStates, ...focusNotKeyboard },\n        \"&.focus-visible\": { ...allStates, ...accessibleFocus },\n        \"&&:active\": { ...allStates, ...active },\n        ...nest,\n    };\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { AppearanceProperty, PointerEventsProperty, UserSelectProperty } from \"csstype\";\nimport { important } from \"csx\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\n\nexport const userSelect = (value: UserSelectProperty = \"none\", isImportant: boolean = false) => {\n    const val = (isImportant ? important(value) : value) as any;\n    return {\n        \"-webkit-user-select\": val,\n        \"-moz-user-select\": val,\n        \"-ms-user-select\": val,\n        userSelect: val,\n    };\n};\n\nexport const pointerEvents = (value: PointerEventsProperty = \"none\") => {\n    return {\n        pointerEvents: important(value),\n    };\n};\n\nexport const pointerEventsClass = (value: PointerEventsProperty = \"none\") => {\n    const style = styleFactory(\"pointerEvents\");\n    return style(pointerEvents(value));\n};\n\nexport const disabledInput = () => {\n    const formElementVars = formElementsVariables();\n    return {\n        pointerEvents: important(\"none\"),\n        ...userSelect(\"none\", true),\n        cursor: important(\"default\"),\n        opacity: important((formElementVars.disabled.opacity as any).toString()),\n    };\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ColorHelper } from \"csx\";\nimport { colorOut, ColorValues } from \"@library/styles/styleHelpersColors\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { IButtonStates } from \"@library/styles/styleHelpersButtons\";\n\nexport interface ILinkStates {\n    allStates?: object; // Applies to all\n    default?: object;\n    hover?: object;\n    focus?: object;\n    accessibleFocus?: object;\n    active?: object;\n    visited?: object;\n}\n\nexport interface ILinkStates extends IButtonStates {\n    visited?: object;\n}\n\nexport const linkStyleFallbacks = (\n    specificOverwrite: undefined | ColorHelper | string,\n    defaultOverwrite: undefined | ColorHelper | string,\n    globalDefault: undefined | ColorHelper | string,\n) => {\n    if (specificOverwrite) {\n        return specificOverwrite as ColorValues;\n    } else if (defaultOverwrite) {\n        return defaultOverwrite as ColorValues;\n    } else {\n        return globalDefault as ColorValues;\n    }\n};\n\nexport interface ILinkColorOverwrites {\n    default?: ColorValues;\n    hover?: ColorValues;\n    focus?: ColorValues;\n    accessibleFocus?: ColorValues;\n    active?: ColorValues;\n    visited?: ColorValues;\n    allStates?: ColorValues;\n}\n\nexport const setAllLinkColors = (overwriteValues?: ILinkColorOverwrites) => {\n    const vars = globalVariables();\n    // We want to default to the standard styles and only overwrite what we want/need\n    const linkColors = vars.links.colors;\n    const overwrites = overwriteValues ? overwriteValues : {};\n    const mergedColors = {\n        default: linkStyleFallbacks(overwrites.default, overwrites.allStates, linkColors.default),\n        hover: linkStyleFallbacks(overwrites.hover, overwrites.allStates, linkColors.hover),\n        focus: linkStyleFallbacks(overwrites.focus, overwrites.allStates, linkColors.focus),\n        accessibleFocus: linkStyleFallbacks(\n            overwrites.accessibleFocus,\n            overwrites.allStates,\n            linkColors.accessibleFocus,\n        ),\n        active: linkStyleFallbacks(overwrites.active, overwrites.allStates, linkColors.active),\n        visited: linkStyleFallbacks(overwrites.visited, overwrites.allStates, linkColors.visited),\n    };\n\n    const styles = {\n        default: {\n            color: colorOut(mergedColors.default),\n        },\n        hover: {\n            color: colorOut(mergedColors.hover),\n            cursor: \"pointer\",\n        },\n        focus: {\n            color: colorOut(mergedColors.focus),\n        },\n        accessibleFocus: {\n            color: colorOut(mergedColors.accessibleFocus),\n        },\n        active: {\n            color: colorOut(mergedColors.active),\n            cursor: \"pointer\",\n        },\n        visited: {\n            color: colorOut(mergedColors.visited),\n        },\n    };\n\n    const final = {\n        color: styles.default.color,\n        nested: {\n            \"&&:hover\": styles.hover,\n            \"&&:focus\": styles.focus,\n            \"&&.focus-visible\": styles.accessibleFocus,\n            \"&&:active\": styles.active,\n            \"&:visited\": styles.visited,\n        },\n    };\n\n    return final;\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { NestedCSSProperties } from \"typestyle/lib/types\";\nimport { unit } from \"@library/styles/styleHelpers\";\n\nexport interface IMargins {\n    top?: string | number | undefined;\n    right?: string | number | undefined;\n    bottom?: string | number | undefined;\n    left?: string | number | undefined;\n    horizontal?: string | number | undefined;\n    vertical?: string | number | undefined;\n    all?: string | number | undefined;\n}\n\nexport const margins = (styles: IMargins): NestedCSSProperties => {\n    const marginVals = {} as NestedCSSProperties;\n\n    if (styles.all !== undefined) {\n        marginVals.marginTop = unit(styles.all);\n        marginVals.marginRight = unit(styles.all);\n        marginVals.marginBottom = unit(styles.all);\n        marginVals.marginLeft = unit(styles.all);\n    }\n\n    if (styles.vertical !== undefined) {\n        marginVals.marginTop = unit(styles.vertical);\n        marginVals.marginBottom = unit(styles.vertical);\n    }\n\n    if (styles.horizontal !== undefined) {\n        marginVals.marginLeft = unit(styles.horizontal);\n        marginVals.marginRight = unit(styles.horizontal);\n    }\n\n    if (styles.top !== undefined) {\n        marginVals.marginTop = unit(styles.top);\n    }\n\n    if (styles.right !== undefined) {\n        marginVals.marginRight = unit(styles.right);\n    }\n\n    if (styles.bottom !== undefined) {\n        marginVals.marginBottom = unit(styles.bottom);\n    }\n\n    if (styles.left !== undefined) {\n        marginVals.marginLeft = unit(styles.left);\n    }\n\n    return marginVals as NestedCSSProperties;\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport {\n    AlignItemsProperty,\n    BottomProperty,\n    DisplayProperty,\n    FlexWrapProperty,\n    JustifyContentProperty,\n    LeftProperty,\n    PositionProperty,\n    RightProperty,\n} from \"csstype\";\nimport { NestedCSSProperties, TLength } from \"typestyle/lib/types\";\nimport { percent, px } from \"csx\";\nimport { unit } from \"@library/styles/styleHelpers\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\n\nexport const absolutePosition = {\n    topRight: (top: string | number = \"0\", right: RightProperty<TLength> = px(0)) => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            top: unit(top),\n            right: unit(right),\n        };\n    },\n    topLeft: (top: string | number = \"0\", left: LeftProperty<TLength> = px(0)) => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            top: unit(top),\n            left: unit(left),\n        };\n    },\n    bottomRight: (bottom: BottomProperty<TLength> = px(0), right: RightProperty<TLength> = px(0)) => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            bottom: unit(bottom),\n            right: unit(right),\n        };\n    },\n    bottomLeft: (bottom: BottomProperty<TLength> = px(0), left: LeftProperty<TLength> = px(0)) => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            bottom: unit(bottom),\n            left: unit(left),\n        };\n    },\n    middleOfParent: () => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            display: \"block\",\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            maxHeight: percent(100),\n            maxWidth: percent(100),\n            margin: \"auto\",\n        };\n    },\n    middleLeftOfParent: (left: LeftProperty<TLength> = px(0)) => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            display: \"block\",\n            top: 0,\n            left,\n            bottom: 0,\n            maxHeight: percent(100),\n            maxWidth: percent(100),\n            margin: \"auto 0\",\n        };\n    },\n    middleRightOfParent: (right: RightProperty<TLength> = px(0)) => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            display: \"block\",\n            top: 0,\n            right,\n            bottom: 0,\n            maxHeight: percent(100),\n            maxWidth: percent(100),\n            margin: \"auto 0\",\n        };\n    },\n    fullSizeOfParent: () => {\n        return {\n            display: \"block\",\n            position: \"absolute\" as PositionProperty,\n            top: px(0),\n            left: px(0),\n            width: percent(100),\n            height: percent(100),\n        };\n    },\n};\n\nexport function sticky(): NestedCSSProperties {\n    return {\n        position: [\"-webkit-sticky\", \"sticky\"],\n    };\n}\n\nexport function flexHelper() {\n    const middle = (wrap = false) => {\n        return {\n            display: \"flex\" as DisplayProperty,\n            alignItems: \"center\" as AlignItemsProperty,\n            justifyContent: \"center\" as JustifyContentProperty,\n            flexWrap: (wrap ? \"wrap\" : \"nowrap\") as FlexWrapProperty,\n        };\n    };\n\n    const middleLeft = (wrap = false) => {\n        return {\n            display: \"flex\" as DisplayProperty,\n            alignItems: \"center\" as AlignItemsProperty,\n            justifyContent: \"flex-start\" as JustifyContentProperty,\n            flexWrap: wrap ? \"wrap\" : (\"nowrap\" as FlexWrapProperty),\n        };\n    };\n\n    return { middle, middleLeft };\n}\n\nexport function fullSizeOfParent(): NestedCSSProperties {\n    return {\n        position: \"absolute\",\n        display: \"block\",\n        top: px(0),\n        left: px(0),\n        width: percent(100),\n        height: percent(100),\n    };\n}\n\nexport const inheritHeightClass = () => {\n    const style = styleFactory(\"inheritHeight\");\n    return style({\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexGrow: 1,\n    });\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { AppearanceProperty } from \"csstype\";\nimport { important } from \"csx\";\n\nexport const appearance = (value: AppearanceProperty = \"none\", isImportant: boolean = false) => {\n    const val = (isImportant ? important(value) : value) as any;\n    return {\n        \"-webkit-appearance\": val,\n        \"-moz-appearance\": val,\n        appearance: val,\n    };\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { keyframes } from \"typestyle\";\nimport { ColorHelper, deg, percent, quote } from \"csx\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ContentProperty, DisplayProperty, PositionProperty } from \"csstype\";\nimport { debugHelper, defaultTransition, unit } from \"@library/styles/styleHelpers\";\n\nconst spinnerOffset = 73;\nconst spinnerLoaderAnimation = keyframes({\n    \"0%\": { transform: `rotate(${deg(spinnerOffset)})` },\n    \"100%\": { transform: `rotate(${deg(360 + spinnerOffset)})` },\n});\n\nexport interface ISpinnerProps {\n    color?: ColorHelper;\n    dimensions?: string | number;\n    thickness?: string | number;\n    size?: string | number;\n    speed?: string;\n}\n\nexport const spinnerLoader = (props: ISpinnerProps) => {\n    const debug = debugHelper(\"spinnerLoader\");\n    const globalVars = globalVariables();\n    const spinnerVars = {\n        color: props.color || globalVars.mainColors.primary,\n        size: props.size || 18,\n        thickness: props.thickness || 3,\n        speed: \"0.7s\",\n        ...props,\n    };\n    return {\n        ...debug.name(\"spinner\"),\n        position: \"relative\" as PositionProperty,\n        content: quote(\"\") as ContentProperty,\n        ...defaultTransition(\"opacity\"),\n        display: \"block\" as DisplayProperty,\n        width: unit(spinnerVars.size),\n        height: unit(spinnerVars.size),\n        borderRadius: percent(50),\n        borderTop: `${unit(spinnerVars.thickness)} solid ${spinnerVars.color.toString()}`,\n        borderRight: `${unit(spinnerVars.thickness)} solid ${spinnerVars.color.fade(0.3).toString()}`,\n        borderBottom: `${unit(spinnerVars.thickness)} solid ${spinnerVars.color.fade(0.3).toString()}`,\n        borderLeft: `${unit(spinnerVars.thickness)} solid ${spinnerVars.color.fade(0.3).toString()}`,\n        transform: \"translateZ(0)\",\n        animation: `spillerLoader ${spinnerVars.speed} infinite ease-in-out`,\n        animationName: spinnerLoaderAnimation,\n        animationDuration: spinnerVars.speed,\n        animationIterationCount: \"infinite\",\n        animationTimingFunction: \"ease-in-out\",\n    };\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { important, px } from \"csx\";\nimport { styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\n\nexport function srOnly() {\n    return {\n        position: important(\"absolute\"),\n        display: important(\"block\"),\n        width: important(px(1).toString()),\n        height: important(px(1).toString()),\n        padding: important(px(0).toString()),\n        margin: important(px(-1).toString()),\n        overflow: important(\"hidden\"),\n        clip: important(`rect(0, 0, 0, 0)`),\n        border: important(px(0).toString()),\n    };\n}\n\nexport const visibility = useThemeCache(() => {\n    const style = styleFactory(\"visibility\");\n    const onEmpty = (nest?: object) => {\n        return style(\"onEmpty\", {\n            $nest: {\n                \"&:empty\": {\n                    display: \"none\",\n                },\n                ...nest,\n            },\n        });\n    };\n\n    const visuallyHidden = style(\"srOnly\", srOnly());\n\n    const displayNone = style(\"displayNone\", {\n        display: important(\"none\"),\n    });\n\n    return {\n        onEmpty,\n        displayNone,\n        visuallyHidden,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { important, px } from \"csx\";\nexport * from \"@library/styles/styleHelpersAnimation\";\nexport * from \"@library/styles/styleHelpersBackgroundStyling\";\nexport * from \"@library/styles/styleHelpersTypography\";\nexport * from \"@library/styles/styleHelpersBorders\";\nexport * from \"@library/styles/styleHelpersButtons\";\nexport * from \"@library/styles/styleHelpersColors\";\nexport * from \"@library/styles/styleHelpersDropShadow\";\nexport * from \"@library/styles/styleHelpersFeedback\";\nexport * from \"@library/styles/styleHelpersfPadding\";\nexport * from \"@library/styles/styleHelpersLinks\";\nexport * from \"@library/styles/styleHelpersMargin\";\nexport * from \"@library/styles/styleHelpersPositioning\";\nexport * from \"@library/styles/styleHelpersReset\";\nexport * from \"@library/styles/styleHelpersSpinner\";\nexport * from \"@library/styles/styleHelpersTypography\";\nexport * from \"@library/styles/styleHelpersVisibility\";\n\n/*\n * Helper to generate human readable classes generated from TypeStyle\n * @param componentName - The component's name.\n */\nexport const debugHelper = (componentName: string) => {\n    return {\n        name: (subElementName?: string) => {\n            if (subElementName) {\n                return { $debugName: `${componentName}-${subElementName}` };\n            } else {\n                return { $debugName: componentName };\n            }\n        },\n    };\n};\n\nexport const ifExistsWithFallback = checkProp => {\n    if (checkProp && checkProp.length > 0) {\n        const next = checkProp.pop();\n        return next ? next : ifExistsWithFallback(checkProp);\n    } else {\n        return undefined;\n    }\n};\n\nexport const unit = (val: string | number | undefined, unitFunction = px) => {\n    if (typeof val === \"string\") {\n        return val;\n    } else if (val !== undefined && val !== null && !isNaN(val)) {\n        return unitFunction(val as number);\n    } else {\n        return val;\n    }\n};\n\nexport const importantUnit = (val: string | number | undefined, unitFunction = px) => {\n    const withUnit = unit(val);\n    return withUnit ? important(withUnit.toString()) : withUnit;\n};\n\nexport const negative = val => {\n    if (typeof val === \"string\") {\n        val = val.trim();\n        if (val.startsWith(\"-\")) {\n            return val.substring(1, val.length).trim();\n        } else {\n            return `-${val}`;\n        }\n    } else if (!!val && !isNaN(val)) {\n        return val * -1;\n    } else {\n        return val;\n    }\n};\n\n// export interface IStates {\n//     hover?: object;\n//     focus?: object;\n//     active?: object;\n//     accessibleFocus?: object;\n// }\n//\n// export interface IStatesAll {\n//     allStates?: object;\n// }\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport getStore from \"@library/redux/getStore\";\n\nexport function getThemeVariables() {\n    const state = getStore().getState();\n    if (state !== null) {\n        const assets = state.theme.assets.data || {};\n        const variables = assets.variables ? assets.variables.data : {};\n        return variables;\n    } else {\n        return {};\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { NestedCSSProperties } from \"typestyle/lib/types\";\nimport { style } from \"typestyle\";\nimport getStore from \"@library/redux/getStore\";\nimport { getMeta } from \"@library/utility/appUtils\";\nimport memoize from \"lodash/memoize\";\nimport merge from \"lodash/merge\";\nimport { color } from \"csx\";\nimport { logDebug, logWarning } from \"@vanilla/utils\";\nimport { getThemeVariables } from \"@library/theming/getThemeVariables\";\n\nexport const DEBUG_STYLES = Symbol.for(\"Debug\");\n\n/**\n * A better helper to generate human readable classes generated from TypeStyle.\n *\n * This works like debugHelper but automatically. The generated function behaves just like `style()`\n * but can automatically adds a debug name & allows the first argument to be a string subcomponent name.\n *\n * Additionally passing the first parameter as true will log out out debug information about the styles.\n *\n * @example\n * const style = styleFactory(\"myComponent\");\n * const myClass = style({ color: \"red\" }); // .myComponent-sad421s\n * const mySubClass = style(\"subcomponent\", { color: \"red\" }) // .myComponent-subcomponent-23sdaf43\n * const withDebugMode = style(true, \"subcomponent\", {color: \"red\"}).\n */\nexport function styleFactory(componentName: string) {\n    function styleCreator(subcomponentName: string, ...objects: NestedCSSProperties[]): string;\n    function styleCreator(debug: symbol, subcomponentName: string, ...objects: NestedCSSProperties[]): string;\n    function styleCreator(...objects: NestedCSSProperties[]): string;\n    function styleCreator(...objects: Array<NestedCSSProperties | string | symbol>): string {\n        if (objects.length === 0) {\n            return style();\n        }\n\n        let debugName = componentName;\n        let shouldLogDebug = false;\n        let styleObjs: Array<NestedCSSProperties | undefined> = objects as any;\n        if (objects[0] === DEBUG_STYLES) {\n            styleObjs.shift();\n            shouldLogDebug = true;\n        }\n        if (typeof objects[0] === \"string\") {\n            const [subcomponentName, ...restObjects] = styleObjs;\n            debugName += `-${subcomponentName}`;\n            styleObjs = restObjects;\n        }\n\n        if (shouldLogDebug) {\n            logWarning(`Debugging component ${debugName}`);\n            logDebug(styleObjs);\n        }\n\n        return style({ $debugName: debugName }, ...styleObjs);\n    }\n\n    return styleCreator;\n}\n\n/**\n * Wrap a callback so that it will only run once with a particular set of global theme variables.\n *\n * @param callback The function to wrap.\n */\nexport function useThemeCache<Cb>(callback: Cb): Cb {\n    const makeCacheKey = (...args) => {\n        const storeState = getStore().getState();\n        const themeKey = getMeta(\"ui.themeKey\", \"default\");\n        const status = storeState.theme.assets.status;\n        const cacheKey = themeKey + status;\n        return cacheKey + JSON.stringify(args);\n    };\n    return memoize(callback as any, makeCacheKey);\n}\n\n/**\n * A helper class for declaring variables while mixing server defined variables from context.\n *\n * The function returned from the factory\n * - will search the API based theme for an item of the same key.\n * - Normalize the items {@see normalizeVariables}\n * - Merge in all subtrees. (theme variables override your defaults).\n *\n * @param componentName The base name of the component being styled.\n *\n * @example\n *\n * // The stuff returned through the API response\n * const serverVars = {\n *      \"globalVars\": {\n *          \"links\": {\n *              \"colors\": {\n *                  \"default\": \"red\",\n *                  \"hover\": \"#444444\",\n *              }\n *          }\n *      }\n * };\n *\n * // Your declaration\n * const makeThemeVars = variableFactory(\"globalVars\");\n * const subVars = makeThemeVars(\"links\", { colors: {\n *      default: mainColors.primary, // These are `ColorHelpers`\n *      hover: mainColors.primary.darken(0.2), // They mixed variables will be automatically converted\n * }});\n */\nexport function variableFactory(componentName: string) {\n    const themeVars = getThemeVariables();\n    const componentVars = (themeVars && themeVars[componentName]) || {};\n\n    return function makeThemeVars<T extends object>(subElementName: string, declaredVars: T): T {\n        const subcomponentVars = (componentVars && componentVars[subElementName]) || {};\n        return merge(declaredVars, normalizeVariables(subcomponentVars));\n    };\n}\n\n/**\n * Take some Object/Value from the variable factory and wrap it in it's proper wrapper.\n *\n * Iterates through all children and does the following:\n *\n * - Strings starting with `#` get wrapped in `color()`;\n */\nfunction normalizeVariables(variables: any) {\n    if (typeof variables === \"object\") {\n        const newObj: any = {};\n        for (const [key, value] of Object.entries(variables)) {\n            newObj[key] = normalizeVariables(value);\n        }\n        return newObj;\n    }\n\n    if (typeof variables === \"string\") {\n        if (variables.startsWith(\"#\")) {\n            // It's a colour.\n            return color(variables);\n        }\n    }\n\n    return variables;\n}\n\n/**\n * Helper to overwrite styles\n * @param theme - The theme overwrites.\n * @param componentName - The name of the component to overwrite\n *\n * @deprecated\n */\nexport const componentThemeVariables = (componentName: string) => {\n    const themeVars = getThemeVariables();\n    const componentVars = (themeVars && themeVars[componentName]) || {};\n\n    const subComponentStyles = (subElementName: string): object => {\n        return (componentVars && componentVars[subElementName]) || {};\n    };\n\n    return {\n        subComponentStyles,\n    };\n};\n","/**\n * Application functions for interop between Components in different packages.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport gdn from \"@library/gdn\";\nimport { PromiseOrNormalCallback } from \"@vanilla/utils\";\nimport isUrl from \"validator/lib/isURL\";\n\n// Re-exported for backwards compatibility\nexport { t, translate } from \"@vanilla/i18n\";\n\n/**\n * Get a piece of metadata passed from the server.\n *\n * @param key - The key to lookup.\n * @param defaultValue - A fallback value in case the key cannot be found.\n *\n * @returns Returns a meta value or the default value.\n */\nexport function getMeta(key: string, defaultValue?: any) {\n    if (!gdn.meta) {\n        return defaultValue;\n    }\n\n    const parts = key.split(\".\");\n    let haystack = gdn.meta;\n\n    for (const part of parts) {\n        if (!haystack.hasOwnProperty(part)) {\n            return defaultValue;\n        }\n        haystack = haystack[part];\n    }\n    return haystack;\n}\n\n/**\n * Set a piece of metadata. This will override what was passed from the server.\n *\n * @param key - The key to store under.\n * @param value - The value to set.\n */\nexport function setMeta(key: string, value: any) {\n    const parts = key.split(\".\");\n    const last = parts.pop();\n\n    if (!last) {\n        throw new Error(`Unable to set meta value ${key}. ${last} is not a valid object key.`);\n    }\n\n    let haystack = gdn.meta;\n\n    for (const part of parts) {\n        if (haystack[part] === null || typeof haystack[part] !== \"object\") {\n            haystack[part] = {};\n        }\n        haystack = haystack[part];\n    }\n    haystack[last] = value;\n}\n\n/**\n * Determine if a string is an allowed URL.\n *\n * In the future this may be extended to check if we want to whitelist/blacklist various URLs.\n *\n * @param input - The string to check.\n */\nexport function isAllowedUrl(input: string): boolean {\n    // Options https://github.com/chriso/validator.js#validators\n    const options = {\n        protocols: [\"http\", \"https\"],\n        require_tld: true,\n        require_protocol: true,\n        require_host: true,\n        require_valid_protocol: true,\n        allow_trailing_dot: false,\n        allow_protocol_relative_urls: false,\n    };\n    return isUrl(input, options);\n}\n\n/**\n * Format a URL in the format passed from the controller.\n *\n * @param path - The path to format.\n *\n * @returns Returns a URL that can be used in the APP.\n */\nexport function formatUrl(path: string, withDomain: boolean = false): string {\n    if (path.indexOf(\"//\") >= 0) {\n        return path;\n    } // this is an absolute path.\n\n    // The context paths that come down are expect to have no / at the end of them.\n    // Normally a domain like so: https://someforum.com\n    // When we don't have that we want to fallback to \"\" so that our path with a / can get passed.\n    const urlBase = withDomain\n        ? window.location.origin + getMeta(\"context.basePath\", \"\")\n        : getMeta(\"context.basePath\", \"\");\n    return urlBase + path;\n}\n\n/**\n * Generate a URL from the site's web root.\n *\n * No site section will be included.\n */\nexport function siteUrl(path: string): string {\n    if (path.indexOf(\"//\") >= 0) {\n        return path;\n    } // this is an absolute path.\n\n    // The context paths that come down are expect to have no / at the end of them.\n    // Normally a domain like so: https://someforum.com\n    // When we don't have that we want to fallback to \"\" so that our path with a / can get passed.\n    const urlBase = window.location.origin + getMeta(\"context.host\", \"\");\n    return urlBase + path;\n}\n\n/**\n * Extract relative URL part from absolute full URL.\n *\n * @param fullUrl - The absolute url to transform.\n *\n * @returns Returns a URL that can be used in the APP.\n */\nexport function getRelativeUrl(fullUrl: string): string {\n    const urlBase = window.location.origin + getMeta(\"context.basePath\", \"\");\n    return fullUrl.replace(urlBase, \"\");\n}\n\n/**\n * Create the URL of an asset of the site.\n *\n * @param path - The path to format.\n *\n * @returns Returns a URL that can be used for a static asset.\n */\nexport function assetUrl(path: string): string {\n    if (path.indexOf(\"//\") >= 0) {\n        return path;\n    } // this is an absolute path.\n\n    // The context paths that come down are expect to have no / at the end of them.\n    // Normally a domain like so: https://someforum.com\n    // When we don't have that we want to fallback to \"\" so that our path with a / can get passed.\n    const urlFormat = getMeta(\"context.assetPath\", \"\");\n    return urlFormat + path;\n}\n\n/**\n * Create the URL to the theme's asset folder\n *\n * @param path - The path to format.\n *\n * @returns Returns a URL that can be used for a static asset.\n */\nexport function themeAsset(path: string): string {\n    const themeKey = getMeta(\"ui.themeKey\");\n    return assetUrl(`/themes/${themeKey}/${path}`);\n}\n\n/**\n * @type {Array}\n * @private\n */\nconst _readyHandlers: PromiseOrNormalCallback[] = [];\n\n/**\n * Register a callback that executes when the document and the core libraries are ready to use.\n *\n * @param callback - The function to call. This can return a Promise but doesn't have to.\n */\nexport function onReady(callback: PromiseOrNormalCallback) {\n    _readyHandlers.push(callback);\n}\n\n/**\n * Execute all of the registered events in order.\n *\n * @returns A Promise when the events have all fired.\n */\nexport function _executeReady(): Promise<any[]> {\n    return new Promise(resolve => {\n        const handlerPromises = _readyHandlers.map(handler => handler());\n        const exec = () => {\n            return Promise.all(handlerPromises).then(resolve);\n        };\n\n        if (document.readyState !== \"loading\") {\n            return exec();\n        } else {\n            document.addEventListener(\"DOMContentLoaded\", exec);\n        }\n    });\n}\n\n/**\n * Execute a callback when a piece of DOM content is ready to be operated on.\n *\n * This is similar to onReady() but also includes content that is added dynamically (ex. AJAX).\n * Note that this function is meant to bridge the non-react parts of the application with react.\n *\n * @param callback - The callback to execute.\n */\nexport function onContent(callback: (event: CustomEvent) => void) {\n    document.addEventListener(\"X-DOMContentReady\", callback);\n}\n\n/**\n * Remove a listener registered with `onContent`.\n */\nexport function removeOnContent(callback: (event: CustomEvent) => void) {\n    document.removeEventListener(\"X-DOMContentReady\", callback);\n}\n\n/**\n * Make a URL to a user's profile.\n */\nexport function makeProfileUrl(username: string) {\n    const userPath = `/profile/${encodeURIComponent(username)}`;\n    return formatUrl(userPath, true);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport {\n    colorOut,\n    ColorValues,\n    emphasizeLightness,\n    IBackground,\n    IBorderRadiusOutput,\n    modifyColorBasedOnLightness,\n    radiusValue,\n} from \"@library/styles/styleHelpers\";\nimport { useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { BorderStyleProperty, BorderWidthProperty } from \"csstype\";\nimport { color, ColorHelper, percent } from \"csx\";\nimport { TLength } from \"typestyle/lib/types\";\nimport { logDebug, logError, logWarning } from \"@vanilla/utils\";\n\nexport const globalVariables = useThemeCache(() => {\n    let colorPrimary = color(\"#0291db\");\n    const makeThemeVars = variableFactory(\"global\");\n\n    const utility = {\n        \"percentage.third\": percent(100 / 3),\n        \"percentage.nineSixteenths\": percent((9 / 16) * 100),\n        \"svg.encoding\": \"data:image/svg+xml,\",\n    };\n\n    const elementaryColors = {\n        black: color(\"#000\"),\n        white: color(\"#fff\"),\n        transparent: \"transparent\" as ColorValues,\n    };\n\n    const initialMainColors = makeThemeVars(\"mainColors\", {\n        fg: color(\"#555a62\"),\n        bg: color(\"#fff\"),\n        primary: colorPrimary,\n        secondary: colorPrimary,\n    });\n\n    colorPrimary = initialMainColors.primary;\n\n    const generatedMainColors = makeThemeVars(\"mainColors\", {\n        secondary: emphasizeLightness(colorPrimary, 0.065),\n    });\n\n    const mainColors = {\n        ...initialMainColors,\n        ...generatedMainColors,\n    };\n\n    const mixBgAndFg = (weight: number) => {\n        return mainColors.fg.mix(mainColors.bg, weight) as ColorHelper;\n    };\n\n    const mixPrimaryAndFg = (weight: number) => {\n        return mainColors.primary.mix(mainColors.fg, weight) as ColorHelper;\n    };\n\n    const mixPrimaryAndBg = (weight: number) => {\n        return mainColors.primary.mix(mainColors.bg, weight) as ColorHelper;\n    };\n\n    const messageColors = makeThemeVars(\"messageColors\", {\n        warning: {\n            fg: color(\"#4b5057\"),\n            bg: color(\"#fff1ce\"),\n            state: color(\"#e55a1c\"),\n        },\n        error: {\n            fg: color(\"#d0021b\"),\n            bg: color(\"#FFF3D4\"),\n        },\n        confirm: color(\"#60bd68\"),\n        deleted: {\n            fg: color(\"#D0021B\"),\n            bg: color(\"#D0021B\"),\n        },\n    });\n\n    const linkColorDefault = mainColors.secondary;\n    const linkColorState = emphasizeLightness(colorPrimary, 0.09);\n    const links = makeThemeVars(\"links\", {\n        colors: {\n            default: linkColorDefault,\n            hover: linkColorState,\n            focus: linkColorState,\n            accessibleFocus: linkColorState,\n            active: linkColorState,\n            visited: undefined,\n        },\n    });\n\n    interface IBody {\n        backgroundImage: IBackground;\n    }\n\n    const body: IBody = makeThemeVars(\"body\", {\n        backgroundImage: {\n            color: mainColors.bg,\n        },\n    });\n\n    const border = makeThemeVars(\"border\", {\n        color: mixBgAndFg(0.15),\n        width: 1,\n        style: \"solid\",\n        radius: 6,\n    });\n\n    const gutterSize = 16;\n    const gutter = makeThemeVars(\"gutter\", {\n        size: gutterSize,\n        half: gutterSize / 2,\n        quarter: gutterSize / 4,\n    });\n\n    const lineHeights = makeThemeVars(\"lineHeight\", {\n        base: 1.5,\n        condensed: 1.25,\n        code: 1.45,\n        excerpt: 1.4,\n        meta: 1.5,\n    });\n\n    const panelWidth = 216;\n    const panel = makeThemeVars(\"panelWidth\", {\n        width: panelWidth,\n        paddedWidth: panelWidth + gutter.size * 2,\n    });\n\n    const middleColumnWidth = 672;\n    const middleColumn = makeThemeVars(\"middleColumn\", {\n        width: middleColumnWidth,\n        paddedWidth: middleColumnWidth + gutter.size * 2,\n    });\n\n    const content = makeThemeVars(\"content\", {\n        width: middleColumn.paddedWidth + panel.paddedWidth * 2 + gutter.size * 4,\n    });\n\n    const fonts = makeThemeVars(\"fonts\", {\n        size: {\n            large: 16,\n            medium: 14,\n            small: 12,\n            largeTitle: 32,\n            title: 22,\n            subTitle: 18,\n        },\n\n        mobile: {\n            size: {\n                title: 26,\n            },\n        },\n        weights: {\n            normal: 400,\n            semiBold: 600,\n            bold: 700,\n        },\n\n        families: {\n            body: [\"Open Sans\"],\n        },\n        alignment: {\n            headings: {\n                capitalLetterRatio: 0.715, // Calibrated for Open Sans\n                verticalOffset: 1, // Calibrated for Open Sans\n                horizontal: -0.03, // Calibrated for Open Sans\n                verticalOffsetForAdjacentElements: \"-.13em\", // Calibrated for Open Sans\n            },\n        },\n    });\n\n    const icon = makeThemeVars(\"icon\", {\n        sizes: {\n            large: 32,\n            default: 24,\n            small: 16,\n            xSmall: 9.5,\n        },\n        color: mixBgAndFg(0.18),\n    });\n\n    const spacer = makeThemeVars(\"spacer\", {\n        size: fonts.size.medium * lineHeights.base,\n    });\n\n    const animation = makeThemeVars(\"animation\", {\n        defaultTiming: \".15s\",\n        defaultEasing: \"ease-out\",\n    });\n\n    const embed = makeThemeVars(\"embed\", {\n        error: {\n            bg: messageColors.error,\n        },\n        focus: {\n            color: mainColors.primary,\n        },\n        text: {\n            padding: fonts.size.medium,\n        },\n        sizing: {\n            smallPadding: 4,\n            width: 640,\n        },\n        select: {\n            borderWidth: 2,\n        },\n        overlay: {\n            hover: {\n                color: mainColors.bg.fade(0.5),\n            },\n        },\n    });\n\n    const meta = makeThemeVars(\"meta\", {\n        text: {\n            fontSize: fonts.size.small,\n            color: mixBgAndFg(0.85),\n            margin: 4,\n        },\n        spacing: {\n            verticalMargin: 12,\n            default: gutter.quarter,\n        },\n        lineHeights: {\n            default: lineHeights.base,\n        },\n        colors: {\n            fg: mixBgAndFg(0.85),\n        },\n    });\n\n    const states = makeThemeVars(\"states\", {\n        icon: {\n            opacity: 0.6,\n        },\n        text: {\n            opacity: 0.75,\n        },\n        hover: {\n            color: mixPrimaryAndBg(0.08),\n            opacity: 1,\n        },\n        selected: {\n            color: mixPrimaryAndBg(0.5),\n            opacity: 1,\n        },\n        active: {\n            color: mixPrimaryAndBg(0.2),\n            opacity: 1,\n        },\n        focus: {\n            color: mixPrimaryAndBg(0.15),\n            opacity: 1,\n        },\n    });\n\n    const overlayBg = modifyColorBasedOnLightness(mainColors.fg, 0.5);\n    const overlay = makeThemeVars(\"overlay\", {\n        dropShadow: `2px -2px 5px ${colorOut(overlayBg.fade(0.3))}`,\n        bg: overlayBg,\n        border: {\n            color: border.color,\n            radius: border.radius,\n        },\n        fullPageHeadingSpacer: 32,\n        spacer: 32,\n    });\n\n    const userContent = makeThemeVars(\"userContent\", {\n        font: {\n            sizes: {\n                default: fonts.size.medium,\n                h1: \"2em\",\n                h2: \"1.5em\",\n                h3: \"1.25em\",\n                h4: \"1em\",\n                h5: \".875em\",\n                h6: \".85em\",\n            },\n        },\n        list: {\n            margin: \"2em\",\n            listDecoration: {\n                minWidth: \"2em\",\n            },\n        },\n    });\n\n    const buttonIconSize = 36;\n    const buttonIcon = makeThemeVars(\"buttonIcon\", {\n        size: buttonIconSize,\n        offset: (buttonIconSize - icon.sizes.default) / 2,\n    });\n\n    const separator = makeThemeVars(\"separator\", {\n        color: border.color,\n        size: 1,\n    });\n\n    // https://medium.com/@clagnut/all-you-need-to-know-about-hyphenation-in-css-2baee2d89179\n    // Requires language set on <html> tag\n    const userContentHyphenation = makeThemeVars(\"userContentHyphenation\", {\n        minimumCharactersToHyphenate: 6,\n        minimumCharactersBeforeBreak: 3,\n        minimumCharactersAfterBreak: 3,\n        maximumConsecutiveBrokenLines: 2,\n        avoidLastWordToBeBroken: true,\n        hyphenationZone: \"6em\",\n    });\n\n    // This function should not be used in production, but is helpful for development.\n    // Helps to find the right \"mix\" of bg and fg for a target hex color\n\n    const findColorMatch = (hexCode: string) => {\n        if (process.env.NODE_ENV === \"development\") {\n            logWarning(\"Don't use 'findColorMatch' in production\");\n            const globalVars = globalVariables();\n            const colorToMatch = color(hexCode.replace(\"#\", \"\"));\n            const max = 100;\n            const lightnessPrecision = 3;\n            const targetLightness = colorToMatch.lightness().toFixed(lightnessPrecision);\n            for (let i = 0; i <= max; i++) {\n                const mix = i / max;\n                const currentColor = globalVars.mixBgAndFg(mix);\n                if (currentColor.toHexString() === colorToMatch.toHexString()) {\n                    logDebug(\"---exact match\");\n                    logDebug(\"real grey: \" + colorToMatch.toHexString());\n                    logDebug(\"target grey: \" + currentColor.toHexString());\n                    logDebug(\"mix: \" + mix);\n                    logDebug(\"---\");\n                    i = max;\n                    return;\n                }\n                if (currentColor.lightness().toFixed(lightnessPrecision) === targetLightness) {\n                    logDebug(\"---lightness match: \" + mix);\n                    i = max;\n                    return;\n                }\n            }\n        } else if (process.env.NODE_ENV === \"test\") {\n            throw new Error(\"Don't use 'findColorMatch' in production\");\n        }\n        logError(\"The function 'findColorMatch' is not meant for production\");\n    };\n\n    return {\n        utility,\n        elementaryColors,\n        mainColors,\n        messageColors,\n        body,\n        border,\n        meta,\n        gutter,\n        panel,\n        content,\n        fonts,\n        spacer,\n        lineHeights,\n        icon,\n        buttonIcon,\n        animation,\n        links,\n        embed,\n        states,\n        overlay,\n        userContent,\n        mixBgAndFg,\n        mixPrimaryAndFg,\n        mixPrimaryAndBg,\n        separator,\n        userContentHyphenation,\n        findColorMatch,\n    };\n});\n\nexport interface IGlobalBorderStyles extends IBorderRadiusOutput {\n    color: ColorValues;\n    width: BorderWidthProperty<TLength> | number;\n    style: BorderStyleProperty;\n    radius?: radiusValue;\n}\n\nexport enum IIconSizes {\n    SMALL = \"small\",\n    DEFAULT = \"default\",\n    LARGE = \"large\",\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { Omit } from \"@library/@types/utils\";\nimport { AxiosError, AxiosResponse } from \"axios\";\nimport { IUserFragment } from \"@library/@types/api/users\";\n\nexport enum LoadStatus {\n    PENDING = \"PENDING\",\n    LOADING = \"LOADING\",\n    SUCCESS = \"SUCCESS\",\n    ERROR = \"ERROR\",\n}\n\nexport interface ILoadable<T, E = IApiError> {\n    status: LoadStatus;\n    error?: E;\n    data?: T;\n}\n\nexport interface IApiResponse<DataType = any> {\n    data: DataType;\n    status: number;\n    headers?: any;\n}\n\nexport interface IFieldError {\n    message: string; // translated message\n    code: string; // translation code\n    field: string;\n    status?: number; // HTTP status\n}\n\nexport interface IServerError {\n    message: string;\n    status: number;\n    errors?: {\n        [key: string]: IFieldError[];\n    };\n}\n\nexport interface IApiError extends AxiosError {\n    response: AxiosResponse<IServerError | null>;\n}\n\ninterface IMultiType<T> {\n    recordType: T;\n    recordID: number;\n}\n\nexport type MultiTypeRecord<T, Subtract extends keyof T, TypeName extends string> = Omit<T, Subtract> &\n    IMultiType<TypeName>;\n\nexport interface INavigationItem {\n    name: string;\n    url: string;\n    parentID: number;\n    recordID: number;\n    sort: number | null;\n    recordType: string;\n}\n\nexport interface IApiDateInfo {\n    insertUserID: number;\n    insertDate: string;\n    updateUserID: number;\n    updateDate: string;\n}\n\nexport interface IApiDateInfoExpanded extends IApiDateInfo {\n    insertUser: IUserFragment;\n    updateUser: IUserFragment;\n}\n\nexport interface INavigationTreeItem extends INavigationItem {\n    children: INavigationTreeItem[];\n}\n\nexport interface ILinkGroup {\n    category: INavigationItem;\n    items: INavigationItem[];\n}\n\nexport interface ILinkListData {\n    groups: ILinkGroup[];\n    ungroupedItems: INavigationItem[];\n}\n\nexport enum PublishStatus {\n    DELETED = \"deleted\",\n    UNDELETED = \"undeleted\",\n    PUBLISHED = \"published\",\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ColorHelper, important } from \"csx\";\n\nexport type ColorValues = ColorHelper | \"transparent\" | undefined;\n\nexport const colorOut = (colorValue: ColorValues | string, makeImportant = false) => {\n    if (!colorValue) {\n        return undefined;\n    } else {\n        const output = typeof colorValue === \"string\" ? colorValue : colorValue.toString();\n        return makeImportant ? important(output) : output;\n    }\n};\n\n/*\n * Check if it's a light color or dark color based on lightness\n * @param color - The color we're checking\n */\nexport const isLightColor = (color: ColorHelper) => {\n    return color.lightness() >= 0.5;\n};\n\n/*\n * Color modification based on colors lightness.\n * @param color - The color we're checking and modifying\n * @param weight - The amount you want to mix the two colors (value from 0 to 1)\n * @param flip - By default we darken light colours and lighten dark colors, but if you want to get the opposite result, use this param\n * Note, however, that we do not check if you've reached a maximum. Example: If you want to darken pure black, you get back pure black.\n */\nexport const modifyColorBasedOnLightness = (color: ColorHelper, weight: number, flip: boolean = false) => {\n    let output;\n    if (weight > 1 || weight < 0) {\n        throw new Error(\"mixAmount must be a value between 0 and 1 inclusively.\");\n    }\n    const isLight = isLightColor(color);\n    if ((isLight && !flip) || (!isLight && flip)) {\n        output = color.darken(weight) as ColorHelper;\n    } else {\n        output = color.lighten(weight) as ColorHelper;\n    }\n    return output;\n};\n\n/*\n * Color modification based on colors lightness. This function will make darks darker and lights lighter. Note, however, that if we pass\n * pure white or pure black, the modification goes in the opposite direction, to maintain contrast if \"flipIfMax\" is true.\n * This function is meant for smart defaults and works best with smaller weights. Not really meant for theming. There is a curve\n * to the weight compensate for the fact that subtle weights works well for light colors, but not for dark ones (roughly 10 times\n * less for pure black). This curve starts with colors .4 lightness or less and is accentuated more as we get closer to pure black.\n * @param color - The color we're checking and modifying\n * @param weight - The amount you want to mix the two colors (value from 0 to 1)\n * @param flipIfMax - Modify in the opposite direction if we're darker than black or whiter than white.\n */\nexport const emphasizeLightness = (color: ColorHelper, weight: number, flipIfMax: boolean = true) => {\n    const colorLightness = color.lightness();\n    let weightOffset = 1;\n    if (colorLightness < 0.4) {\n        weightOffset = Math.abs(colorLightness - 0.5) * 20;\n    }\n\n    const weightCurved = weight * weightOffset;\n    const colorDarker = color.darken(weightCurved) as ColorHelper;\n    const colorLighter = color.lighten(weightCurved) as ColorHelper;\n\n    if (isLightColor(color)) {\n        if (colorLightness + weightCurved > 1 && flipIfMax) {\n            return colorDarker;\n        } else {\n            return colorLighter;\n        }\n    } else {\n        if (colorLightness - weightCurved > 0 && flipIfMax) {\n            return colorDarker;\n        } else {\n            return colorLighter;\n        }\n    }\n};\n\n/*\n * Color modification based on saturation.\n * @param referenceColor - The reference colour to determine if we're in a dark or light context.\n * @param colorToModify - The color you wish to modify\n * @param percentage - The amount you want to mix the two colors\n * @param flip - By default we darken light colours and lighten darks, but if you want to get the opposite result, use this param\n */\nexport const modifyColorSaturationBasedOnLightness = (color: ColorHelper, weight: number, flip: boolean = false) => {\n    if (weight > 1 || weight < 0) {\n        throw new Error(\"mixAmount must be a value between 0 and 1 inclusively.\");\n    }\n\n    const isSaturated = color.lightness() >= 0.5;\n\n    if ((isSaturated && !flip) || (!isSaturated && flip)) {\n        // Desaturate\n        return color.desaturate(weight) as ColorHelper;\n    } else {\n        // Saturate\n        return color.saturate(weight) as ColorHelper;\n    }\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport {\n    allButtonStates,\n    colorOut,\n    ColorValues,\n    flexHelper,\n    IFont,\n    modifyColorBasedOnLightness,\n    spinnerLoader,\n    unit,\n    userSelect,\n} from \"@library/styles/styleHelpers\";\nimport { NestedCSSProperties } from \"typestyle/lib/types\";\nimport { DEBUG_STYLES, styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { important, percent, px } from \"csx\";\nimport merge from \"lodash/merge\";\nimport generateButtonClass from \"./styleHelperButtonGenerator\";\nimport { IButtonType } from \"@library/forms/styleHelperButtonInterface\";\n\nexport const buttonGlobalVariables = useThemeCache(() => {\n    // Fetch external global variables\n    const globalVars = globalVariables();\n    const formElVars = formElementsVariables();\n    const makeThemeVars = variableFactory(\"button\");\n\n    const colors = makeThemeVars(\"colors\", {\n        fg: globalVars.mainColors.fg,\n        bg: globalVars.mainColors.bg,\n    });\n\n    const font = makeThemeVars(\"font\", {\n        color: globalVars.mainColors.fg,\n        size: globalVars.fonts.size.medium,\n    });\n\n    const padding = makeThemeVars(\"padding\", {\n        top: 2,\n        bottom: 3,\n        side: 12,\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        minHeight: formElVars.sizing.height,\n        minWidth: 104,\n        compactHeight: 24,\n    });\n\n    const border = makeThemeVars(\"border\", globalVars.border);\n\n    return {\n        padding,\n        sizing,\n        border,\n        font,\n        colors,\n    };\n});\n\nexport const buttonVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"button\");\n\n    const standard: IButtonType = makeThemeVars(\"basic\", {\n        name: ButtonTypes.STANDARD,\n        spinnerColor: globalVars.mainColors.fg,\n        colors: {\n            bg: globalVars.mainColors.bg,\n        },\n        borders: {\n            color: globalVars.mixBgAndFg(0.24),\n            radius: globalVars.border.radius,\n        },\n        fonts: {\n            color: globalVars.mainColors.fg,\n        },\n        hover: {\n            colors: {\n                bg: globalVars.mainColors.primary,\n            },\n            fonts: {\n                color: globalVars.mainColors.bg,\n            },\n        },\n        active: {\n            colors: {\n                bg: globalVars.mainColors.primary,\n            },\n            fonts: {\n                color: globalVars.mainColors.bg,\n            },\n        },\n        focus: {\n            colors: {\n                bg: globalVars.mainColors.primary,\n            },\n            fonts: {\n                color: globalVars.mainColors.bg,\n            },\n        },\n        focusAccessible: {\n            colors: {\n                bg: globalVars.mainColors.primary,\n            },\n            fonts: {\n                color: globalVars.mainColors.bg,\n            },\n        },\n    });\n\n    const primary: IButtonType = makeThemeVars(\"primary\", {\n        name: ButtonTypes.PRIMARY,\n        colors: {\n            bg: globalVars.mainColors.primary,\n        },\n        fonts: {\n            color: globalVars.mainColors.bg,\n        },\n        spinnerColor: globalVars.mainColors.bg,\n        borders: {\n            color: globalVars.mainColors.primary,\n            radius: globalVars.border.radius,\n        },\n        hover: {\n            fonts: {\n                color: globalVars.mainColors.bg,\n            },\n            colors: {\n                bg: globalVars.mainColors.secondary,\n            },\n        },\n        active: {\n            fonts: {\n                color: globalVars.mainColors.bg,\n            },\n            colors: {\n                bg: globalVars.mainColors.secondary,\n            },\n        },\n        focus: {\n            fonts: {\n                color: globalVars.mainColors.bg,\n            },\n            colors: {\n                bg: globalVars.mainColors.secondary,\n            },\n        },\n        focusAccessible: {\n            fonts: {\n                color: globalVars.mainColors.bg,\n            },\n            colors: {\n                bg: globalVars.mainColors.secondary,\n            },\n        },\n    });\n\n    const transparent: IButtonType = makeThemeVars(\"transparent\", {\n        name: ButtonTypes.TRANSPARENT,\n        colors: {\n            fg: globalVars.mainColors.bg,\n            bg: globalVars.mainColors.fg.fade(0.1),\n        },\n        fonts: {\n            color: globalVars.mainColors.bg,\n        },\n        borders: {\n            color: globalVars.mainColors.bg,\n            radius: globalVars.border.radius,\n        },\n        hover: {\n            colors: {\n                bg: globalVars.mainColors.fg.fade(0.2),\n            },\n        },\n        active: {\n            colors: {\n                bg: globalVars.mainColors.fg.fade(0.2),\n            },\n        },\n        focus: {\n            colors: {\n                bg: globalVars.mainColors.fg.fade(0.2),\n            },\n        },\n        focusAccessible: {\n            colors: {\n                bg: globalVars.mainColors.fg.fade(0.2),\n            },\n        },\n    });\n\n    const translucid: IButtonType = makeThemeVars(\"translucid\", {\n        name: ButtonTypes.TRANSLUCID,\n        colors: {\n            bg: globalVars.mainColors.bg,\n        },\n        fonts: {\n            color: globalVars.mainColors.primary,\n        },\n        spinnerColor: globalVars.mainColors.bg,\n        borders: {\n            color: globalVars.mainColors.bg,\n            radius: globalVars.border.radius,\n        },\n        hover: {\n            colors: {\n                bg: globalVars.mainColors.bg.fade(0.8),\n            },\n        },\n        active: {\n            colors: {\n                bg: globalVars.mainColors.bg.fade(0.8),\n            },\n        },\n        focus: {\n            colors: {\n                bg: globalVars.mainColors.bg.fade(0.8),\n            },\n        },\n        focusAccessible: {\n            colors: {\n                bg: globalVars.mainColors.bg.fade(0.8),\n            },\n        },\n    });\n\n    return {\n        standard,\n        primary,\n        transparent,\n        translucid,\n    };\n});\n\nexport const buttonSizing = (height, minWidth, fontSize, paddingHorizontal, formElementVars) => {\n    const borderWidth = formElementVars.borders ? formElementVars.borders : buttonGlobalVariables().border.width;\n    return {\n        minHeight: unit(formElementVars.sizing.minHeight),\n        fontSize: unit(fontSize),\n        padding: `${unit(0)} ${px(paddingHorizontal)}`,\n        lineHeight: unit(formElementVars.sizing.height - borderWidth * 2),\n    };\n};\n\nexport const buttonResetMixin = (): NestedCSSProperties => ({\n    ...userSelect(),\n    \"-webkit-appearance\": \"none\",\n    appearance: \"none\",\n    border: 0,\n    background: \"none\",\n    cursor: \"pointer\",\n    color: \"inherit\",\n});\n\nexport const overwriteButtonClass = (\n    buttonTypeVars: IButtonType,\n    overwriteVars: IButtonType,\n    setZIndexOnState = false,\n) => {\n    const buttonVars = merge(buttonTypeVars, overwriteVars);\n    // append names for debugging purposes\n    buttonVars.name = `${buttonTypeVars.name}-${overwriteVars.name}`;\n    return generateButtonClass(buttonVars, setZIndexOnState);\n};\n\nexport enum ButtonTypes {\n    STANDARD = \"standard\",\n    PRIMARY = \"primary\",\n    TRANSPARENT = \"transparent\",\n    TRANSLUCID = \"translucid\",\n    CUSTOM = \"custom\",\n    RESET = \"reset\",\n    TEXT = \"text\",\n    TEXT_PRIMARY = \"textPrimary\",\n    ICON = \"icon\",\n    ICON_COMPACT = \"iconCompact\",\n    TITLEBAR_LINK = \"titleBarLink\",\n    DASHBOARD_STANDARD = \"dashboardStandard\",\n    DASHBOARD_PRIMARY = \"dashboardPrimary\",\n    DASHBOARD_SECONDARY = \"dashboardSecondary\",\n    DASHBOARD_LINK = \"dashboardLink\",\n}\n\nexport const buttonClasses = useThemeCache(() => {\n    const vars = buttonVariables();\n    return {\n        primary: generateButtonClass(vars.primary),\n        standard: generateButtonClass(vars.standard),\n        transparent: generateButtonClass(vars.transparent),\n        translucid: generateButtonClass(vars.translucid),\n        icon: buttonUtilityClasses().buttonIcon,\n        iconCompact: buttonUtilityClasses().buttonIconCompact,\n        text: buttonUtilityClasses().buttonAsText,\n        textPrimary: buttonUtilityClasses().buttonAsTextPrimary,\n        custom: \"\",\n    };\n});\n\nexport const buttonUtilityClasses = useThemeCache(() => {\n    const vars = buttonGlobalVariables();\n    const globalVars = globalVariables();\n    const formElementVars = formElementsVariables();\n    const style = styleFactory(\"buttonUtils\");\n\n    const pushLeft = style(\"pushLeft\", {\n        marginRight: important(\"auto\"),\n    });\n\n    const pushRight = style(\"pushRight\", {\n        marginLeft: important(\"auto\"),\n    });\n\n    const iconMixin = (dimension: number): NestedCSSProperties => ({\n        ...buttonResetMixin(),\n        alignItems: \"center\",\n        display: \"flex\",\n        height: unit(dimension),\n        minWidth: unit(dimension),\n        width: unit(dimension),\n        justifyContent: \"center\",\n        border: \"none\",\n        padding: 0,\n        ...allButtonStates({\n            hover: {\n                color: colorOut(globalVars.mainColors.primary),\n            },\n            focusNotKeyboard: {\n                outline: 0,\n                color: colorOut(globalVars.mainColors.secondary),\n            },\n            focus: {\n                color: colorOut(globalVars.mainColors.secondary),\n            },\n            accessibleFocus: {\n                color: colorOut(globalVars.mainColors.secondary),\n            },\n            active: {\n                color: colorOut(globalVars.mainColors.secondary),\n            },\n        }),\n    });\n\n    const buttonIcon = style(\"icon\", iconMixin(formElementVars.sizing.height));\n\n    const buttonIconCompact = style(\"iconCompact\", iconMixin(vars.sizing.compactHeight));\n\n    const asTextStyles: NestedCSSProperties = {\n        ...buttonResetMixin(),\n        minWidth: important(0),\n        padding: 0,\n        overflow: \"hidden\",\n        textAlign: \"left\",\n        lineHeight: globalVars.lineHeights.base,\n        fontWeight: globalVars.fonts.weights.semiBold,\n    };\n\n    const buttonAsText = style(\"asText\", asTextStyles, {\n        color: \"inherit\",\n        $nest: {\n            \"&:not(.focus-visible)\": {\n                outline: 0,\n            },\n            \"&:focus, &:active, &:hover\": {\n                color: colorOut(globalVars.mainColors.secondary),\n            },\n        },\n    });\n\n    const buttonAsTextPrimary = style(\"asTextPrimary\", asTextStyles, {\n        color: colorOut(globalVars.mainColors.primary),\n        $nest: {\n            \"&:not(.focus-visible)\": {\n                outline: 0,\n            },\n            \"&:hover, &:focus, &:active\": {\n                color: colorOut(globalVars.mainColors.secondary),\n            },\n        },\n    });\n\n    const buttonIconRightMargin = style(\"buttonIconRightMargin\", {\n        marginRight: unit(6),\n    });\n\n    const buttonIconLeftMargin = style(\"buttonIconLeftMargin\", {\n        marginLeft: unit(6),\n    });\n\n    const reset = style(\"reset\", buttonResetMixin());\n\n    return {\n        pushLeft,\n        buttonAsText,\n        buttonAsTextPrimary,\n        pushRight,\n        buttonIconCompact,\n        buttonIcon,\n        buttonIconRightMargin,\n        buttonIconLeftMargin,\n        reset,\n    };\n});\n\nexport const buttonLoaderClasses = (buttonType?: ButtonTypes) => {\n    const globalVars = globalVariables();\n    const flexUtils = flexHelper();\n    const style = styleFactory(\"buttonLoader\");\n    const buttonVars = buttonVariables();\n    let spinnerColor;\n\n    switch (buttonType) {\n        case ButtonTypes.PRIMARY:\n            spinnerColor = buttonVars.primary.spinnerColor;\n            break;\n        default:\n            spinnerColor = globalVars.mainColors.primary;\n            break;\n    }\n\n    const root = (alignment: \"left\" | \"center\" = \"center\") =>\n        style({\n            ...(alignment === \"center\" ? flexUtils.middle() : flexUtils.middleLeft),\n            padding: unit(4),\n            height: percent(100),\n            width: percent(100),\n            $nest: {\n                \"&:after\": spinnerLoader({\n                    color: spinnerColor,\n                    dimensions: 20,\n                }),\n            },\n        });\n    return { root };\n};\n","/*\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { em } from \"csx\";\nimport { margins, unit, colorOut } from \"@library/styles/styleHelpers\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\n\nexport const iconVariables = useThemeCache(() => {\n    const themeVars = variableFactory(\"defaultIconSizes\");\n\n    const standard = themeVars(\"defaultIcon\", {\n        width: 24,\n        height: 24,\n    });\n\n    const fileType = themeVars(\"defaultIcon\", {\n        width: 16,\n        height: 16,\n    });\n\n    const newFolder = themeVars(\"newFolderIcon\", {\n        width: 17,\n        height: 14.67,\n    });\n\n    const attachmentError = themeVars(\"attachmentError\", {\n        width: 20,\n        height: 18,\n    });\n\n    const vanillaLogo = themeVars(\"vanillaLogo\", {\n        width: 296.866,\n        height: 119.993,\n    });\n\n    const compact = themeVars(\"compact\", {\n        width: 12,\n        height: 12,\n    });\n\n    const warning = themeVars(\"warning\", {\n        width: 16,\n        height: 16,\n        color: \"#f5af15\",\n    });\n\n    const settings = themeVars(\"settings\", {\n        width: 20,\n        height: 18,\n    });\n\n    const search = themeVars(\"settings\", {\n        width: 18,\n        height: 20,\n    });\n\n    const notifications = themeVars(\"settings\", {\n        width: 18,\n        height: 20,\n    });\n\n    const messages = themeVars(\"messages\", {\n        width: 20.051,\n        height: 14.016,\n    });\n\n    const user = themeVars(\"user\", {\n        width: 20,\n        height: 20,\n    });\n\n    const userWarning = themeVars(\"userWarning\", {\n        width: 40,\n        height: 40,\n    });\n\n    const close = themeVars(\"close\", {\n        width: 20,\n        height: 20,\n    });\n\n    const closeCompact = themeVars(\"closeCompact\", {\n        width: 16,\n        height: 16,\n    });\n\n    const closeTiny = themeVars(\"closeTiny\", {\n        width: 10,\n        height: 10,\n    });\n\n    const chevronLeftCompact = themeVars(\"chevronLeftCompact\", {\n        width: 12,\n        height: 21,\n    });\n\n    const selectedCategory = themeVars(\"selectedCategory\", {\n        width: 16.8,\n        height: 13,\n    });\n\n    const signIn = themeVars(\"signIn\", {\n        width: 24,\n        height: 18,\n    });\n\n    const chevronUp = themeVars(\"selectedCategory\", {\n        width: 51,\n        height: 17,\n    });\n\n    const plusCircle = themeVars(\"plusCircle\", {\n        width: 14,\n        height: 14,\n    });\n\n    const deleteIcon = themeVars(\"deleteIcon\", {\n        width: 24,\n        height: 24,\n    });\n\n    const editIcon = themeVars(\"editIcon\", {\n        width: 24,\n        height: 24,\n    });\n\n    const categoryIcon = themeVars(\"categoryIcon\", {\n        width: 18,\n        height: 18,\n        opacity: 0.8,\n    });\n\n    return {\n        standard,\n        newFolder,\n        fileType,\n        attachmentError,\n        vanillaLogo,\n        compact,\n        settings,\n        warning,\n        search,\n        notifications,\n        messages,\n        user,\n        userWarning,\n        close,\n        closeCompact,\n        closeTiny,\n        chevronLeftCompact,\n        selectedCategory,\n        signIn,\n        chevronUp,\n        plusCircle,\n        categoryIcon,\n        deleteIcon,\n        editIcon,\n    };\n});\n\nexport const iconClasses = useThemeCache(() => {\n    const vars = iconVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"iconSizes\");\n\n    const standard = style(\"defaultIcon\", {\n        width: unit(vars.standard.width),\n        height: unit(vars.standard.height),\n    });\n\n    const fileType = style(\"fileType\", {\n        width: unit(vars.fileType.width),\n        height: unit(vars.fileType.height),\n    });\n\n    const newFolder = style(\"newFolder\", {\n        width: unit(vars.newFolder.width),\n        height: unit(vars.newFolder.height),\n        paddingRight: unit(1),\n    });\n\n    const attachmentError = style(\"attachmentError\", {\n        width: unit(vars.attachmentError.width),\n        height: unit(vars.attachmentError.height),\n    });\n\n    const vanillaLogo = style(\"vanillaLogo\", {\n        width: unit(vars.vanillaLogo.width),\n        height: unit(vars.vanillaLogo.height),\n    });\n\n    const compact = style(\"compact\", {\n        width: unit(vars.compact.width),\n        height: unit(vars.compact.height),\n    });\n\n    const settings = style(\"settings\", {\n        width: unit(vars.settings.width),\n        height: unit(vars.settings.height),\n    });\n\n    const warning = style(\"warning\", {\n        width: unit(vars.warning.width),\n        height: unit(vars.warning.height),\n        color: colorOut(vars.warning.color),\n    });\n\n    const search = style(\"search\", {\n        width: unit(vars.search.width),\n        height: unit(vars.search.height),\n    });\n\n    const notifications = style(\"notifications\", {\n        width: unit(vars.notifications.width),\n        height: unit(vars.notifications.height),\n    });\n\n    const messages = style(\"messages\", {\n        width: unit(vars.messages.width),\n        height: unit(vars.messages.height),\n    });\n\n    const user = style(\"user\", {\n        width: unit(vars.user.width),\n        height: unit(vars.user.height),\n    });\n\n    const userWarning = style(\"userWarning\", {\n        width: unit(vars.userWarning.width),\n        height: unit(vars.userWarning.height),\n    });\n\n    const close = style(\"close\", {\n        width: unit(vars.close.width),\n        height: unit(vars.close.height),\n    });\n\n    // Same as close, but without extra padding\n    const closeCompact = style(\"closeCompact\", {\n        width: unit(vars.closeCompact.width),\n        height: unit(vars.closeCompact.height),\n    });\n\n    // For really small close buttons, like on tokens\n    const closeTiny = style(\"closeTiny\", {\n        display: \"block\",\n        width: unit(vars.closeTiny.width),\n        height: unit(vars.closeTiny.height),\n        margin: \"auto\",\n    });\n\n    const chevronLeftCompact = style(\"chevronLeftCompact\", {\n        width: unit(vars.chevronLeftCompact.width),\n        height: unit(vars.chevronLeftCompact.height),\n    });\n\n    const selectedCategory = style(\"selectedCategory\", {\n        width: unit(vars.selectedCategory.width),\n        height: unit(vars.selectedCategory.height),\n    });\n\n    const signIn = style(\"signIn\", {\n        width: unit(vars.signIn.width),\n        height: unit(vars.signIn.height),\n    });\n\n    const chevronUp = style(\"chevronUp\", {\n        width: unit(vars.chevronUp.width),\n        height: unit(vars.chevronUp.height),\n    });\n\n    const plusCircle = style(\"plusCircle\", {\n        width: unit(vars.plusCircle.width),\n        height: unit(vars.plusCircle.height),\n    });\n\n    const categoryIcon = style(\"categoryIcon\", {\n        width: unit(vars.categoryIcon.width),\n        height: unit(vars.categoryIcon.height),\n        opacity: vars.categoryIcon.opacity,\n        marginRight: unit(3),\n    });\n\n    const deleteIcon = style(\"deleteIcon\", {\n        width: unit(vars.deleteIcon.width),\n        height: unit(vars.deleteIcon.height),\n    });\n\n    const editIcon = style(\"editIcon\", {\n        width: unit(vars.editIcon.width),\n        height: unit(vars.editIcon.height),\n    });\n\n    const discussionIcon = style(\"discussionIcon\", {\n        width: unit(vars.standard.width),\n        height: unit(vars.standard.height),\n    });\n\n    const alertIcon = style(\"alertIcon\", {\n        width: unit(vars.standard.width),\n        height: unit(vars.standard.height),\n    });\n\n    const alertIconCompact = style(\"alertIconCompact\", {\n        width: unit(vars.standard.width),\n        height: unit(vars.standard.height),\n        margin: unit(-globalVars.buttonIcon.offset),\n    });\n\n    return {\n        standard,\n        newFolder,\n        warning,\n        fileType,\n        attachmentError,\n        vanillaLogo,\n        compact,\n        settings,\n        search,\n        notifications,\n        messages,\n        user,\n        userWarning,\n        close,\n        closeCompact,\n        closeTiny,\n        chevronLeftCompact,\n        selectedCategory,\n        signIn,\n        chevronUp,\n        plusCircle,\n        categoryIcon,\n        deleteIcon,\n        editIcon,\n        discussionIcon,\n        alertIcon,\n        alertIconCompact,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport enum AttachmentType {\n    FILE = \"A file\",\n    PDF = \"Adobe Portable Document Format (PDF)\",\n    EXCEL = \"Microsoft Excel Spreadsheet\",\n    WORD = \"Microsoft Word Document\",\n    PPT = \"Microsoft PowerPoint Presentation\",\n    ARCHIVE = \"An archived file or files\",\n    IMAGE = \"An image file\",\n}\n","/**\n * Utilities and types for handling unique and/or required HTML ids in react components.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useMemo } from \"react\";\n\n// Optional ID\nexport interface IOptionalComponentID {\n    id?: string;\n}\n\n// Requires ID\nexport interface IRequiredComponentID {\n    id: string;\n}\n\nconst DEFAULT_PREFIX = \"\";\n\n// Cache of ID's by their prefix.\nlet idCache: { [key: string]: number } = {};\n\n// Generates unique ID from suffix\nexport function uniqueIDFromPrefix(prefix: string = DEFAULT_PREFIX) {\n    let count = 0;\n\n    if (prefix in idCache) {\n        count = idCache[prefix] + 1;\n    }\n    idCache[prefix] = count;\n\n    return prefix + \"-\" + idCache[prefix];\n}\n\n/**\n * React hook for useUniqueIDFromPrefix\n */\nexport function useUniqueID(prefix?: string) {\n    return useMemo(() => uniqueIDFromPrefix(prefix), [prefix]);\n}\n\n/**\n * Clear the cache of unique IDs. Useful for testing particularly.\n */\nexport function clearUniqueIDCache() {\n    idCache = {};\n}\n\n// Get required ID, will either return ID given through props or generate unique ID from suffix\nexport function getRequiredID(props: IOptionalComponentID, suffix: string): string {\n    if (props.id) {\n        return props.id;\n    } else {\n        return uniqueIDFromPrefix(suffix);\n    }\n}\n\n// Get optional ID, will either return given ID through props if given, if true, will get generated ID from prefix, if false, ignored\nexport function getOptionalID(props: IOptionalComponentID, suffix?: string): string | null {\n    if (props.id) {\n        // we want an ID\n        if (typeof props.id === \"string\") {\n            // Handled by parent component\n            return props.id;\n        } else if (typeof props.id === \"boolean\" && suffix) {\n            return uniqueIDFromPrefix(suffix);\n        }\n        throw new Error(\"To generate and ID, you must provide a suffix.\");\n    } else {\n        return null;\n    }\n}\n","/**\n * Entrypoint for the APIv2 calls. Prepulates an axios instance with some config settings.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { formatUrl, t, getMeta, siteUrl } from \"@library/utility/appUtils\";\nimport { indexArrayByKey } from \"@vanilla/utils\";\nimport axios, { AxiosResponse, AxiosRequestConfig } from \"axios\";\nimport qs from \"qs\";\nimport { sprintf } from \"sprintf-js\";\nimport { humanFileSize } from \"@library/utility/fileUtils\";\nimport { IApiError, IFieldError } from \"@library/@types/api/core\";\nimport { IUserFragment } from \"@library/@types/api/users\";\n\nfunction fieldErrorTransformer(responseData) {\n    if (responseData && responseData.status >= 400 && responseData.errors && responseData.errors.length > 0) {\n        responseData.errors = indexArrayByKey(responseData.errors, \"field\");\n    }\n\n    return responseData;\n}\n\nconst apiv2 = axios.create({\n    baseURL: siteUrl(\"/api/v2/\"),\n    headers: {\n        common: {\n            \"X-Requested-With\": \"vanilla\",\n        },\n    },\n    transformResponse: [...(axios.defaults.transformResponse as any), fieldErrorTransformer],\n    paramsSerializer: params => qs.stringify(params),\n});\n\nexport default apiv2;\n\nexport type ProgressHandler = (progressEvent: any) => void;\n\nexport function createTrackableRequest(\n    requestFunction: (progressHandler: ProgressHandler) => () => Promise<AxiosResponse>,\n) {\n    return (onUploadProgress: ProgressHandler) => {\n        return requestFunction(onUploadProgress);\n    };\n}\n/**\n * Upload an image using Vanilla's API v2.\n *\n * @param file - The file to upload.\n */\nexport async function uploadFile(file: File, requestConfig: AxiosRequestConfig = {}) {\n    let allowedExtensions = getMeta(\"upload.allowedExtensions\", []) as string[];\n    allowedExtensions = allowedExtensions.map((ext: string) => ext.toLowerCase());\n    const maxSize = getMeta(\"upload.maxSize\", 0);\n    const filePieces = file.name.split(\".\");\n    const extension = filePieces[filePieces.length - 1] || \"\";\n\n    if (file.size > maxSize) {\n        const humanSize = humanFileSize(maxSize);\n        const stringTotal: string = humanSize.amount + humanSize.unitAbbr;\n        const message = sprintf(t(\"The uploaded file was too big (max %s).\"), stringTotal);\n        throw new Error(message);\n    } else if (!allowedExtensions.includes(extension.toLowerCase())) {\n        const attachmentsString = allowedExtensions.join(\", \");\n        const message = sprintf(\n            t(\n                \"The uploaded file did not have an allowed extension. \\nOnly the following extensions are allowed. \\n%s.\",\n            ),\n            attachmentsString,\n        );\n        throw new Error(message);\n    }\n\n    const data = new FormData();\n    data.append(\"file\", file, file.name);\n    // Show Vanilla message instead of a default message\n    return apiv2.post(\"/media\", data, requestConfig)\n        .then(response => response.data)\n        .catch(error => {\n            if (error.response.data &&\n                error.response.data.message) {\n                throw new Error(error.response.data.message);\n            } else {\n                throw new Error(error.response.message)\n            }\n        });\n}\n\n/**\n * Extract a field specific error from an ILoadable if applicable.\n *\n * @param apiError - The error to extract from.\n * @param field - The field to extract.\n *\n * @returns an array of IFieldErrors if found or undefined.\n */\nexport function getFieldErrors(apiError: IApiError | undefined, field: string): IFieldError[] | undefined {\n    if (!apiError) {\n        return;\n    }\n\n    const serverError = apiError.response.data;\n    if (serverError && serverError.errors && serverError.errors[field]) {\n        return serverError.errors[field];\n    }\n}\n\n/**\n * Extract a global error message out of an ILoadable if applicable.\n *\n * @param apiError - The error to extract from.\n * @param validFields - Field to check for overriding fields errors from. A global error only shows if there are no valid field errors.\n *\n * @returns A global error message or an undefined.\n */\nexport function getGlobalErrorMessage(apiError: IApiError | undefined, validFields: string[] = []): string | undefined {\n    if (!apiError) {\n        return;\n    }\n    for (const field of validFields) {\n        if (getFieldErrors(apiError, field)) {\n            return;\n        }\n    }\n\n    const serverError = apiError.response && apiError.response.data;\n    if (serverError && serverError.message) {\n        return serverError.message;\n    }\n\n    return t(\"Something went wrong while contacting the server.\");\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables, IIconSizes } from \"@library/styles/globalStyleVars\";\nimport { absolutePosition, colorOut, unit } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { color } from \"csx\";\n\nexport const formElementsVariables = useThemeCache(() => {\n    const vars = globalVariables();\n    const varsLayouts = layoutVariables();\n    const mixBgAndFg = vars.mixBgAndFg;\n    const makeThemeVars = variableFactory(\"formElements\");\n\n    const sizing = makeThemeVars(\"sizing\", {\n        height: 36,\n        halfHeight: 18,\n        maxWidth: 528,\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        margin: 12,\n        horizontalPadding: 12,\n        verticalPadding: 6,\n    });\n\n    const border = makeThemeVars(\"border\", {\n        width: 1,\n        fullWidth: 2,\n        color: vars.border.color,\n        style: \"solid\",\n        radius: vars.border.radius,\n    });\n\n    const giantInput = makeThemeVars(\"giantInput\", {\n        height: 82,\n        fontSize: 24,\n    });\n\n    const largeInput = makeThemeVars(\"largeInput\", {\n        height: 48,\n        fontSize: 16,\n    });\n\n    const colors = makeThemeVars(\"colors\", {\n        fg: vars.mainColors.fg,\n        bg: vars.mainColors.bg,\n    });\n\n    const errorSpacing = makeThemeVars(\"errorSpacing\", {\n        horizontalPadding: varsLayouts.gutter.size,\n        verticalPadding: varsLayouts.gutter.size,\n        verticalMargin: varsLayouts.gutter.halfSize,\n    });\n\n    const placeholder = makeThemeVars(\"placeholder\", {\n        color: mixBgAndFg(0.83),\n    });\n\n    const disabled = makeThemeVars(\"disabled\", {\n        opacity: 0.5,\n    });\n\n    const buttonMarginAlignment = (size: IIconSizes = IIconSizes.DEFAULT) => {\n        const globalVars = globalVariables();\n        let iconSize = globalVars.icon.sizes.default;\n\n        switch (size) {\n            case IIconSizes.SMALL:\n                iconSize = globalVars.icon.sizes.small;\n                break;\n            case IIconSizes.LARGE:\n                iconSize = globalVars.icon.sizes.small;\n                break;\n        }\n\n        return (sizing.height - iconSize) / 2;\n    };\n\n    return {\n        sizing,\n        errorSpacing,\n        spacing,\n        border,\n        giantInput,\n        largeInput,\n        colors,\n        placeholder,\n        disabled,\n        buttonMarginAlignment,\n    };\n});\n\nexport const accessibleErrorClasses = useThemeCache(() => {\n    const style = styleFactory(\"accessibleError\");\n    const globalVars = globalVariables();\n    const root = style({\n        display: \"flex\",\n        alignItems: \"center\",\n    });\n    const paragraph = style(\"paragraph\", {\n        color: colorOut(globalVars.messageColors.error.fg),\n        fontSize: unit(globalVars.fonts.size.small),\n    });\n\n    return {\n        root,\n        paragraph,\n    };\n});\n\nexport const formErrorClasses = useThemeCache(() => {\n    const style = styleFactory(\"formError\");\n    const varsGlobal = globalVariables();\n    const vars = formElementsVariables();\n\n    const root = style({\n        backgroundColor: colorOut(varsGlobal.messageColors.error.fg),\n        color: colorOut(varsGlobal.messageColors.error.fg),\n        marginBottom: unit(16),\n        paddingLeft: vars.errorSpacing.horizontalPadding,\n        paddingRight: vars.errorSpacing.horizontalPadding,\n        paddingTop: vars.errorSpacing.verticalPadding,\n        paddingBottom: vars.errorSpacing.verticalPadding,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n    });\n    const actions = style(\"actions\", {\n        display: \"flex\",\n        alignItems: \"center\",\n    });\n\n    const actionButton = style(\"button\", {\n        marginLeft: unit(12),\n    });\n    const activeButton = style(\"activeButton\", {\n        fontWeight: \"bold\",\n    });\n\n    return {\n        actionButton,\n        root,\n        activeButton,\n        actions,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { percent } from \"csx\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { allLinkStates, margins, paddings, unit } from \"@library/styles/styleHelpers\";\n\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { TextDecorationProperty } from \"csstype\";\n\nexport const panelListVariables = useThemeCache(() => {\n    const globalVals = globalVariables();\n    const makeThemeVars = variableFactory(\"panelList\");\n\n    const title = makeThemeVars(\"title\", {\n        fontSize: globalVals.fonts.size.large,\n    });\n    const offset = makeThemeVars(\"offset\", {\n        default: 12,\n    });\n    const link = makeThemeVars(\"link\", {\n        fontSize: globalVals.fonts.size.medium,\n        hover: {\n            color: globalVals.links.colors.default,\n        },\n        focus: {\n            color: globalVals.links.colors.focus,\n        },\n    });\n    return {\n        title,\n        offset,\n        link,\n    };\n});\n\nexport const panelListClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = panelListVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n    const style = styleFactory(\"panelList\");\n\n    const root = style({\n        position: \"relative\",\n        display: \"block\",\n    });\n\n    const title = style(\"title\", {\n        fontSize: unit(vars.title.fontSize),\n        marginBottom: unit(vars.offset.default),\n    });\n\n    const item = style(\"item\", {\n        $nest: {\n            \"& + &\": {\n                marginTop: unit(vars.offset.default),\n            },\n        },\n    });\n\n    const link = style(\"link\", {\n        display: \"block\",\n        position: \"relative\",\n        width: percent(100),\n        fontSize: unit(vars.link.fontSize),\n        color: \"inherit\",\n        ...allLinkStates({\n            allStates: {\n                textDecoration: \"none\",\n            },\n            hover: {\n                color: globalVars.links.colors.hover,\n            },\n            focus: {\n                color: globalVars.links.colors.focus,\n            },\n        }),\n    });\n\n    const items = style(\"items\", {});\n\n    return {\n        root,\n        title,\n        item,\n        link,\n        items,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { color, percent } from \"csx\";\nimport { styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { paddings } from \"@library/styles/styleHelpers\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\n\nexport const panelWidgetClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = layoutVariables();\n    const mediaQueries = vars.mediaQueries();\n    const style = styleFactory(\"panelWidget\");\n\n    const root = style(\n        {\n            display: \"flex\",\n            flexDirection: \"column\",\n            position: \"relative\",\n            width: percent(100),\n            ...paddings({\n                all: globalVars.gutter.half,\n            }),\n            $nest: {\n                \"&.hasNoVerticalPadding\": {\n                    ...paddings({ vertical: 0 }),\n                },\n                \"&.hasNoHorizontalPadding\": {\n                    ...paddings({ horizontal: 0 }),\n                },\n                \"&.isSelfPadded\": {\n                    ...paddings({ all: 0 }),\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            ...paddings({\n                all: 8,\n            }),\n        }),\n    );\n\n    return { root };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { color, percent } from \"csx\";\nimport { styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { panelWidgetClasses } from \"@library/layout/panelWidgetStyles\";\nimport { paddings } from \"@library/styles/styleHelpers\";\nimport { NestedCSSSelectors } from \"typestyle/lib/types\";\n\nexport const panelAreaClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = layoutVariables();\n    const mediaQueries = vars.mediaQueries();\n    const style = styleFactory(\"panelArea\");\n    const classesPanelWidget = panelWidgetClasses();\n\n    const root = style(\n        {\n            width: percent(100),\n            ...paddings({\n                all: globalVars.gutter.half,\n            }),\n            $nest: {\n                \"& .heading\": {\n                    $nest: lineHeightAdjustment(),\n                },\n                [`&.inheritHeight > .${classesPanelWidget.root}`]: {\n                    flexGrow: 1,\n                },\n                \"&.hasNoVerticalPadding\": {\n                    ...paddings({ vertical: 0 }),\n                },\n                \"&.hasNoHorizontalPadding\": {\n                    ...paddings({ horizontal: 0 }),\n                },\n                \"&.isSelfPadded\": {\n                    ...paddings({ all: 0 }),\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            ...paddings({\n                horizontal: 0,\n            }),\n        }),\n    );\n\n    return { root };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { calc, color, percent, px, viewHeight } from \"csx\";\nimport { cssRule, media } from \"typestyle\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { margins, paddings, sticky, unit } from \"@library/styles/styleHelpers\";\nimport { important } from \"csx/lib/strings\";\nimport { panelListClasses } from \"@library/layout/panelListStyles\";\nimport { titleBarVariables } from \"@library/headers/titleBarStyles\";\nimport { panelAreaClasses } from \"@library/layout/panelAreaStyles\";\n\nexport const layoutVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"globalVariables\");\n\n    // Important variables that will be used to calculate other variables\n    const foundationalWidths = makeThemeVars(\"foundationalWidths\", {\n        fullGutter: 48,\n        panelWidth: 216,\n        middleColumnWidth: 672,\n        minimalMiddleColumnWidth: 500, // Will break if middle column width is smaller than this value.\n        narrowContentWidth: 900, // For home page widgets, narrower than full width\n        breakPoints: {\n            // Other break points are calculated\n            twoColumns: 1200,\n            xs: 500,\n        },\n    });\n\n    const gutter = makeThemeVars(\"gutter\", {\n        full: foundationalWidths.fullGutter, // 48\n        size: foundationalWidths.fullGutter / 2, // 24\n        halfSize: foundationalWidths.fullGutter / 4, // 12\n        quarterSize: foundationalWidths.fullGutter / 8, // 6\n    });\n\n    const panel = makeThemeVars(\"panel\", {\n        width: foundationalWidths.panelWidth,\n        paddedWidth: foundationalWidths.panelWidth + gutter.full,\n    });\n\n    const middleColumn = makeThemeVars(\"middleColumn\", {\n        width: foundationalWidths.middleColumnWidth,\n        paddedWidth: foundationalWidths.middleColumnWidth + gutter.full,\n    });\n\n    const globalContentWidth = middleColumn.paddedWidth + panel.paddedWidth * 2 + gutter.size;\n\n    const contentSizes = makeThemeVars(\"content\", {\n        full: globalContentWidth,\n        narrow:\n            foundationalWidths.narrowContentWidth < globalContentWidth\n                ? foundationalWidths.narrowContentWidth\n                : globalContentWidth,\n    });\n\n    const panelLayoutBreakPoints = makeThemeVars(\"panelLayoutBreakPoints\", {\n        noBleed: globalContentWidth,\n        twoColumn: foundationalWidths.breakPoints.twoColumns,\n        oneColumn: foundationalWidths.minimalMiddleColumnWidth + panel.paddedWidth,\n        xs: foundationalWidths.breakPoints.xs,\n    });\n\n    const panelLayoutSpacing = makeThemeVars(\"panelLayoutSpacing\", {\n        margin: {\n            top: 0,\n            bottom: 50,\n        },\n        padding: {\n            top: gutter.halfSize * 1.5,\n        },\n        extraPadding: {\n            top: 32,\n            noBreadcrumbs: {},\n            mobile: {\n                noBreadcrumbs: {\n                    top: 16,\n                },\n            },\n        },\n        largePadding: {\n            top: 64,\n        },\n    });\n\n    const mediaQueries = () => {\n        const noBleed = styles => {\n            return media(\n                {\n                    maxWidth: px(panelLayoutBreakPoints.noBleed),\n                    minWidth: px(panelLayoutBreakPoints.twoColumn + 1),\n                },\n                styles,\n            );\n        };\n\n        const noBleedDown = styles => {\n            return media(\n                {\n                    maxWidth: px(panelLayoutBreakPoints.noBleed),\n                },\n                styles,\n            );\n        };\n\n        const twoColumnsDown = styles => {\n            return media(\n                {\n                    maxWidth: px(panelLayoutBreakPoints.twoColumn),\n                },\n                styles,\n            );\n        };\n\n        const twoColumns = styles => {\n            return media(\n                {\n                    maxWidth: px(panelLayoutBreakPoints.twoColumn),\n                    minWidth: px(panelLayoutBreakPoints.oneColumn + 1),\n                },\n                styles,\n            );\n        };\n\n        const oneColumn = styles => {\n            return media(\n                {\n                    maxWidth: px(panelLayoutBreakPoints.oneColumn),\n                    minWidth: px(panelLayoutBreakPoints.xs + 1),\n                },\n                styles,\n            );\n        };\n\n        const oneColumnDown = styles => {\n            return media(\n                {\n                    maxWidth: px(panelLayoutBreakPoints.oneColumn),\n                },\n                styles,\n            );\n        };\n\n        const xs = styles => {\n            return media(\n                {\n                    maxWidth: px(panelLayoutBreakPoints.xs),\n                },\n                styles,\n            );\n        };\n\n        return {\n            noBleed,\n            noBleedDown,\n            twoColumns,\n            twoColumnsDown,\n            oneColumn,\n            oneColumnDown,\n            xs,\n        };\n    };\n\n    return {\n        foundationalWidths,\n        gutter,\n        panel,\n        middleColumn,\n        contentSizes,\n        mediaQueries,\n        panelLayoutSpacing,\n        panelLayoutBreakPoints,\n    };\n});\n\nexport const panelLayoutClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = layoutVariables();\n    const mediaQueries = vars.mediaQueries();\n    const style = styleFactory(\"panelLayout\");\n    const classesPanelArea = panelAreaClasses();\n    const classesPanelList = panelListClasses();\n    const titleBarVars = titleBarVariables();\n\n    const main = style(\"main\", {\n        minHeight: viewHeight(20),\n        width: percent(100),\n    });\n\n    const root = style(\n        {\n            ...margins(vars.panelLayoutSpacing.margin),\n            width: percent(100),\n            $nest: {\n                [`&.noBreadcrumbs > .${main}`]: {\n                    paddingTop: unit(globalVars.gutter.size),\n                    ...mediaQueries.oneColumnDown({\n                        paddingTop: 0,\n                    }),\n                },\n                \"&.isOneCol\": {\n                    width: unit(vars.middleColumn.paddedWidth),\n                    maxWidth: percent(100),\n                    margin: \"auto\",\n                    ...mediaQueries.oneColumnDown({\n                        width: percent(100),\n                    }),\n                },\n                \"&.hasTopPadding\": {\n                    paddingTop: unit(vars.panelLayoutSpacing.extraPadding.top),\n                },\n                \"&.hasTopPadding.noBreadcrumbs\": {\n                    paddingTop: unit(vars.panelLayoutSpacing.extraPadding.mobile.noBreadcrumbs.top),\n                },\n                \"&.hasLargePadding\": {\n                    ...paddings(vars.panelLayoutSpacing.largePadding),\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            $nest: {\n                \"&.hasTopPadding.noBreadcrumbs\": {\n                    paddingTop: unit(vars.panelLayoutSpacing.extraPadding.mobile.noBreadcrumbs.top),\n                },\n            },\n        }),\n    );\n\n    const content = style(\"content\", {\n        display: \"flex\",\n        flexGrow: 1,\n        width: percent(100),\n        justifyContent: \"space-between\",\n    });\n\n    const panel = style(\"panel\", {\n        width: percent(100),\n        $nest: {\n            [`& > .${classesPanelArea.root}:first-child .${classesPanelList.root}`]: {\n                marginTop: unit(\n                    (globalVars.fonts.size.title * globalVars.lineHeights.condensed) / 2 -\n                        globalVariables().fonts.size.medium / 2,\n                ),\n            },\n        },\n    });\n\n    const top = style(\"top\", {\n        width: percent(100),\n        marginBottom: unit(globalVars.gutter.half),\n    });\n\n    const container = style(\"container\", {\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        alignItems: \"flex-start\",\n        justifyContent: \"space-between\",\n    });\n\n    const fullWidth = style(\"fullWidth\", {\n        position: \"relative\",\n        padding: 0,\n    });\n\n    const leftColumn = style(\"leftColumn\", {\n        position: \"relative\",\n        width: unit(vars.panel.paddedWidth),\n        flexBasis: unit(vars.panel.paddedWidth),\n        minWidth: unit(vars.panel.paddedWidth),\n    });\n\n    const rightColumn = style(\"rightColumn\", {\n        position: \"relative\",\n        width: unit(vars.panel.paddedWidth),\n        flexBasis: unit(vars.panel.paddedWidth),\n        minWidth: unit(vars.panel.paddedWidth),\n        overflow: \"initial\",\n    });\n\n    const middleColumn = style(\"middleColumn\", {\n        justifyContent: \"space-between\",\n        flexGrow: 1,\n        width: percent(100),\n        maxWidth: percent(100),\n        ...mediaQueries.oneColumnDown(paddings({ left: important(0), right: important(0) })),\n    });\n\n    const middleColumnMaxWidth = style(\"middleColumnMaxWidth\", {\n        $nest: {\n            \"&.hasAdjacentPanel\": {\n                flexBasis: calc(`100% - ${unit(vars.panel.paddedWidth)}`),\n                maxWidth: calc(`100% - ${unit(vars.panel.paddedWidth)}`),\n                ...mediaQueries.oneColumnDown({\n                    flexBasis: percent(100),\n                    maxWidth: percent(100),\n                }),\n            },\n            \"&.hasTwoAdjacentPanels\": {\n                flexBasis: calc(`100% - ${unit(vars.panel.paddedWidth * 2)}`),\n                maxWidth: calc(`100% - ${unit(vars.panel.paddedWidth * 2)}`),\n                ...mediaQueries.oneColumnDown({\n                    flexBasis: percent(100),\n                    maxWidth: percent(100),\n                }),\n            },\n        },\n    });\n\n    const breadcrumbs = style(\"breadcrumbs\", {});\n\n    const isSticky = style(\n        \"isSticky\",\n        {\n            ...sticky(),\n            top: titleBarVars.sizing.height * 2,\n            height: percent(100),\n        },\n        mediaQueries.oneColumnDown({\n            position: \"relative\",\n            top: \"auto\",\n            left: \"auto\",\n            bottom: \"auto\",\n        }),\n    );\n\n    // To remove when we have overlay styles converted\n    cssRule(`.overlay .${root}.noBreadcrumbs .${main}`, {\n        paddingTop: 0,\n    });\n\n    return {\n        root,\n        content,\n        top,\n        main,\n        container,\n        fullWidth,\n        leftColumn,\n        rightColumn,\n        middleColumn,\n        middleColumnMaxWidth,\n        panel,\n        isSticky,\n        breadcrumbs,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { DetailedHTMLProps } from \"react\";\nimport { embedContainerClasses } from \"@library/embeddedContent/embedStyles\";\nimport classNames from \"classnames\";\n\nexport enum EmbedContainerSize {\n    SMALL = \"small\",\n    MEDIUM = \"medium\",\n    FULL_WIDTH = \"fullwidth\",\n}\n\ninterface IProps extends DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {\n    className?: string;\n    children?: React.ReactNode;\n    size?: EmbedContainerSize;\n    inEditor?: boolean;\n    withPadding?: boolean;\n}\n\nexport function EmbedContainer(props: IProps) {\n    const { size, inEditor, withPadding, ...htmlProps } = props;\n    const classes = embedContainerClasses();\n\n    return (\n        <div\n            {...htmlProps}\n            className={classNames(\n                \"embedExternal\",\n                classes.makeRootClass(props.size || EmbedContainerSize.MEDIUM, !!props.inEditor, !!withPadding),\n                props.className,\n            )}\n        >\n            {props.children}\n        </div>\n    );\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IApiError, IApiResponse } from \"@library/@types/api/core\";\nimport { AxiosResponse, AxiosInstance } from \"axios\";\nimport { logError } from \"@vanilla/utils\";\nimport { ThunkDispatch, ThunkAction } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\nimport { AsyncActionCreators } from \"typescript-fsa\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\n\n/**\n * Base class for creating redux actions.\n */\nexport default class ReduxActions<S extends ICoreStoreState = ICoreStoreState> {\n    /**\n     * Utility to create an action with our a without a payload of a given type.\n     * The action generated can have its type narrowed in a reducer switch statement if the type T matches.\n     *\n     * @see ActionsUnion\n     *\n     * @param type The action type.\n     * @param payload The payload data.\n     */\n    public static createAction<ActionType extends string>(type: ActionType): IAction<ActionType>;\n    public static createAction<ActionType extends string, Payload>(\n        type: ActionType,\n        payload: Payload,\n    ): IActionWithPayload<ActionType, Payload>;\n    public static createAction<ActionType extends string, Payload>(type: ActionType, payload?: Payload) {\n        return payload === undefined ? { type } : { type, payload };\n    }\n\n    /**\n     * Create request, response, and error action creators.\n     *\n     * The dummy types are needed because typescript currently requires all generic types to be specified or all to be inferred. They cannot currently be mixed.\n     *\n     * @see https://github.com/Microsoft/TypeScript/issues/10571#issuecomment-345402872\n     *\n     * @param requestType The string for the request type. This should be a unique constant.\n     * @param responseType The string for the response type. This should be a unique constant.\n     * @param errorType The string for the error type. This should be a unique constant.\n     * @param dummyResponseType A placeholder to infer the type of the response. This isn't used for anything other than inferring a type.\n     * @param dummyMetaType A placeholder to infer the type of the meta. This isn't used for anything other than inferringa  type.\n     *\n     * @example\n     *\n     * ```\n     * const GET_THING_REQUEST = \"GET_THING_REQUEST\";\n     * const GET_THING_RESPONSE = \"GET_THING_RESPONSE\";\n     * const GET_THING_ERROR = \"GET_THING_ERROR\";\n     * interface IThing { thing: string }\n     * interface IThingOptions { page?: number }\n     *\n     * generateApiActionCreators(GET_THING_REQUEST, GET_THING_RESPONSE, GET_THING_ERROR, {} as IThing, {} as IThingOptions);\n     * ```\n     */\n    public static generateApiActionCreators<\n        RequestActionType extends string,\n        ResponseActionType extends string,\n        ErrorActionType extends string,\n        ResponseDataType,\n        Meta = any\n    >(\n        requestType: RequestActionType,\n        responseType: ResponseActionType,\n        errorType: ErrorActionType,\n        dummyResponseType?: ResponseDataType,\n        dummyMetaType?: Meta,\n    ): {\n        request: (meta?: Meta) => IApiAction<RequestActionType, Meta>;\n        response: (\n            payload: IApiResponse<ResponseDataType>,\n            meta?: Meta,\n        ) => IApiResponseAction<ResponseActionType, Meta, ResponseDataType>;\n        error: (error: IApiError, meta?: Meta) => IApiErrorAction<ErrorActionType, Meta>;\n    } {\n        return {\n            request: (meta: Meta) => ReduxActions.createApiRequestAction(requestType, meta),\n            response: (response: IApiResponse<ResponseDataType>, meta: Meta) =>\n                ReduxActions.createApiResponseAction(responseType, meta, response),\n            error: (error: IApiError, meta: Meta) => ReduxActions.createApiErrorAction(errorType, meta, error),\n        };\n    }\n\n    /**\n     * Create an API request action. For use in createApiActions().\n     *\n     * @param type The action's type.\n     * @param meta The type of the meta for the action.\n     */\n    private static createApiRequestAction<ActionType extends string, Meta>(\n        type: ActionType,\n        meta: Meta,\n    ): IApiAction<ActionType, Meta> {\n        return {\n            type,\n            meta,\n        };\n    }\n\n    /**\n     * Create an API error action. For use in createApiActions().\n     *\n     * @param type The action's type.\n     * @param meta The type of the meta for the action.\n     * @param error An API error.\n     */\n    private static createApiErrorAction<ActionType extends string, Meta>(\n        type: ActionType,\n        meta: Meta,\n        error: IApiError,\n    ): IApiErrorAction<ActionType, Meta> {\n        logError(error);\n        return {\n            type,\n            meta,\n            payload: error,\n        };\n    }\n\n    /**\n     * Create an API response action. For use in createApiActions().\n     *\n     * @param type The action's type.\n     * @param meta The type of the meta for the action.\n     * @param payload The shape of the IApiResponse data.\n     */\n    private static createApiResponseAction<ActionType extends string, Meta, ResponseDataType>(\n        type: ActionType,\n        meta: Meta,\n        payload: IApiResponse<ResponseDataType>,\n    ): IApiResponseAction<ActionType, Meta, ResponseDataType> {\n        return {\n            type,\n            meta,\n            payload,\n        };\n    }\n\n    /**\n     * Constructor for the redux actions.\n     *\n     * @param dispatch A redux dispatch function.\n     * @param api An API instance.\n     * @param getState Optionally override the getState method. (generally for testin purposes.)\n     */\n    constructor(protected dispatch: any, protected api: AxiosInstance, getState?: () => any) {\n        if (getState) {\n            this.getState = getState;\n        }\n    }\n\n    /**\n     * Bind dispatch to an action creator.\n     */\n    protected bindDispatch = <T extends (...args) => void>(actionCreator: T): T => {\n        return ((...args) => {\n            return this.dispatch(actionCreator.apply(this, args));\n        }) as any;\n    };\n\n    /**\n     * Generate a simple redux thunk for an API request using action creators.\n     *\n     * @param requestType The request method. Eg. post, patch, get, put.\n     * @param endpoint The endpoint requested.\n     * @param actionCreators Action creators generated from {@link ReduxActions.generateApiActionCreators()}\n     * @param params A parameter object for the request. This will be serialized as a JSON body or query string.\n     * @param meta\n     */\n    protected async dispatchApi<T>(\n        requestType: RequestType,\n        endpoint: string,\n        actionCreators: ReturnType<typeof ReduxActions.generateApiActionCreators>,\n        params: any,\n        meta: any = {},\n    ): Promise<AxiosResponse<T> | undefined> {\n        meta = {\n            ...params,\n            ...meta,\n        };\n        this.dispatch(actionCreators.request(meta));\n        try {\n            const requestPromise =\n                requestType === \"get\"\n                    ? this.api.get(endpoint, { params })\n                    : this.api[requestType as any](endpoint, params);\n            const response: AxiosResponse<T> = await requestPromise;\n            this.dispatch(actionCreators.response(response, meta));\n            return response;\n        } catch (apiError) {\n            this.dispatch(actionCreators.error(apiError, meta));\n        }\n    }\n\n    protected getState(): S {\n        return this.dispatch((c, getState) => {\n            return getState();\n        });\n    }\n}\n\n// Redux FSA\n\n/**\n * It's either a promise, or it isn't\n */\ntype MaybePromise<Type> = Type | Promise<Type>;\n\n/**\n * A redux-thunk with the params as the first argument.  You don't have to\n * return a promise; but, the result of the dispatch will be one.\n */\ntype AsyncWorker<Params, Succ, State, Extra = any> = (\n    params: Params,\n    dispatch: ThunkDispatch<State, Extra, AnyAction>,\n    getState: () => State,\n    extra: Extra,\n) => MaybePromise<Succ>;\n\n/** A function that takes parameters and returns a redux-thunk */\ntype ThunkActionCreator<Params, Result, State, Extra> = (\n    params?: Params,\n) => ThunkAction<Result, State, Extra, AnyAction>;\n\n/**\n * Bind a redux-thunk to typescript-fsa async action creators\n * @param actionCreators The typescript-fsa async action creators\n * @param asyncWorker A redux-thunk with extra `params` as the first argument\n * @returns a ThunkActionCreator, the result of which you can pass to dispatch()\n */\nexport const bindThunkAction = <Params, Succ, Err, State, Extra = any>(\n    actionCreators: AsyncActionCreators<Params, Succ, Err>,\n    asyncWorker: AsyncWorker<Params, Succ, State, Extra>,\n): ThunkActionCreator<Params, Promise<Succ>, State, Extra> => (params: Params) => async (dispatch, getState, extra) => {\n    try {\n        dispatch(actionCreators.started(params!));\n        const result = await asyncWorker(params!, dispatch, getState, extra);\n        dispatch(actionCreators.done({ params: params!, result }));\n        return result;\n    } catch (error) {\n        dispatch(actionCreators.failed({ params: params!, error }));\n        throw error;\n    }\n};\n\n// Action interfaces\nexport interface IAction<T extends string> {\n    type: T;\n}\n\nexport interface IActionWithPayload<T extends string, P> extends IAction<T> {\n    payload: P;\n    meta?: any;\n}\n\nexport interface IActionCreator<T extends string> {\n    (): IAction<T>;\n}\n\ntype FunctionType = (...args: any[]) => any;\ninterface IActionCreatorsMapObject {\n    [actionCreator: string]: FunctionType;\n}\n\n// API Action interfaces\ninterface IApiAction<ActionType, Meta> {\n    type: ActionType;\n    meta: Meta;\n}\n\ninterface IApiErrorAction<ActionType, Meta> extends IApiAction<ActionType, Meta> {\n    payload: IApiError;\n}\n\ninterface IApiResponseAction<ActionType, Meta, ResponseDataType> extends IApiAction<ActionType, Meta> {\n    payload: IApiResponse<ResponseDataType>;\n}\n\ntype RequestType = \"get\" | \"post\" | \"put\" | \"delete\" | \"patch\";\n\n// Utility to pull a group of action types out of an actions object\nexport type ActionsUnion<A extends IActionCreatorsMapObject> = ReturnType<A[keyof A]>;\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { t } from \"@library/utility/appUtils\";\nimport { iconClasses } from \"@library/icons/iconClasses\";\n\nconst currentColorFill = {\n    fill: \"currentColor\",\n};\n\nconst leftChevronPath =\n    \"M3.621,10.5l7.94-7.939A1.5,1.5,0,0,0,9.439.439h0l-9,9a1.5,1.5,0,0,0,0,2.121h0l9,9a1.5,1.5,0,0,0,2.122-2.122Z\";\n\nconst horizontalChevronViewBox = (centred?: boolean) => {\n    return centred ? \"-8 -4 30 30\" : \"0 0 24 24\";\n};\n\nexport function RightChevronIcon(props: { className?: string; centred?: boolean; title?: string }) {\n    const title = props.title ? props.title : `>`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-chevronRight\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox={horizontalChevronViewBox(props.centred)}\n            aria-hidden=\"true\"\n            style={{ transform: \"scaleX(-1)\", transformOrigin: \"50% 50%\" }}\n        >\n            <title>{title}</title>\n            <path\n                transform=\"translate(0 1.75)\"\n                className=\"icon-chevronRightPath\"\n                d={leftChevronPath}\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function LeftChevronIcon(props: { className?: string; centred?: boolean }) {\n    const title = `<`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-chevronLeft\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox={horizontalChevronViewBox(props.centred)}\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                transform=\"translate(0 1.75)\"\n                className=\"icon-chevronLeftPath\"\n                d={leftChevronPath}\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function LeftChevronCompactIcon(props: { className?: string }) {\n    const title = `<`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.chevronLeftCompact, \"icon-chevronLeftCompact\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 12 21\"\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path d={leftChevronPath} style={currentColorFill} />\n        </svg>\n    );\n}\n\nexport function TopChevronIcon(props: { className?: string }) {\n    const title = `↑`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-chevronUp\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M5.467,14.858l.668.618a.442.442,0,0,0,.614,0L12,10.614l5.252,4.862a.442.442,0,0,0,.614,0l.668-.618a.369.369,0,0,0,0-.569L12.308,8.524a.443.443,0,0,0-.615,0L5.467,14.289a.376.376,0,0,0-.134.284A.381.381,0,0,0,5.467,14.858Z\"\n            />\n        </svg>\n    );\n}\n\nexport function BottomChevronIcon(props: { className?: string; rotate?: number; title?: string }) {\n    const title = props.title ? props.title : `↓`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-chevronDown\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n            style={{\n                transform: props.rotate ? `rotate(${props.rotate}deg)` : undefined,\n            }}\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M18.534,9.142l-.668-.618a.442.442,0,0,0-.614,0L12,13.386,6.749,8.524a.442.442,0,0,0-.614,0l-.668.618a.369.369,0,0,0,0,.569l6.226,5.765a.443.443,0,0,0,.615,0l6.226-5.765a.376.376,0,0,0,.134-.284A.381.381,0,0,0,18.534,9.142Z\"\n            />\n        </svg>\n    );\n}\n\nexport function CloseIcon(props: { className?: string; compact?: boolean }) {\n    const title = t(\"Close\");\n    const viewBox = props.compact ? \"0 0 16 16\" : \"0 0 24 24\";\n    const transform = props.compact ? \"translate(-4 -4)\" : \"\";\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(props.compact ? classes.compact : classes.close, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox={viewBox}\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                transform={transform}\n                fill=\"currentColor\"\n                d=\"M12,10.6293581 L5.49002397,4.11938207 C5.30046135,3.92981944 4.95620859,3.96673045 4.69799105,4.22494799 L4.22494799,4.69799105 C3.97708292,4.94585613 3.92537154,5.29601344 4.11938207,5.49002397 L10.6293581,12 L4.11938207,18.509976 C3.92981944,18.6995387 3.96673045,19.0437914 4.22494799,19.3020089 L4.69799105,19.775052 C4.94585613,20.0229171 5.29601344,20.0746285 5.49002397,19.8806179 L12,13.3706419 L18.509976,19.8806179 C18.6995387,20.0701806 19.0437914,20.0332695 19.3020089,19.775052 L19.775052,19.3020089 C20.0229171,19.0541439 20.0746285,18.7039866 19.8806179,18.509976 L13.3706419,12 L19.8806179,5.49002397 C20.0701806,5.30046135 20.0332695,4.95620859 19.775052,4.69799105 L19.3020089,4.22494799 C19.0541439,3.97708292 18.7039866,3.92537154 18.509976,4.11938207 L12,10.6293581 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function CloseCompactIcon(props: { className?: string }) {\n    return <CloseIcon compact={true} className={props.className} />;\n}\n\nexport function CloseTinyIcon(props: { className?: string }) {\n    const title = t(\"Close\");\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.closeTiny, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 9.5 9.5\"\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M10.836,11.75,7.793,8.707A1,1,0,0,1,9.207,7.293l3.043,3.043,3.043-3.043a1,1,0,0,1,1.414,1.414L13.664,11.75l3.043,3.043a1,1,0,0,1-1.414,1.414L12.25,13.164,9.207,16.207a1,1,0,1,1-1.439-1.389l.025-.025Z\"\n                transform=\"translate(-7.488 -7.012)\"\n            />\n        </svg>\n    );\n}\n\nexport function ClearIcon(props: { className?: string }) {\n    const title = t(\"Clear\");\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-clear\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M12,5a7,7,0,1,0,7,7A7,7,0,0,0,12,5Zm2.873,5.244L13.118,12l1.755,1.756a.337.337,0,0,1,0,.479l-.638.638a.337.337,0,0,1-.479,0L12,13.118l-1.756,1.755a.337.337,0,0,1-.479,0l-.638-.638a.337.337,0,0,1,0-.479L10.882,12,9.127,10.244a.337.337,0,0,1,0-.479l.638-.638a.337.337,0,0,1,.479,0L12,10.882l1.756-1.755a.337.337,0,0,1,.479,0l.638.638A.337.337,0,0,1,14.873,10.244Z\"\n            />\n        </svg>\n    );\n}\n\nexport function CheckIcon(props: { className?: string }) {\n    const title = `✓`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-check\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <polygon fill=\"currentColor\" points=\"5,12.7 3.6,14.1 9,19.5 20.4,7.9 19,6.5 9,16.8\" />\n        </svg>\n    );\n}\n\nexport function DropDownMenuIcon(props: { className?: string }) {\n    const title = `…`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-dropDownMenu\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M5.5 12.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm8 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm8 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"\n            />\n        </svg>\n    );\n}\n\nexport function NewFolderIcon(props: { className?: string; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className={classNames(classes.newFolder, props.className)}\n            viewBox=\"0 0 22 19\"\n            aria-hidden=\"true\"\n        >\n            <title>{props.title ? props.title : t(\"New Folder\")}</title>\n            <path\n                d=\"M1,15.066V3.77Q1,1,3.548,1H9.12L11.3,3.769h7.286q2.372-.083,2.372,2.6v8.7q0,3.205-2.372,3.206H3.548Q1,18.272,1,15.066Z\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \"1.2px\" }}\n            />\n            <path\n                d=\"M10.5,8v6m3-3h-6\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeWidth: \"1.2px\" }}\n            />\n        </svg>\n    );\n}\n\nexport function WarningIcon(props: { className?: string; warningMessage: string }) {\n    const classes = iconClasses();\n\n    return (\n        <svg\n            className={classNames(classes.warning, props.className)}\n            aria-label={props.warningMessage}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n        >\n            <title>{props.warningMessage}</title>\n            <circle cx=\"8\" cy=\"8\" r=\"8\" style={currentColorFill} />\n            <circle cx=\"8\" cy=\"8\" r=\"7.5\" style={{ fill: \"none\", stroke: \"#000\", strokeOpacity: 0.122 }} />\n            <path\n                d=\"M11,10.4V8h2v2.4L12.8,13H11.3Zm0,4h2v2H11Z\"\n                transform=\"translate(-4 -4)\"\n                style={{ fill: \"#fff\" }}\n            />\n        </svg>\n    );\n}\n\nexport function CategoryIcon(props: { className?: string }) {\n    const title = t(\"Folder\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className={classNames(classes.categoryIcon, \"icon-categoryIcon\", props.className)}\n            viewBox=\"0 0 24 24\"\n            role=\"img\"\n            aria-label={title}\n        >\n            <title>{title}</title>\n            <path\n                d=\"M5.5,19 L18.5,19 C19.3284271,19 20,18.3284271 20,17.5 L20,8.5 C20,7.67157288 19.3284271,7 18.5,7 L12,7 L10.2222222,5 L5.5,5 C4.67157288,5 4,5.67157288 4,6.5 L4,17.5 C4,18.3284271 4.67157288,19 5.5,19 Z\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function CheckCompactIcon(props: { className?: string }) {\n    const title = `✓`;\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className={classNames(classes.selectedCategory, \"icon-selectedCategory\", props.className)}\n            viewBox=\"0 0 16.8 13\"\n            role=\"img\"\n            aria-label={title}\n        >\n            <title>{title}</title>\n            <polygon\n                points=\"12.136 3.139 13.25 4.253 6.211 11.292 2.75 7.83 3.863 6.717 6.211 9.064 12.136 3.139\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function UpTriangleIcon(props: { className?: string; title?: string; deg?: number }) {\n    return <DownTriangleIcon deg={180} translateY={-2} />;\n}\n\nexport function DownTriangleIcon(props: { className?: string; title?: string; deg?: number; translateY?: number }) {\n    let rotation: string | undefined = undefined;\n    if (props.deg !== undefined) {\n        rotation = `rotate(${props.deg}, 4, 4)`;\n    }\n\n    let translate: string | undefined = undefined;\n    if (props.translateY) {\n        translate = `translate(0, ${props.translateY})`;\n    }\n\n    const transform = [rotation, translate].filter(item => item !== undefined).join(\", \");\n\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 8 8\"\n            className={classNames(\"icon-triangleRight\", props.className)}\n            aria-hidden=\"true\"\n        >\n            <title>{props.title ? props.title : `▾`}</title>\n            <polygon points=\"0 2.594 8 2.594 4 6.594 0 2.594\" fill=\"currentColor\" transform={transform} />\n        </svg>\n    );\n}\n\nexport function RightTriangleIcon(props: { className?: string; title?: string }) {\n    return <DownTriangleIcon className={props.className} title={props.title ? props.title : `▶`} deg={-90} />;\n}\n\nexport function HelpIcon(props: { className?: string }) {\n    const title = t(\"Help\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(classes.compact, \"icon-help\", props.className)}\n            role=\"img\"\n            aria-label={title}\n        >\n            <title>{title}</title>\n            <path\n                d=\"M12,19a7,7,0,1,0-7-7A7,7,0,0,0,12,19Zm0,1a8,8,0,1,1,8-8A8,8,0,0,1,12,20Zm-.866-6.5v-.338a2,2,0,0,1,.211-.969,2.757,2.757,0,0,1,.741-.8,4.09,4.09,0,0,0,.812-.773,1.156,1.156,0,0,0,.183-.656.826.826,0,0,0-.3-.683,1.333,1.333,0,0,0-.851-.238A2.941,2.941,0,0,0,11,9.185a6.65,6.65,0,0,0-.836.344L9.721,8.6a4.653,4.653,0,0,1,2.3-.6,2.485,2.485,0,0,1,1.645.508,1.727,1.727,0,0,1,.609,1.4,1.983,1.983,0,0,1-.117.706,2.006,2.006,0,0,1-.352.59,5.653,5.653,0,0,1-.812.731,3.088,3.088,0,0,0-.659.64,1.229,1.229,0,0,0-.166.682V13.5Zm-.217,1.688a.7.7,0,0,1,.778-.8.775.775,0,0,1,.582.209.818.818,0,0,1,.2.59.838.838,0,0,1-.2.595.878.878,0,0,1-1.156.006A.844.844,0,0,1,10.917,15.185Z\"\n                transform=\"translate(-4 -4)\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function ComposeIcon(props: { className?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.standard, \"icon-compose\", props.className)}\n            aria-hidden=\"true\"\n        >\n            <path\n                fill=\"currentColor\"\n                d=\"M23.591,1.27l-.9-.9a1.289,1.289,0,0,0-1.807,0l-.762.863,2.6,2.587.868-.751a1.24,1.24,0,0,0,.248-.373,1.255,1.255,0,0,0,0-1.052A1.232,1.232,0,0,0,23.591,1.27ZM19.5,20.5H3.5V4.5H15.4l1.4-1.431H2.751A1,1,0,0,0,2,4.07V20.939a1,1,0,0,0,1,1H20.011a1,1,0,0,0,1-1V7L19.5,8.445ZM21.364,3.449l-9.875,9.8-.867-.861,9.874-9.8-.867-.863-4.938,4.9-4.938,4.9L8.74,15.167l3.617-1.055,9.875-9.8Z\"\n            />\n        </svg>\n    );\n}\n\nexport function PlusCircleIcon(props: { className?: string }) {\n    const title = `+`;\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 14 14\"\n            className={classNames(classes.plusCircle, \"icon-plusCircle\", props.className)}\n            role=\"img\"\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M14,7A7,7,0,1,1,7,0,7,7,0,0,1,14,7Zm-3.727.79a.339.339,0,0,0,.34-.338h0v-.9a.339.339,0,0,0-.339-.339H7.79V3.727a.339.339,0,0,0-.338-.34h-.9a.339.339,0,0,0-.339.339h0V6.21H3.727a.339.339,0,0,0-.34.338h0v.9a.339.339,0,0,0,.339.339H6.21v2.483a.339.339,0,0,0,.338.34h.9a.339.339,0,0,0,.339-.339h0V7.79Z\"\n            />\n        </svg>\n    );\n}\n\nexport function SignInIcon(props: { className?: string }) {\n    const title = t(\"Sign In\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"-4 0 24 18\"\n            className={classNames(classes.signIn, \"icon-signIn\", props.className)}\n            role=\"img\"\n        >\n            <title>{title}</title>\n            <g fill=\"none\" fillRule=\"evenodd\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeWidth=\"1.5\">\n                <path strokeLinejoin=\"round\" d=\"M7.243 12.417L10.92 8.74 7.243 5.063\" />\n                <path d=\"M10.617 8.74H.843\" />\n                <path\n                    strokeLinejoin=\"round\"\n                    d=\"M2 5.07V1.235C2.051.411 2.451 0 3.2 0h11.507C15.57.033 16 .593 16 1.681v15.136c-.058.789-.346 1.183-.865 1.183H3.2c-.8-.01-1.2-.404-1.2-1.183v-4.12\"\n                />\n            </g>\n        </svg>\n    );\n}\n\nexport function ChevronUpIcon(props: { className?: string; rotate?: number }) {\n    const title = t(\"Chevron Up\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 51 17\"\n            style={{\n                transform: props.rotate ? `rotate(${props.rotate}deg)` : undefined,\n            }}\n            className={classNames(classes.chevronUp, \"icon-chevronUp\", props.className)}\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M4.9,16.752A3.552,3.552,0,0,1,.329,14.668c-.039-.106-.074-.214-.1-.323A4.185,4.185,0,0,1,2.39,9.152L24.246.252a3.31,3.31,0,0,1,2.508,0l21.856,8.9a4.184,4.184,0,0,1,2.166,5.193,3.552,3.552,0,0,1-4.351,2.511,3.41,3.41,0,0,1-.325-.1L25.5,8.358Z\"\n            />\n        </svg>\n    );\n}\n\nexport function SearchErrorIcon(props: { message?: string; className?: string }) {\n    const title = props.message ? props.message : t(\"Page Not Found\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.standard, \"icon-notFound\", props.className)}\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                d=\"M16.178,14.358l4.628,4.616c.633.631,1.2,1.417.354,2.261s-1.647.286-2.285-.336q-.627-.612-4.7-4.688a7.7,7.7,0,1,1,2.005-1.853ZM9.984,9.214,11.563,7.64a.418.418,0,0,1,.591.59L10.576,9.8l1.578,1.574a.418.418,0,0,1-.591.59L9.984,10.394,8.4,11.968a.418.418,0,0,1-.591-.59L9.392,9.8,7.814,8.23A.418.418,0,0,1,8.4,7.64Zm.063,7.545a7.044,7.044,0,1,0-7.03-7.043A7.037,7.037,0,0,0,10.047,16.759Z\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function accessibleImageMenu(message?: string, className?: string) {\n    const title = message ? message : t(\"Accessibility\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.standard, \"icon-accessibleImageMenuIcon\", className)}\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M12 22.7C6.09 22.7 1.3 17.91 1.3 12 1.3 6.09 6.09 1.3 12 1.3c5.91 0 10.7 4.79 10.7 10.7 0 5.91-4.79 10.7-10.7 10.7zm0-1.4a9.3 9.3 0 1 0 0-18.6 9.3 9.3 0 0 0 0 18.6z\"\n            />\n            <path fill=\"currentColor\" d=\"M12 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4\" />\n            <path\n                fill=\"currentColor\"\n                d=\"M16.06 9.004h-.005l-3.06.336a2.823 2.823 0 0 1-.313.018H11.32c-.104 0-.208-.006-.312-.017l-3.065-.337c-.482-.047-.902.394-.94.984-.038.59.321 1.106.803 1.153l2.473.275c.15.017.265.17.265.355v.822c0 .179-.027.356-.08.522L9.06 17.494c-.195.541.005 1.174.446 1.414.442.24.958-.005 1.154-.546l1.336-4.007 1.349 4.017c.201.528.71.762 1.144.528.435-.235.637-.853.456-1.391l-1.408-4.395a1.717 1.717 0 0 1-.08-.521v-.822c0-.185.115-.339.265-.355l2.47-.275c.48-.045.841-.56.804-1.15-.036-.59-.456-1.033-.938-.988z\"\n            />\n        </svg>\n    );\n}\n\nexport function EditIcon(props: { className?: string; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg viewBox=\"0 0 24 24\" className={classNames(classes.editIcon, props.className)}>\n            <title>{props.title ? props.title : t(\"Edit\")}</title>\n            <g transform=\"translate(4, 3)\">\n                <polygon fill=\"currentColor\" points=\"1.05405405 14 3 15.9736842 0 17\" />\n                <path\n                    d=\"M1.53965611,12.8579964 L14.2200643,0.146669161 C14.4151476,-0.0488897203 14.6102308,-0.0488897203 14.805314,0.146669161 L16.8536876,2.20003741 C17.0487708,2.39559629 17.0487708,2.59115517 16.8536876,2.78671406 L4.17327936,15.4980413 L0.466698493,16.9647329 C0.076532086,17.0625124 -0.118551118,16.9647329 0.076532086,16.5736152 L1.53965611,12.8579964 Z\"\n                    stroke=\"currentColor\"\n                    fill=\"none\"\n                />\n            </g>\n        </svg>\n    );\n}\n\nexport function DeleteIcon(props: { className?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg viewBox=\"0 0 17 17\" className={classNames(classes.deleteIcon, props.className)}>\n            <title>{t(\"Delete\")}</title>\n            <g clipRule=\"evenodd\" fillRule=\"evenodd\" fill=\"currentColor\">\n                <path\n                    d=\"M14,4v9c0,1.1-0.9,2-2,2H5c-1.1,0-2-0.9-2-2V4H2.3C2.1,4,2,3.9,2,3.7V3.3C2,3.1,2.1,3,2.3,3h3.2l0.3-1\n\t\tC5.9,1.4,6.4,1,7,1h3c0.6,0,1.1,0.4,1.2,1l0.3,1h3.2C14.9,3,15,3.1,15,3.3v0.4C15,3.9,14.9,4,14.7,4H14z M7,2.2C7,2.1,7.1,2,7.2,2\n\t\th2.6C9.9,2,10,2.1,10,2.2L10.2,3H6.8L7,2.2z M4,4h9v9c0,0.5-0.4,1-1,1H5c-0.6,0-1-0.5-1-1V4z\"\n                />\n                <path\n                    d=\"M8.5,5.5L8.5,5.5C8.8,5.5,9,5.7,9,6v6c0,0.3-0.2,0.5-0.5,0.5l0,0C8.2,12.5,8,12.3,8,12V6\n\t\tC8,5.7,8.2,5.5,8.5,5.5z\"\n                />\n                <path\n                    d=\"M10.5,5.5L10.5,5.5C10.8,5.5,11,5.7,11,6v6c0,0.3-0.2,0.5-0.5,0.5l0,0c-0.3,0-0.5-0.2-0.5-0.5V6\n\t\tC10,5.7,10.2,5.5,10.5,5.5z\"\n                />\n                <path\n                    d=\"M6.5,5.5L6.5,5.5C6.8,5.5,7,5.7,7,6v6c0,0.3-0.2,0.5-0.5,0.5l0,0C6.2,12.5,6,12.3,6,12V6\n\t\tC6,5.7,6.2,5.5,6.5,5.5z\"\n                />\n            </g>\n        </svg>\n    );\n}\n\nexport function DiscussionIcon(props: { className?: string; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg className={classNames(classes.discussionIcon, props.className)} viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n            <title>{props.title ? props.title : t(\"Speech Bubble\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M12 17.431c4.418 0 8-2.783 8-6.216C20 7.782 16.418 5 12 5s-8 2.783-8 6.216c0 1.572.75 3.008 1.99 4.102l-.765 3.11 3.28-1.619a9.9 9.9 0 0 0 3.495.623zm-6.332 1.892c-.762.376-1.616-.31-1.414-1.134l.627-2.55C3.678 14.396 3 12.854 3 11.215 3 7.168 7.077 4 12 4s9 3.168 9 7.215c0 4.048-4.077 7.215-9 7.215-1.192 0-2.352-.185-3.43-.54l-2.902 1.433z\"\n            />\n        </svg>\n    );\n}\n\nexport function AlertIcon(props: { className?: string; title?: string; compact?: boolean }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(props.compact ? classes.alertIconCompact : classes.alertIcon, props.className)}\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n        >\n            <title>{props.title ? props.title : t(\"Alert\")}</title>\n\n            <circle cx=\"12\" cy=\"12\" r=\"7\" style={{ fill: \"#d0021b\" }} />\n            <path\n                d=\"M12.709,12.905H11.314L11.023,7H13ZM11,14.972a1.048,1.048,0,0,1,.257-.767,1.01,1.01,0,0,1,.749-.26.982.982,0,0,1,.734.266,1.226,1.226,0,0,1,0,1.514.964.964,0,0,1-.731.275.993.993,0,0,1-.743-.269A1.042,1.042,0,0,1,11,14.972Z\"\n                style={{ fill: \"#fff\" }}\n            />\n        </svg>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { useThemeCache } from \"@library/styles/styleUtils\";\nimport { BorderRadiusProperty } from \"csstype\";\nimport { ColorHelper } from \"csx\";\nimport { TLength } from \"typestyle/lib/types\";\nimport { ColorValues } from \"@library/styles/styleHelpersColors\";\n\nexport const shadowHelper = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const shadowBaseColor = globalVars.mainColors.fg;\n    const makeShadow = (opacity: number = 0.3) => `0 1px 3px 0 ${shadowBaseColor.fade(opacity)}`;\n    const embed = (baseColor: ColorHelper = shadowBaseColor) => {\n        return {\n            boxShadow: `0 1px 3px 0 ${baseColor.fade(0.3)}`,\n        };\n    };\n\n    const embedHover = (baseColor: ColorHelper = shadowBaseColor) => {\n        return {\n            boxShadow: `0 1px 3px 0 ${baseColor.fade(0.3)}, 0 2px 4px 0 ${baseColor.darken(0.5).fade(0.22)}`,\n        };\n    };\n\n    const dropDown = (baseColor: ColorHelper = shadowBaseColor) => {\n        return {\n            boxShadow: `0 5px 10px 0 ${baseColor.fade(0.3)}`,\n        };\n    };\n\n    const modal = (baseColor: ColorHelper = shadowBaseColor) => {\n        return {\n            boxShadow: `0 5px 20px ${baseColor.fade(0.5)}`,\n        };\n    };\n\n    const contrast = (\n        baseColor: ColorHelper = globalVars.mainColors.fg,\n        hasBorder: boolean = false,\n        borderRadius: BorderRadiusProperty<TLength> = 0,\n    ) => {\n        const shadowColor = baseColor.fade(0.2);\n        let border = {};\n\n        if (hasBorder) {\n            border = {\n                outline: `solid 1px ${shadowColor.toString()}`,\n                radius: borderRadius,\n            };\n        }\n\n        return {\n            boxShadow: `0 0 3px 0 ${baseColor.fade(0.3)}`,\n            ...border,\n        };\n    };\n\n    return { embed, embedHover, dropDown, modal, contrast, makeShadow };\n});\n\nexport const shadowOrBorderBasedOnLightness = (\n    referenceColor: ColorValues,\n    borderStyles: object,\n    shadowStyles: object,\n    flip?: boolean,\n) => {\n    if (referenceColor instanceof ColorHelper && referenceColor.lightness() >= 0.5 && !flip) {\n        // Shadow for light colors\n        return shadowStyles;\n    } else {\n        // Border for dark colors\n        return borderStyles;\n    }\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { em, quote } from \"csx\";\nimport { NestedCSSSelectors, TLength, NestedCSSProperties } from \"typestyle/lib/types\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { margins, negative, unit } from \"@library/styles/styleHelpers\";\n\n/**\n * Many fonts don't set the capital letter to take the whole line height. This mixin is used to line up the top of the Text with the top of the container.\n *\n * @see https://medium.com/codyhouse/line-height-crop-a-simple-css-formula-to-remove-top-space-from-your-text-9c3de06d7c6f\n *\n * @param nestedStyles - Any aditionnal styles to add in the \"$nest\" key\n * @param letterToLineHeightRatio - The ratio is a value from 0 to 1 to set how much of\n *      the line height the capital takes compared to the line height\n *      Example, if it takes 3/4 of the line height, set .75\n * @param verticalOffset - Sometimes the base line isn't centered,\n *      0 remove from top, .5 use font default, 1 remove from bottom\n */\nexport function lineHeightAdjustment(\n    nestedStyles?: NestedCSSProperties,\n    letterToLineHeightRatio?: number,\n    verticalOffset?: number,\n) {\n    const globalVars = globalVariables();\n    const vOffset = verticalOffset ? verticalOffset : globalVars.fonts.alignment.headings.verticalOffset; // for now we only support one font, but if we add more than one, we'll need to distinguish between them\n    const letterRatio = letterToLineHeightRatio\n        ? letterToLineHeightRatio\n        : globalVars.fonts.alignment.headings.capitalLetterRatio; // for now we only support one font, but if we add more than one, we'll need to distinguish between them\n    enum Position {\n        BEFORE = \"before\",\n        AFTER = \"after\",\n    }\n\n    /**\n     * Calculate the actual margin values.\n     */\n    const calculateOffset = (type: Position) => {\n        const isBefore = type === Position.BEFORE;\n        const offset = isBefore ? vOffset : 1 - vOffset!; // If the text is not centered in the line, we need to cheat it vertically\n        const emptySpace = 1 - letterRatio; // This is the pixel value of the dead space in the line from top and/or bottom of line\n        const margin = emptySpace * offset!; // Splits the empty space between top and bottom. .5 gives you even amount on both sides.\n        const verticalMargin = em(emptySpace < 1 ? negative(margin) : margin);\n\n        if (verticalMargin === 0) {\n            return null;\n        } else {\n            return {\n                content: quote(\"\"),\n                display: \"block\",\n                position: \"relative\",\n                height: 0,\n                width: 0,\n                ...margins({\n                    top: isBefore ? verticalMargin : undefined,\n                    bottom: !isBefore ? verticalMargin : undefined,\n                }),\n            };\n        }\n    };\n    const result = nestedStyles ? nestedStyles : {};\n\n    const before = calculateOffset(Position.BEFORE);\n    if (before) {\n        result[\"&::before\"] = before;\n    }\n\n    const after = calculateOffset(Position.AFTER);\n    if (after) {\n        result[\"&::after\"] = after;\n    }\n\n    return result as NestedCSSSelectors;\n}\n\nexport function defaultHyphenation() {\n    const vars = globalVariables().userContentHyphenation;\n    return {\n        \"-ms-hyphens\": \"auto\",\n        \"-webkit-hyphens\": \"auto\",\n        hyphens: \"auto\",\n        /* legacy properties */\n        \"-webkit-hyphenate-limit-before\": vars.minimumCharactersBeforeBreak,\n        \"-webkit-hyphenate-limit-after\": vars.minimumCharactersAfterBreak,\n        /* current proposal */\n        \"-moz-hyphenate-limit-chars\": `${vars.minimumCharactersToHyphenate} ${vars.minimumCharactersBeforeBreak} ${\n            vars.minimumCharactersAfterBreak\n        }` /* not yet supported */,\n        \"-webkit-hyphenate-limit-chars\": `${vars.minimumCharactersToHyphenate} ${vars.minimumCharactersBeforeBreak} ${\n            vars.minimumCharactersAfterBreak\n        }` /* not yet supported */,\n        \"-ms-hyphenate-limit-chars\": `${vars.minimumCharactersToHyphenate} ${vars.minimumCharactersBeforeBreak} ${\n            vars.minimumCharactersAfterBreak\n        }`,\n        \"hyphenate-limit-chars\": `${vars.minimumCharactersToHyphenate} ${vars.minimumCharactersBeforeBreak} ${\n            vars.minimumCharactersAfterBreak\n        }`,\n        // Maximum consecutive lines to have hyphenation\n        \"-ms-hyphenate-limit-lines\": vars.maximumConsecutiveBrokenLines,\n        \"-webkit-hyphenate-limit-lines\": vars.maximumConsecutiveBrokenLines,\n        \"hyphenate-limit-lines\": vars.maximumConsecutiveBrokenLines,\n        // Limit \"zone\" to hyphenate\n        \"hyphenate-limit-zone\": unit(vars.hyphenationZone),\n    };\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nenum ModalSizes {\n    FULL_SCREEN = \"full screen\",\n    MODAL_AS_SIDE_PANEL = \"render as full screen side panel\",\n    MODAL_AS_DROP_DOWN = \"render as drop down\",\n    LARGE = \"large\",\n    MEDIUM = \"medium\",\n    SMALL = \"small\",\n}\n\nexport default ModalSizes;\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { Optionalize } from \"@library/@types/utils\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport throttle from \"lodash/throttle\";\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\n\nexport enum Devices {\n    XS = \"xs\",\n    MOBILE = \"mobile\",\n    TABLET = \"tablet\",\n    NO_BLEED = \"no_bleed\", // Not enough space for back link which goes outside the margin.\n    DESKTOP = \"desktop\",\n}\n\nexport interface IDeviceProps {\n    device: Devices;\n}\n\nconst DeviceContext = React.createContext<Devices>(Devices.DESKTOP);\nexport default DeviceContext;\n\nexport function useDevice() {\n    const device = useContext(DeviceContext);\n    return device;\n}\n\ninterface IProps {\n    children: React.ReactNode;\n}\n\nexport function DeviceProvider(props: IProps) {\n    const calculateDevice = useCallback(() => {\n        const breakpoints = layoutVariables().panelLayoutBreakPoints;\n        const width = document.body.clientWidth;\n        if (width <= breakpoints.xs) {\n            return Devices.XS;\n        } else if (width <= breakpoints.oneColumn) {\n            return Devices.MOBILE;\n        } else if (width <= breakpoints.twoColumn) {\n            return Devices.TABLET;\n        } else if (width <= breakpoints.noBleed) {\n            return Devices.NO_BLEED;\n        } else {\n            return Devices.DESKTOP;\n        }\n    }, []);\n    const [device, setDevice] = useState<Devices>(calculateDevice());\n\n    useEffect(() => {\n        const throttledUpdate = throttle(() => {\n            setDevice(calculateDevice);\n        }, 100);\n        window.addEventListener(\"resize\", throttledUpdate);\n        return () => {\n            window.removeEventListener(\"resize\", throttledUpdate);\n        };\n    }, [calculateDevice, setDevice]);\n\n    return <DeviceContext.Provider value={device}>{props.children}</DeviceContext.Provider>;\n}\n\n/**\n * HOC to inject DeviceContext as props.\n *\n * @param WrappedComponent - The component to wrap\n */\nexport function withDevice<T extends IDeviceProps = IDeviceProps>(WrappedComponent: React.ComponentType<T>) {\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    const ComponentWithDevice = (props: Optionalize<T, IDeviceProps>) => {\n        return (\n            <DeviceContext.Consumer>\n                {context => {\n                    // https://github.com/Microsoft/TypeScript/issues/28938\n                    return <WrappedComponent device={context} {...props as T} />;\n                }}\n            </DeviceContext.Consumer>\n        );\n    };\n    ComponentWithDevice.displayName = `withDevice(${displayName})`;\n    return ComponentWithDevice;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { createStore, compose, applyMiddleware, combineReducers, Store, AnyAction } from \"redux\";\nimport { getReducers, ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport thunk from \"redux-thunk\";\n\n// There may be an initial state to import.\nconst initialState = {};\nconst initialActions = window.__ACTIONS__ || [];\n\nconst middleware = [thunk];\n\n// https://github.com/zalmoxisus/redux-devtools-extension/blob/master/docs/Troubleshooting.md#excessive-use-of-memory-and-cpu\nconst actionSanitizer = (action: AnyAction) =>\n    (action.type as string).includes(\"[editorInstance]\") && action.payload && action.payload.quill\n        ? {\n              ...action,\n              payload: { ...action.payload, quill: \"<<Quill Instance>>\" },\n          }\n        : action;\n// Browser may have redux dev tools installed, if so integrate with it.\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({ actionSanitizer })\n    : compose;\nconst enhancer = composeEnhancers(applyMiddleware(...middleware));\n\n// Build the store, add devtools extension support if it's available.\nlet store;\n\nexport default function getStore<S = ICoreStoreState>(): Store<S, any> {\n    if (store === undefined) {\n        // Get our reducers.\n        const reducer = combineReducers(getReducers());\n        store = createStore(reducer, initialState, enhancer);\n\n        // Dispatch initial actions returned from the server.\n        initialActions.forEach(store.dispatch);\n    }\n\n    return store;\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables, IIconSizes } from \"@library/styles/globalStyleVars\";\nimport { colorOut, unit } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { percent } from \"csx\";\nimport { OverflowProperty, ResizeProperty, StandardLonghandPropertiesFallback } from \"csstype\";\n\nexport const inputBlockVariables = useThemeCache(() => {\n    const vars = globalVariables();\n    const varsLayouts = layoutVariables();\n    const mixBgAndFg = vars.mixBgAndFg;\n    const makeThemeVars = variableFactory(\"formElements\");\n});\n\nexport const inputBlockClasses = useThemeCache(() => {\n    const style = styleFactory(\"inputBlock\");\n    const globalVars = globalVariables();\n    const vars = inputBlockVariables();\n    const formElementVars = formElementsVariables();\n\n    const inputText = style(\"inputText\", {\n        display: \"block\",\n    });\n\n    const inputWrap = style(\"inputWrap\", {\n        display: \"block\",\n    });\n\n    const labelAndDescription = style(\"labelAndDescription\", {\n        display: \"block\",\n        width: percent(100),\n    });\n\n    const root = style({\n        display: \"block\",\n        width: percent(100),\n        $nest: {\n            [`& + &`]: {\n                marginTop: unit(formElementVars.spacing.margin),\n            },\n            [`&.isLast`]: {\n                marginBottom: unit(formElementVars.spacing.margin),\n            },\n            [`&.hasError .${inputText}`]: {\n                borderColor: colorOut(globalVars.messageColors.error.fg),\n                backgroundColor: colorOut(globalVars.messageColors.error.fg),\n                color: colorOut(globalVars.messageColors.error.fg),\n            },\n            \"&.isHorizontal\": {\n                display: \"flex\",\n                width: percent(100),\n                alignItems: \"center\",\n                flexWrap: \"wrap\",\n            },\n            [`&.isHorizontal .${labelAndDescription}`]: {\n                display: \"inline-flex\",\n                width: \"auto\",\n            },\n            [`&.isHorizontal .${inputWrap}`]: {\n                display: \"inline-flex\",\n                flexGrow: 1,\n            },\n        },\n    });\n\n    const errors = style(\"errors\", {\n        display: \"block\",\n        fontSize: unit(globalVars.fonts.size.small),\n    });\n    const error = style(\"error\", {\n        display: \"block\",\n        color: colorOut(globalVars.messageColors.error.fg),\n        $nest: {\n            \"& + &\": {\n                marginTop: unit(6),\n            },\n        },\n    });\n    const labelNote = style(\"labelNote\", {\n        display: \"block\",\n        fontSize: unit(globalVars.fonts.size.small),\n        fontWeight: globalVars.fonts.weights.normal,\n        opacity: 0.6,\n    });\n\n    const labelText = style(\"labelText\", {\n        display: \"block\",\n        fontWeight: globalVars.fonts.weights.semiBold,\n        fontSize: unit(globalVars.fonts.size.medium),\n        marginBottom: unit(formElementVars.spacing.margin / 2),\n    });\n\n    const sectionTitle = style(\"sectionTitle\", {\n        fontWeight: globalVars.fonts.weights.semiBold,\n        lineHeight: globalVars.lineHeights.base,\n    });\n\n    const fieldsetGroup = style(\"fieldsetGroup\", {\n        marginTop: unit(formElementVars.spacing.margin),\n    });\n\n    const multiLine = (resize?: ResizeProperty, overflow?: OverflowProperty) => {\n        return style(\"multiLine\", {\n            resize: (resize ? resize : \"vertical\") as ResizeProperty,\n            overflow: (overflow ? overflow : \"auto\") as OverflowProperty,\n        });\n    };\n\n    return {\n        root,\n        inputText,\n        errors,\n        error,\n        labelNote,\n        labelText,\n        inputWrap,\n        labelAndDescription,\n        sectionTitle,\n        fieldsetGroup,\n        multiLine,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { EmbedContainerSize } from \"@library/embeddedContent/EmbedContainer\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { shadowHelper, shadowOrBorderBasedOnLightness } from \"@library/styles/shadowHelpers\";\nimport { borders, colorOut, unit, userSelect } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { percent, px } from \"csx\";\nimport { NestedCSSProperties } from \"typestyle/lib/types\";\n\nexport const embedContainerVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"embedContainer\");\n\n    const colors = makeThemeVars(\"colors\", {\n        bg: globalVars.mainColors.bg,\n    });\n\n    const border = makeThemeVars(\"border\", {\n        style: \"none\",\n        width: 0,\n        radius: px(4),\n    });\n\n    const title = makeThemeVars(\"title\", {\n        size: globalVars.fonts.size.medium,\n        weight: globalVars.fonts.weights.bold,\n    });\n\n    const dimensions = makeThemeVars(\"dimensions\", {\n        maxEmbedWidth: 640,\n    });\n\n    const spacing = makeThemeVars(\"padding\", {\n        padding: 18,\n    });\n\n    return { border, spacing, colors, title, dimensions };\n});\n\nexport const embedContainerClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = embedContainerVariables();\n    const style = styleFactory(\"embed\");\n\n    const hoverFocusStates = {\n        \"&:hover\": {\n            boxShadow: `0 0 0 ${px(globalVars.embed.select.borderWidth)} ${globalVars.embed.focus.color.fade(\n                0.5,\n            )} inset`,\n        },\n        \"&:focus\": {\n            boxShadow: `0 0 0 ${px(\n                globalVars.embed.select.borderWidth,\n            )} ${globalVars.embed.focus.color.toString()} inset`,\n        },\n    };\n\n    const sizes: { [x in EmbedContainerSize]: NestedCSSProperties } = {\n        [EmbedContainerSize.SMALL]: {\n            width: px(500),\n            maxWidth: percent(100),\n        },\n        [EmbedContainerSize.MEDIUM]: {\n            width: px(globalVars.embed.sizing.width),\n            maxWidth: percent(100),\n        },\n        [EmbedContainerSize.FULL_WIDTH]: {\n            maxWidth: percent(100),\n        },\n    };\n\n    const makeRootClass = (size: EmbedContainerSize, inEditor: boolean, withPadding: boolean = true) =>\n        style(size, {\n            fontSize: unit(globalVars.fonts.size.medium),\n            background: colorOut(vars.colors.bg),\n            display: \"block\",\n            position: \"relative\",\n            textDecoration: \"none\",\n            color: \"inherit\",\n            margin: \"auto\",\n            overflow: \"hidden\",\n            padding: withPadding ? vars.spacing.padding : 0,\n            ...(inEditor ? userSelect() : {}),\n            ...sizes[size],\n            ...borders(vars.border),\n            ...shadowOrBorderBasedOnLightness(globalVars.body.backgroundImage.color, borders(), shadowHelper().embed()),\n            $nest: {\n                // These 2 can't be joined together or their pseudselectors don't get created properly.\n                \"&.isLoading\": {\n                    cursor: \"pointer\",\n                    $nest: hoverFocusStates,\n                },\n                \"&.hasError\": {\n                    cursor: \"pointer\",\n                    background: colorOut(globalVars.messageColors.warning.bg),\n                    color: colorOut(globalVars.messageColors.warning.fg),\n                    $nest: hoverFocusStates,\n                },\n            },\n        });\n\n    const title = style(\"title\", {\n        $nest: {\n            \"&&\": {\n                // Nested for compatibility.\n                fontSize: unit(vars.title.size),\n                fontWeight: vars.title.weight,\n                marginTop: 0,\n                marginBottom: 4,\n                display: \"block\",\n                width: percent(100),\n                padding: 0,\n                lineHeight: globalVars.lineHeights.condensed,\n                color: colorOut(globalVars.mainColors.fg),\n                whiteSpace: \"nowrap\",\n                overflow: \"hidden\",\n                textOverflow: \"ellipsis\",\n            },\n        },\n    });\n\n    return { makeRootClass, title };\n});\n\nexport const embedContentClasses = useThemeCache(() => {\n    const style = styleFactory(\"embedContent\");\n\n    const small = style(\"small\", {\n        display: \"inline-flex\",\n        width: \"auto\",\n    });\n\n    const root = style(\"root\", {\n        position: \"relative\",\n    });\n    return { small, root };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { getOptionalID, IOptionalComponentID } from \"@library/utility/idUtils\";\n\nexport interface IParagraphProps extends IOptionalComponentID {\n    className?: string;\n    isError?: boolean;\n    children?: React.ReactNode;\n}\n\nexport default class Paragraph extends React.Component<IParagraphProps> {\n    public static defaultProps = {\n        id: false,\n    };\n\n    public id: string;\n\n    constructor(props) {\n        super(props);\n        this.id = getOptionalID(props, \"Paragraph\") as string;\n    }\n\n    public render() {\n        if (this.props.children) {\n            const componentClasses = classNames({ isError: this.props.isError }, this.props.className);\n\n            let accessibilityProps = {};\n\n            if (this.props.isError) {\n                accessibilityProps = {\n                    \"aria-live\": \"assertive\",\n                    role: \"alert\",\n                };\n            }\n\n            return (\n                <p id={this.id} className={componentClasses} {...accessibilityProps}>\n                    {this.props.children}\n                </p>\n            );\n        } else {\n            return null;\n        }\n    }\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { getOptionalID, IOptionalComponentID } from \"@library/utility/idUtils\";\nimport { buttonClasses, ButtonTypes, buttonUtilityClasses } from \"@library/forms/buttonStyles\";\nimport classNames from \"classnames\";\nimport { titleBarClasses } from \"@library/headers/titleBarStyles\";\n\ninterface IProps extends IOptionalComponentID {\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    prefix?: string;\n    legacyMode?: boolean;\n    onClick?: (e) => void;\n    onKeyDown?: (e) => void;\n    title?: string;\n    submit?: boolean;\n    ariaLabel?: string;\n    baseClass?: ButtonTypes;\n    ariaHidden?: boolean;\n    tabIndex?: number;\n    lang?: string;\n    buttonRef?: React.RefObject<HTMLButtonElement>;\n    role?: string;\n    onKeyDownCapture?: (event: any) => void;\n    controls?: string;\n}\n\ninterface IState {\n    id?: string;\n}\n\nexport const getButtonStyleFromBaseClass = (type: ButtonTypes | undefined) => {\n    if (type) {\n        const buttonUtils = buttonUtilityClasses();\n        const classes = buttonClasses();\n        switch (type) {\n            case ButtonTypes.STANDARD:\n                return classes.standard;\n            case ButtonTypes.TEXT:\n                return classes.text;\n            case ButtonTypes.TEXT_PRIMARY:\n                return classes.textPrimary;\n            case ButtonTypes.ICON:\n                return buttonUtils.buttonIcon;\n            case ButtonTypes.ICON_COMPACT:\n                return buttonUtils.buttonIconCompact;\n            case ButtonTypes.PRIMARY:\n                return classes.primary;\n            case ButtonTypes.TRANSPARENT:\n                return classes.transparent;\n            case ButtonTypes.TRANSLUCID:\n                return classes.translucid;\n            case ButtonTypes.TITLEBAR_LINK:\n                return titleBarClasses().linkButton;\n            case ButtonTypes.CUSTOM:\n                return classes.custom;\n            case ButtonTypes.RESET:\n                return buttonUtilityClasses().reset;\n            case ButtonTypes.DASHBOARD_STANDARD:\n                return \"btn\";\n            case ButtonTypes.DASHBOARD_PRIMARY:\n                return \"btn btn-primary\";\n            case ButtonTypes.DASHBOARD_SECONDARY:\n                return \"btn btn-secondary\";\n            case ButtonTypes.DASHBOARD_LINK:\n                return \"btn btn-link\";\n            default:\n                return \"\";\n        }\n    } else {\n        return \"\";\n    }\n};\n\n/**\n * A stylable, configurable button component.\n */\nexport default class Button extends React.Component<IProps, IState> {\n    public static defaultProps: Partial<IProps> = {\n        id: undefined,\n        disabled: false,\n        prefix: \"button\",\n        legacyMode: false,\n        baseClass: ButtonTypes.STANDARD,\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: getOptionalID(props, props.prefix) as string | undefined,\n        };\n    }\n\n    public render() {\n        const componentClasses = classNames(\n            getButtonStyleFromBaseClass(this.props.baseClass),\n            { Button: this.props.legacyMode },\n            this.props.className,\n        );\n\n        return (\n            <button\n                id={this.state.id}\n                disabled={this.props.disabled}\n                type={this.props.submit ? \"submit\" : \"button\"}\n                className={componentClasses}\n                onClick={this.props.onClick}\n                title={this.props.title}\n                aria-label={this.props.ariaLabel || this.props.title}\n                aria-hidden={this.props.ariaHidden}\n                tabIndex={this.props.tabIndex}\n                ref={this.props.buttonRef}\n                onKeyDown={this.props.onKeyDown}\n                lang={this.props.lang}\n                role={this.props.role}\n                onKeyDownCapture={this.props.onKeyDownCapture}\n                aria-controls={this.props.controls}\n            >\n                {this.props.children}\n            </button>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { percent } from \"csx\";\nimport { ColorValues, paddings, unit } from \"@library/styles/styleHelpers\";\nimport {\n    FontFamilyProperty,\n    FontSizeProperty,\n    FontWeightProperty,\n    LineHeightProperty,\n    MaxWidthProperty,\n    OverflowXProperty,\n    TextOverflowProperty,\n    TextShadowProperty,\n    TextTransformProperty,\n    WhiteSpaceProperty,\n    TextAlignProperty,\n} from \"csstype\";\nimport { NestedCSSProperties, TLength } from \"typestyle/lib/types\";\nimport { colorOut } from \"@library/styles/styleHelpersColors\";\n\nconst fontFallbacks = [\n    \"-apple-system\",\n    \"BlinkMacSystemFont\",\n    \"HelveticaNeue-Light\",\n    \"Segoe UI\",\n    \"Helvetica Neue\",\n    \"Helvetica\",\n    \"Raleway\",\n    \"Arial\",\n    \"sans-serif\",\n    \"Apple Color Emoji\",\n    \"Segoe UI Emoji\",\n    \"Segoe UI Symbol\",\n];\n\nexport function fontFamilyWithDefaults(fontFamilies: string[]): string {\n    return fontFamilies\n        .concat(fontFallbacks)\n        .map(font => (font.includes(\" \") && !font.includes('\"') ? `\"${font}\"` : font))\n        .join(\", \");\n}\n\nexport function inputLineHeight(height: number, paddingTop: number, fullBorderWidth: number) {\n    return unit(height - (2 * paddingTop + fullBorderWidth));\n}\n\nexport const textInputSizingFromSpacing = (fontSize: number, paddingTop: number, fullBorderWidth: number) => {\n    return {\n        fontSize: unit(fontSize),\n        width: percent(100),\n        lineHeight: 1.5,\n        ...paddings({\n            top: unit(paddingTop),\n            bottom: unit(paddingTop),\n            left: unit(paddingTop * 2),\n            right: unit(paddingTop * 2),\n        }),\n    };\n};\n\nexport const textInputSizingFromFixedHeight = (height: number, fontSize: number, fullBorderWidth: number) => {\n    const paddingTop = (height - fullBorderWidth - fontSize * 1.5) / 2;\n    return {\n        fontSize: unit(fontSize),\n        width: percent(100),\n        lineHeight: 1.5,\n        ...paddings({\n            top: unit(paddingTop),\n            bottom: unit(paddingTop),\n            left: unit(paddingTop * 2),\n            right: unit(paddingTop * 2),\n        }),\n    };\n};\n\nexport interface IFont {\n    color?: ColorValues;\n    size?: FontSizeProperty<TLength>;\n    weight?: FontWeightProperty | number;\n    lineHeight?: LineHeightProperty<TLength>;\n    shadow?: TextShadowProperty;\n    align?: TextAlignProperty;\n    family?: FontFamilyProperty[];\n    transform?: TextTransformProperty;\n}\n\nexport const fonts = (props: IFont): NestedCSSProperties => {\n    if (props) {\n        const fontSize = props.size !== undefined ? unit(props.size) : undefined;\n        const fontWeight = props.weight !== undefined ? props.weight : undefined;\n        const color = props.color !== undefined ? colorOut(props.color) : undefined;\n        const lineHeight = props.lineHeight !== undefined ? props.lineHeight : undefined;\n        const textAlign = props.align !== undefined ? props.align : undefined;\n        const textShadow = props.shadow !== undefined ? props.shadow : undefined;\n        const fontFamily = props.family !== undefined ? fontFamilyWithDefaults(props.family) : undefined;\n        const textTransform = props.transform !== undefined ? props.transform : undefined;\n        return {\n            color,\n            fontSize,\n            fontWeight,\n            lineHeight,\n            textAlign,\n            textShadow,\n            fontFamily,\n            textTransform,\n        };\n    } else {\n        return {};\n    }\n};\n\n// must be nested\nexport const placeholderStyles = (styles: NestedCSSProperties) => {\n    return {\n        \"&::-webkit-input-placeholder\": {\n            $unique: true,\n            ...styles,\n        },\n        \"&::-moz-placeholder\": {\n            $unique: true,\n            ...styles,\n        },\n        \"&::-ms-input-placeholder\": {\n            $unique: true,\n            ...styles,\n        },\n    };\n};\n\nexport const singleLineEllipsis = () => {\n    return {\n        whiteSpace: \"nowrap\" as WhiteSpaceProperty,\n        textOverflow: \"ellipsis\" as TextOverflowProperty,\n        overflowX: \"hidden\" as OverflowXProperty,\n        maxWidth: percent(100) as MaxWidthProperty<TLength>,\n    };\n};\nexport const longWordEllipsis = () => {\n    return {\n        textOverflow: \"ellipsis\" as TextOverflowProperty,\n        overflowX: \"hidden\" as OverflowXProperty,\n        maxWidth: percent(100) as MaxWidthProperty<TLength>,\n    };\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport const getValueIfItExists = (haystack: object | undefined, needle: string, fallback?: any, debug = false) => {\n    if (haystack && checkIfKeyExistsAndIsDefined(haystack, needle)) {\n        return haystack[needle];\n    } else {\n        return fallback;\n    }\n};\n\nexport const checkIfKeyExistsAndIsDefined = (haystack: object, needle: string) => {\n    if (haystack && typeof haystack === \"object\" && !!needle) {\n        return needle in haystack && haystack[needle] !== undefined;\n    } else {\n        return false;\n    }\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { colorOut, ColorValues } from \"@library/styles/styleHelpersColors\";\nimport { BorderRadiusProperty, BorderStyleProperty, BorderWidthProperty } from \"csstype\";\nimport { NestedCSSProperties, TLength } from \"typestyle/lib/types\";\nimport { unit } from \"@library/styles/styleHelpers\";\nimport { globalVariables, IGlobalBorderStyles } from \"@library/styles/globalStyleVars\";\nimport merge from \"lodash/merge\";\nimport { ColorHelper } from \"csx\";\nimport { getValueIfItExists } from \"@library/forms/borderStylesCalculator\";\nimport produce from \"immer\";\n\nexport interface ISimpleBorderStyle {\n    color?: ColorValues | ColorHelper;\n    width?: BorderWidthProperty<TLength>;\n    style?: BorderStyleProperty;\n}\n\nexport interface IBordersWithRadius extends ISimpleBorderStyle {\n    radius?: radiusValue;\n}\n\nexport type radiusValue = BorderRadiusProperty<TLength> | string;\n\nexport type IRadiusValue = IBorderRadiusValue | IRadiusShorthand | IBorderRadiusOutput;\n\ninterface IRadiusFlex {\n    radius?: IRadiusValue;\n}\n\nexport interface IRadiusShorthand {\n    all?: IBorderRadiusValue;\n    top?: IBorderRadiusValue;\n    bottom?: IBorderRadiusValue;\n    left?: IBorderRadiusValue;\n    right?: IBorderRadiusValue;\n}\n\nexport interface IBorderRadiusOutput {\n    borderTopRightRadius?: IBorderRadiusValue;\n    borderTopLeftRadius?: IBorderRadiusValue;\n    borderBottomRightRadius?: IBorderRadiusValue;\n    borderBottomLeftRadius?: IBorderRadiusValue;\n}\n\ntype IRadiusInput = IRadiusShorthand | IBorderRadiusOutput | IRadiusValue;\n\nexport type IBorderRadiusValue = BorderRadiusProperty<TLength> | number | string | undefined;\n\nexport interface IBorderStyles extends ISimpleBorderStyle, IRadiusFlex {\n    all?: ISimpleBorderStyle;\n    topBottom?: ISimpleBorderStyle;\n    leftRight?: ISimpleBorderStyle;\n    top?: ISimpleBorderStyle;\n    bottom?: ISimpleBorderStyle;\n    left?: ISimpleBorderStyle;\n    right?: ISimpleBorderStyle;\n}\n\nconst typeIsStringOrNumber = (variable: unknown): variable is number | string => {\n    if (variable != null) {\n        const type = typeof variable;\n        return type === \"string\" || type === \"number\";\n    } else {\n        return false;\n    }\n};\n\nconst setAllRadii = (radius: BorderRadiusProperty<TLength>) => {\n    return {\n        borderTopRightRadius: radius,\n        borderBottomRightRadius: radius,\n        borderBottomLeftRadius: radius,\n        borderTopLeftRadius: radius,\n    };\n};\n\n/**\n * Main utility function for generation proper border radiuses. Supports numerous shorthand properties.\n *\n * @param radii\n * @param debug\n */\nexport const standardizeBorderRadius = (radii: IRadiusInput, debug = false): IRadiusValue => {\n    if (radii == null) {\n        return;\n    }\n\n    const output: IBorderRadiusOutput = {};\n\n    if (typeIsStringOrNumber(radii)) {\n        const value = unit(radii as number | string);\n        return {\n            borderTopRightRadius: value,\n            borderBottomRightRadius: value,\n            borderBottomLeftRadius: value,\n            borderTopLeftRadius: value,\n        };\n    }\n\n    // Otherwise we need to check all of the values.\n    const all = getValueIfItExists(radii, \"all\");\n    const top = getValueIfItExists(radii, \"top\");\n    const bottom = getValueIfItExists(radii, \"bottom\");\n    const left = getValueIfItExists(radii, \"left\");\n    const right = getValueIfItExists(radii, \"right\");\n\n    if (typeIsStringOrNumber(all)) {\n        merge(output, {\n            borderTopRightRadius: unit(all),\n            borderBottomRightRadius: unit(all),\n            borderBottomLeftRadius: unit(all),\n            borderTopLeftRadius: unit(all),\n        });\n    }\n\n    if (top !== undefined) {\n        const isShorthand = typeIsStringOrNumber(top);\n\n        if (isShorthand) {\n            const value = isShorthand ? unit(top) : top;\n            merge(output, {\n                borderTopRightRadius: value,\n                borderTopLeftRadius: value,\n            });\n        } else {\n            merge(\n                output,\n                right !== undefined ? { borderTopRightRadius: unit(right) } : {},\n                left !== undefined ? { borderTopLeftRadius: unit(left) } : {},\n            );\n        }\n    }\n\n    if (bottom !== undefined) {\n        const isShorthand = typeIsStringOrNumber(bottom);\n\n        if (isShorthand) {\n            const value = isShorthand ? unit(bottom) : bottom;\n            merge(output, {\n                borderBottomRightRadius: value,\n                borderBottomLeftRadius: value,\n            });\n        } else {\n            merge(\n                output,\n                right !== undefined ? { borderBottomRightRadius: unit(right) } : {},\n                left !== undefined ? { borderBottomLeftRadius: unit(left) } : {},\n            );\n        }\n    }\n\n    if (left !== undefined) {\n        const isShorthand = typeIsStringOrNumber(left);\n\n        if (isShorthand) {\n            const value = isShorthand ? unit(left) : left;\n            merge(output, {\n                borderTopLeftRadius: value,\n                borderBottomLeftRadius: value,\n            });\n        } else {\n            const topStyles = top !== undefined ? { borderBottomRightRadius: unit(top) } : {};\n            const bottomStyles = bottom !== undefined ? { borderBottomLeftRadius: unit(bottom) } : {};\n            merge(\n                output,\n                !typeIsStringOrNumber(topStyles) ? topStyles : {},\n                !typeIsStringOrNumber(bottomStyles) ? bottomStyles : {},\n            );\n        }\n    }\n    if (right !== undefined) {\n        const isShorthand = typeIsStringOrNumber(right);\n\n        if (isShorthand) {\n            const value = isShorthand ? unit(right) : right;\n            merge(output, {\n                borderTopRightRadius: value,\n                borderBottomRightRadius: value,\n            });\n        } else {\n            const topStyles = top !== undefined ? { borderBottomRightRadius: unit(top) } : {};\n            const bottomStyles = bottom !== undefined ? { borderBottomLeftRadius: unit(bottom) } : {};\n            merge(\n                output,\n                !typeIsStringOrNumber(topStyles) ? topStyles : {},\n                !typeIsStringOrNumber(bottomStyles) ? bottomStyles : {},\n            );\n        }\n    }\n\n    const borderTopRightRadius = getValueIfItExists(radii, \"borderTopRightRadius\");\n    if (borderTopRightRadius !== undefined) {\n        merge(output, {\n            borderTopRightRadius: unit(borderTopRightRadius),\n        });\n    }\n    const borderTopLeftRadius = getValueIfItExists(radii, \"borderTopLeftRadius\");\n    if (borderTopLeftRadius !== undefined) {\n        merge(output, {\n            borderTopLeftRadius: unit(borderTopLeftRadius),\n        });\n    }\n    const borderBottomRightRadius = getValueIfItExists(radii, \"borderBottomRightRadius\");\n    if (borderBottomRightRadius !== undefined) {\n        merge(output, {\n            borderBottomRightRadius: unit(borderBottomRightRadius),\n        });\n    }\n    const borderBottomLeftRadius = getValueIfItExists(radii, \"borderBottomLeftRadius\");\n    if (borderBottomLeftRadius !== undefined) {\n        merge(output, {\n            borderBottomLeftRadius: unit(borderBottomLeftRadius),\n        });\n    }\n\n    return output;\n};\n\nexport const borderRadii = (radii: IRadiusValue, fallbackRadii = globalVariables().border.radius) => {\n    const output: IBorderRadiusOutput = {};\n\n    if (typeIsStringOrNumber(fallbackRadii)) {\n        merge(output, setAllRadii(unit(fallbackRadii as any) as any));\n    } else {\n        merge(output, typeIsStringOrNumber(fallbackRadii) ? fallbackRadii : fallbackRadii);\n    }\n\n    const hasRadiusShorthand = typeIsStringOrNumber(radii);\n    const hasRadiusShorthandFallback = typeIsStringOrNumber(fallbackRadii);\n\n    // Make sure we have a value before overwriting.\n    if (hasRadiusShorthand) {\n        merge(output, setAllRadii(unit(radii as any) as any));\n    } else if (hasRadiusShorthandFallback) {\n        merge(output, setAllRadii(unit(fallbackRadii as any) as any));\n    } else {\n        // our fallback must be an object.\n        merge(output, standardizeBorderRadius(fallbackRadii as any));\n    }\n    merge(output, standardizeBorderRadius(radii as any));\n    return output as NestedCSSProperties;\n};\n\nconst setAllBorders = (\n    color: ColorValues,\n    width: BorderWidthProperty<TLength>,\n    style: BorderStyleProperty,\n    radius?: IBorderRadiusOutput,\n    debug = false,\n) => {\n    const output = {};\n\n    if (color !== undefined) {\n        merge(output, {\n            borderTopColor: colorOut(color),\n            borderRightColor: colorOut(color),\n            borderBottomColor: colorOut(color),\n            borderLeftColor: colorOut(color),\n        });\n    }\n\n    if (width !== undefined) {\n        merge(output, {\n            borderTopWidth: unit(width),\n            borderRightWidth: unit(width),\n            borderBottomWidth: unit(width),\n            borderLeftWidth: unit(width),\n        });\n    }\n\n    if (style !== undefined) {\n        merge(output, {\n            borderTopStyle: style,\n            borderRightStyle: style,\n            borderBottomStyle: style,\n            borderLeftStyle: style,\n        });\n    }\n\n    if (typeof radius === \"object\") {\n        merge(output, radius);\n    }\n\n    return output;\n};\n\nconst singleBorderStyle = (\n    borderStyles: ISimpleBorderStyle,\n    fallbackVariables: IGlobalBorderStyles = globalVariables().border,\n) => {\n    if (!borderStyles) {\n        return;\n    }\n    const { color, width, style } = borderStyles;\n    const output: ISimpleBorderStyle = {};\n    output.color = colorOut(borderStyles.color ? borderStyles.color : color) as ColorValues;\n    output.width = unit(borderStyles.width ? borderStyles.width : width) as BorderWidthProperty<TLength>;\n    output.style = borderStyles.style ? borderStyles.style : (style as BorderStyleProperty);\n\n    if (Object.keys(output).length > 0) {\n        return output;\n    } else {\n        return;\n    }\n};\n\nexport const borders = (\n    detailedStyles?: IBorderStyles | ISimpleBorderStyle | undefined,\n    fallbackBorderVariables: IGlobalBorderStyles = globalVariables().border,\n    debug = false,\n): NestedCSSProperties => {\n    const output: NestedCSSProperties = {};\n\n    const style = getValueIfItExists(detailedStyles, \"style\", fallbackBorderVariables.style);\n    const color = getValueIfItExists(detailedStyles, \"color\", fallbackBorderVariables.color);\n    const width = getValueIfItExists(detailedStyles, \"width\", fallbackBorderVariables.width);\n    const radius = getValueIfItExists(detailedStyles, \"radius\", fallbackBorderVariables.radius);\n    const defaultsAll = setAllBorders(color, width, style, radius, debug);\n\n    merge(output, defaultsAll);\n\n    // Now we are sure to not have simple styles anymore.\n    detailedStyles = detailedStyles as IBorderStyles;\n    if (!detailedStyles) {\n        detailedStyles = fallbackBorderVariables;\n    }\n\n    const top = getValueIfItExists(detailedStyles, \"top\");\n    if (top !== undefined) {\n        const topStyles = singleBorderStyle(top, fallbackBorderVariables);\n        if (topStyles !== undefined) {\n            output.borderTopWidth = getValueIfItExists(topStyles, \"width\", width);\n            output.borderTopStyle = getValueIfItExists(topStyles, \"style\", style);\n            output.borderTopColor = getValueIfItExists(topStyles, \"color\", color);\n        }\n    }\n\n    const right = getValueIfItExists(detailedStyles, \"right\");\n    if (right !== undefined) {\n        const rightStyles = singleBorderStyle(right, fallbackBorderVariables);\n        if (rightStyles !== undefined) {\n            output.borderRightWidth = getValueIfItExists(rightStyles, \"width\", width);\n            output.borderRightStyle = getValueIfItExists(rightStyles, \"style\", style);\n            output.borderRightColor = getValueIfItExists(rightStyles, \"color\", color);\n        }\n    }\n\n    const bottom = getValueIfItExists(detailedStyles, \"bottom\");\n    if (bottom !== undefined) {\n        const bottomStyles = singleBorderStyle(bottom, fallbackBorderVariables);\n        if (bottomStyles !== undefined) {\n            output.borderBottomWidth = getValueIfItExists(bottomStyles, \"width\", width);\n            output.borderBottomStyle = getValueIfItExists(bottomStyles, \"style\", style);\n            output.borderBottomColor = getValueIfItExists(bottomStyles, \"color\", color);\n        }\n    }\n\n    const left = getValueIfItExists(detailedStyles, \"left\");\n    if (left !== undefined) {\n        const leftStyles = singleBorderStyle(left, fallbackBorderVariables);\n        if (leftStyles !== undefined) {\n            output.borderLeftWidth = getValueIfItExists(leftStyles, \"width\", width);\n            output.borderLeftStyle = getValueIfItExists(leftStyles, \"style\", style);\n            output.borderLeftColor = getValueIfItExists(leftStyles, \"color\", color);\n        }\n    }\n\n    const detailedRadius = getValueIfItExists(detailedStyles, \"radius\", radius);\n\n    merge(output, standardizeBorderRadius(detailedRadius));\n\n    return output;\n};\n\nexport const singleBorder = (styles?: ISimpleBorderStyle) => {\n    const vars = globalVariables();\n    const borderStyles = styles !== undefined ? styles : {};\n    return `${borderStyles.style ? borderStyles.style : vars.border.style} ${\n        borderStyles.color ? colorOut(borderStyles.color) : colorOut(vars.border.color)\n    } ${borderStyles.width ? unit(borderStyles.width) : unit(vars.border.width)}` as any;\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { buttonGlobalVariables, buttonResetMixin, buttonSizing } from \"@library/forms/buttonStyles\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { IButtonType } from \"@library/forms/styleHelperButtonInterface\";\nimport { borders } from \"@library/styles/styleHelpersBorders\";\nimport { colorOut } from \"@library/styles/styleHelpersColors\";\nimport { fonts } from \"@library/styles/styleHelpersTypography\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { percent } from \"csx\";\nimport merge from \"lodash/merge\";\nimport { NestedCSSProperties } from \"typestyle/lib/types\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport cloneDeep from \"lodash/cloneDeep\";\n\nexport const generateButtonStyleProperties = (buttonTypeVars: IButtonType, setZIndexOnState = false) => {\n    const formElVars = formElementsVariables();\n    const buttonGlobals = buttonGlobalVariables();\n    const zIndex = setZIndexOnState ? 1 : undefined;\n    const buttonDimensions = buttonTypeVars.sizing || false;\n\n    // Make sure we have the second level, if it was empty\n    buttonTypeVars = merge(\n        {\n            colors: {},\n            hover: {},\n            focus: {},\n            active: {},\n            borders: {},\n            focusAccessible: {},\n        },\n        buttonTypeVars,\n    );\n\n    // Remove debug and fallback\n    const defaultBorder = borders(buttonTypeVars.borders, globalVariables().border);\n\n    const hoverBorder =\n        buttonTypeVars.hover && buttonTypeVars.hover.borders\n            ? merge(cloneDeep(defaultBorder), borders(buttonTypeVars.hover.borders))\n            : {};\n\n    const activeBorder =\n        buttonTypeVars.active && buttonTypeVars.active.borders\n            ? merge(cloneDeep(defaultBorder), borders(buttonTypeVars.active.borders))\n            : {};\n\n    const focusBorder =\n        buttonTypeVars.focus && buttonTypeVars.focus.borders\n            ? merge(cloneDeep(defaultBorder), borders(buttonTypeVars.focus && buttonTypeVars.focus.borders))\n            : defaultBorder;\n\n    const focusAccessibleBorder =\n        buttonTypeVars.focusAccessible && buttonTypeVars.focusAccessible.borders\n            ? merge(cloneDeep(defaultBorder), borders(buttonTypeVars.focusAccessible.borders))\n            : {};\n\n    const result: NestedCSSProperties = {\n        ...buttonResetMixin(),\n        textOverflow: \"ellipsis\",\n        overflow: \"hidden\",\n        maxWidth: percent(100),\n        color: colorOut(\n            buttonTypeVars.colors && buttonTypeVars.colors.fg ? buttonTypeVars.colors.fg : buttonGlobals.colors.fg,\n        ),\n        backgroundColor: colorOut(\n            buttonTypeVars.colors && buttonTypeVars.colors.bg ? buttonTypeVars.colors.bg : buttonGlobals.colors.bg,\n        ),\n        ...fonts({\n            ...buttonGlobals.font,\n            ...buttonTypeVars.fonts,\n        }),\n        ...defaultBorder,\n        ...buttonSizing(\n            buttonDimensions && buttonDimensions.minHeight\n                ? buttonDimensions.minHeight\n                : buttonGlobals.sizing.minHeight,\n            buttonDimensions && buttonDimensions.minWidth ? buttonDimensions.minWidth : buttonGlobals.sizing.minWidth,\n            buttonTypeVars.fonts && buttonTypeVars.fonts.size ? buttonTypeVars.fonts.size : buttonGlobals.font.size,\n            buttonTypeVars.padding && buttonTypeVars.padding.side\n                ? buttonTypeVars.padding.side\n                : buttonGlobals.padding.side,\n            formElVars,\n        ),\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        position: \"relative\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        justifyContent: \"center\",\n        touchAction: \"manipulation\",\n        cursor: \"pointer\",\n        minWidth: buttonGlobals.sizing.minWidth,\n        minHeight: buttonGlobals.sizing.minHeight,\n        $nest: {\n            \"&:not([disabled])\": {\n                $nest: {\n                    \"&:not(.focus-visible)\": {\n                        outline: 0,\n                    },\n                    \"&:hover\": {\n                        zIndex,\n                        color: colorOut(\n                            buttonTypeVars.hover && buttonTypeVars.hover.colors && buttonTypeVars.hover.colors.fg\n                                ? buttonTypeVars.hover.colors.fg\n                                : undefined,\n                        ),\n                        backgroundColor: colorOut(\n                            buttonTypeVars.hover && buttonTypeVars.hover.colors && buttonTypeVars.hover.colors.bg\n                                ? buttonTypeVars.hover.colors.bg\n                                : undefined,\n                        ),\n                        ...fonts(buttonTypeVars.hover && buttonTypeVars.hover.fonts ? buttonTypeVars.hover.fonts : {}),\n                        ...hoverBorder,\n                    },\n                    \"&:focus\": {\n                        zIndex,\n                        color: colorOut(\n                            buttonTypeVars.focus!.colors && buttonTypeVars.focus!.colors.fg\n                                ? buttonTypeVars.focus!.colors.fg\n                                : undefined,\n                        ),\n                        backgroundColor: colorOut(\n                            buttonTypeVars.focus!.colors && buttonTypeVars.focus!.colors.bg\n                                ? buttonTypeVars.focus!.colors.bg\n                                : undefined,\n                        ),\n\n                        ...fonts(buttonTypeVars.focus && buttonTypeVars.focus.fonts ? buttonTypeVars.focus.fonts : {}),\n                        ...focusBorder,\n                    },\n                    \"&:active\": {\n                        zIndex,\n                        color: colorOut(\n                            buttonTypeVars.active!.colors && buttonTypeVars.active!.colors.fg\n                                ? buttonTypeVars.active!.colors.fg\n                                : undefined,\n                        ),\n                        backgroundColor: colorOut(\n                            buttonTypeVars.active!.colors && buttonTypeVars.active!.colors.bg\n                                ? buttonTypeVars.active!.colors.bg\n                                : undefined,\n                        ),\n                        ...fonts(\n                            buttonTypeVars.active && buttonTypeVars.active.fonts ? buttonTypeVars.active.fonts : {},\n                        ),\n                        ...activeBorder,\n                    },\n                    \"&.focus-visible\": {\n                        zIndex,\n                        color: colorOut(\n                            buttonTypeVars.focusAccessible!.colors && buttonTypeVars.focusAccessible!.colors.fg\n                                ? buttonTypeVars.focusAccessible!.colors.fg\n                                : undefined,\n                        ),\n                        backgroundColor: colorOut(\n                            buttonTypeVars.focusAccessible!.colors && buttonTypeVars.focusAccessible!.colors.bg\n                                ? buttonTypeVars.focusAccessible!.colors.bg\n                                : undefined,\n                        ),\n                        ...fonts(\n                            buttonTypeVars.focusAccessible && buttonTypeVars.focusAccessible.fonts\n                                ? buttonTypeVars.focusAccessible.fonts\n                                : {},\n                        ),\n                        ...focusAccessibleBorder,\n                    },\n                },\n            },\n            \"&[disabled]\": {\n                opacity: formElVars.disabled.opacity,\n            },\n        },\n    };\n\n    return result;\n};\nconst generateButtonClass = (buttonTypeVars: IButtonType, setZIndexOnState = false) => {\n    const style = styleFactory(`button-${buttonTypeVars.name}`);\n    return style(generateButtonStyleProperties(buttonTypeVars, setZIndexOnState));\n};\n\nexport default generateButtonClass;\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { allLinkStates, colorOut, margins, unit } from \"@library/styles/styleHelpers\";\nimport { calc } from \"csx\";\n\nexport const metasVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"metas\");\n\n    const fonts = makeThemeVars(\"fonts\", {\n        size: globalVars.fonts.size.small,\n    });\n\n    const colors = makeThemeVars(\"color\", {\n        fg: globalVars.mixBgAndFg(0.85),\n        hover: {\n            fg: globalVars.links.colors.active,\n        },\n        focus: {\n            fg: globalVars.links.colors.active,\n        },\n        active: {\n            fg: globalVars.links.colors.active,\n        },\n        deleted: globalVars.messageColors.deleted,\n    });\n\n    const text = makeThemeVars(\"text\", {\n        margin: 4,\n        lineHeight: globalVars.lineHeights.base,\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        verticalMargin: 24,\n        default: globalVars.gutter.quarter,\n    });\n\n    return {\n        fonts,\n        colors,\n        text,\n        spacing,\n    };\n});\n\nexport const metasClasses = useThemeCache(() => {\n    const vars = metasVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"metas\");\n\n    const root = style({\n        display: \"block\",\n        lineHeight: globalVars.lineHeights.meta,\n        color: colorOut(vars.colors.fg),\n        width: calc(`100% + ${unit(vars.spacing.default * 2)}`),\n        overflow: \"hidden\",\n        textAlign: \"left\",\n        ...margins({\n            left: -vars.spacing.default,\n            right: vars.spacing.default,\n        }),\n        $nest: {\n            a: {\n                ...allLinkStates({\n                    allStates: {\n                        textShadow: \"none\",\n                    },\n                    noState: {\n                        color: colorOut(vars.colors.fg),\n                    },\n                    hover: {\n                        color: colorOut(vars.colors.hover.fg),\n                    },\n                    focus: {\n                        color: colorOut(vars.colors.focus.fg),\n                    },\n                    active: {\n                        color: colorOut(vars.colors.active.fg),\n                    },\n                }),\n            },\n            \"&.isFlexed\": {\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                justifyContent: \"flex-start\",\n                alignItems: \"center\",\n            },\n        },\n    });\n\n    const meta = style(\"meta\", {\n        display: \"inline-block\",\n        fontSize: unit(vars.fonts.size),\n        color: colorOut(vars.colors.fg),\n        ...margins({\n            top: 0,\n            right: vars.spacing.default,\n            bottom: 0,\n            left: vars.spacing.default,\n        }),\n        $nest: {\n            \"& &\": {\n                margin: 0,\n            },\n        },\n    });\n\n    // Get styles of meta, without the margins\n    const metaStyle = style(\"metaStyles\", {\n        display: \"inline-block\",\n        fontSize: unit(vars.fonts.size),\n        color: colorOut(vars.colors.fg),\n    });\n\n    const draftStatus = style(\"draftStatus\", {\n        flexGrow: 1,\n        textAlign: \"left\",\n    });\n\n    return {\n        root,\n        meta,\n        metaStyle,\n        draftStatus,\n    };\n});\n","/**\n * A module to isolate meta data passed from the server into a single dependency.\n * This should always be used instead of accessing window.gdn directly.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\ninterface IGdn {\n    meta: AnyObject;\n    permissions: AnyObject;\n    translations: AnyObject;\n    [key: string]: any;\n}\n\n/** The gdn object may be set in an inline script in the head of the document. */\nconst gdn = window.gdn || {};\n\nif (!(\"meta\" in gdn)) {\n    gdn.meta = {};\n}\n\nif (!(\"permissions\" in gdn)) {\n    gdn.permissions = {};\n}\n\nif (!(\"translations\" in gdn)) {\n    gdn.translations = {};\n}\n\nexport default gdn as IGdn;\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { t } from \"@library/utility/appUtils\";\nimport classNames from \"classnames\";\nimport { AttachmentType } from \"@library/content/attachments/AttatchmentType\";\nimport { iconClasses } from \"@library/icons/iconClasses\";\n\nconst currentColorFill = {\n    fill: \"currentColor\",\n};\n\nexport function FileTypeGenericIcon(props: { className?: string; fileType?: string }) {\n    const title = props.fileType ? props.fileType : t(\"File\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-fileGeneric\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={title}\n        >\n            <title>{title}</title>\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#777b81\" }} />\n            <path\n                d=\"M11.5,6v4a3.418,3.418,0,0,1-3.334,3.5H8a3.418,3.418,0,0,1-3.5-3.334c0-.055,0-.111,0-.166V5A2.362,2.362,0,0,1,6.715,2.5,2.259,2.259,0,0,1,7,2.5,2.362,2.362,0,0,1,9.5,4.715,2.258,2.258,0,0,1,9.5,5V9.5c0,1-.5,2-1.5,2s-1.5-1-1.5-2V6\"\n                style={{ fill: \"none\", stroke: \"#f1f2f2\", strokeLinecap: \"round\" }}\n            />\n        </svg>\n    );\n}\n\nexport function FileTypeWordIcon(props: { className?: string }) {\n    const title = t(\"Word\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-fileWord\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.WORD)}\n        >\n            <title>{title}</title>\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#0175fc\" }} />\n            <rect x=\"3\" y=\"3\" width=\"10\" height=\"1\" style={{ fill: \"#cce3fe\" }} />\n            <rect x=\"3\" y=\"5\" width=\"10\" height=\"1\" style={{ fill: \"#cce3fe\" }} />\n            <rect x=\"3\" y=\"12\" width=\"10\" height=\"1\" style={{ fill: \"#cce3fe\" }} />\n            <rect x=\"3\" y=\"10\" width=\"10\" height=\"1\" style={{ fill: \"#cce3fe\" }} />\n            <rect x=\"3\" y=\"7\" width=\"6\" height=\"1\" style={{ fill: \"#cce3fe\" }} />\n        </svg>\n    );\n}\n\nexport function FileTypeExcelIcon(props: { className?: string }) {\n    const title = t(\"Excel\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-fileExcel\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.EXCEL)}\n        >\n            <title>{title}</title>\n            <rect width=\"16\" height=\"16\" fill=\"#2f7d32\" />\n            <polygon\n                style={{ fill: \"#fff\" }}\n                points=\"9.334 10.361 7.459 13.543 6 13.543 8.613 9.166 6.164 5 7.629 5 9.334 7.965 11.039 5 12.498 5 10.055 9.166 12.668 13.543 11.203 13.543 9.334 10.361\"\n            />\n        </svg>\n    );\n}\n\nexport function FileTypePDFIcon(props: { className?: string }) {\n    const unabbreviatedType = t(AttachmentType.PDF);\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-filePDF\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.PDF)}\n        >\n            <title>\n                <abbr title={unabbreviatedType || undefined}>{AttachmentType.PDF}</abbr>\n            </title>\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#c80000\" }} />\n            <path\n                d=\"M2.5,11V8.5m4.5,2v-5H8q1.5,0,1.5,2.143v.714Q9.5,10.5,8,10.5Zm-4.5-2v-3h1Q5,5.5,5,6.786v.428Q5,8.5,3.5,8.5Z\"\n                style={{ stroke: \"#fff\", fill: \"none\" }}\n            />\n            <polygon\n                points=\"11 11 11 5 14 5 14 6 12.007 6 12 7.5 13.493 7.5 13.493 8.5 12 8.5 12 11 11 11\"\n                style={{ fill: \"#fff\" }}\n            />\n        </svg>\n    );\n}\n\nexport function FileTypeImageIcon(props: { className?: string }) {\n    const title = t(\"Image\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-fileImage\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.IMAGE)}\n        >\n            <title>{title}</title>\n\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#c80090\" }} />\n            <path\n                d=\"M3,12.5a1,1,0,0,1-1-1V6A1,1,0,0,1,3,5h.5V4.75a.25.25,0,0,1,.25-.25h.5a.25.25,0,0,1,.25.25V5a.81.81,0,0,0,.724-.447l.5-1A1,1,0,0,1,6.618,3H9.382a1,1,0,0,1,.894.553l.448.894A1,1,0,0,0,11.618,5H13a1,1,0,0,1,1,1v5.5a1,1,0,0,1-1,1Zm5-2a2,2,0,1,1,2-2A2,2,0,0,1,8,10.5Zm0,1a3,3,0,1,0-3-3A3,3,0,0,0,8,11.5ZM11.5,6V7H13V6Z\"\n                style={{ fill: \"#fff\", fillOpacity: 0.97 }}\n            />\n        </svg>\n    );\n}\n\nexport function FileTypePowerPointIcon(props: { className?: string }) {\n    const textFill = \"#fff\";\n    const title = t(\"PPT\");\n    const unabbreviatedType = t(AttachmentType.PPT);\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-filePowerPoint\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.IMAGE)}\n        >\n            <title>\n                {unabbreviatedType ? <abbr title={unabbreviatedType}>{AttachmentType.PDF}</abbr> : AttachmentType.PDF}\n            </title>\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#ee6a01\" }} />\n            <path d=\"M8,4V7.5h3.55A3.5,3.5,0,1,1,8,4Z\" style={{ fill: \"#fbe1cc\" }} />\n            <path d=\"M9,3h.05a3.5,3.5,0,0,1,3.5,3.5H9Z\" style={{ fill: \"#fbe1cc\" }} />\n            <rect x=\"3\" y=\"12\" width=\"10\" height=\"1\" style={{ fill: \"#fbe1cc\" }} />\n        </svg>\n    );\n}\n\nexport function FileTypeZipIcon(props: { className?: string }) {\n    const title = t(\"Zip\");\n    const unabbreviatedType = t(AttachmentType.ARCHIVE);\n    const barStyle = { fill: \"#fff\", fillOpacity: 0.9 };\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-fileZip\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.IMAGE)}\n        >\n            <title>\n                {unabbreviatedType ? <abbr title={unabbreviatedType}>{AttachmentType.PDF}</abbr> : AttachmentType.PDF}\n            </title>\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#eeb601\" }} />\n            <path\n                d=\"M6,7.5h4l.45,4.955A.5.5,0,0,1,10,13H6.054a.5.5,0,0,1-.5-.5.338.338,0,0,1,0-.045Zm.99,3a.149.149,0,0,0-.149.14l-.08,1.2v.01a.15.15,0,0,0,.15.15H9.1a.149.149,0,0,0,.139-.16l-.08-1.2a.149.149,0,0,0-.149-.14Z\"\n                style={{ fill: \"#fdf7e6\" }}\n            />\n            <rect x=\"6\" y=\"6\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"8\" y=\"5\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"6\" y=\"4\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"8\" y=\"3\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"6\" y=\"2\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"8\" y=\"1\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"6\" width=\"2\" height=\"1\" style={barStyle} />\n        </svg>\n    );\n}\n\nexport function AttachmentErrorIcon(props: { className?: string }) {\n    const title = t(\"Error\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 20 18\"\n            className={classNames(\"attachmentIcon-error\", classes.attachmentError, props.className)}\n            role=\"img\"\n            aria-label={title}\n        >\n            <title>{title}</title>\n            <path\n                d=\"M.9,18a.917.917,0,0,1-.9-.86.9.9,0,0,1,.107-.449L9.17.474A.976.976,0,0,1,10.445.107a.906.906,0,0,1,.381.36V.474l9.061,16.215a.889.889,0,0,1-.378,1.2l-.036.018a.951.951,0,0,1-.416.093Zm.021-1ZM9.985,1.012,1.081,17H18.919Z\"\n                fill=\"currentColor\"\n            />\n            <path d=\"M9,8.4V6h2V8.4L10.8,12H9.3ZM9,13h2v2H9Z\" fill=\"currentColor\" />\n        </svg>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport {\n    borders,\n    colorOut,\n    fonts,\n    margins,\n    paddings,\n    buttonStates,\n    unit,\n    userSelect,\n} from \"@library/styles/styleHelpers\";\nimport { shadowHelper, shadowOrBorderBasedOnLightness } from \"@library/styles/shadowHelpers\";\nimport { NestedCSSProperties, TLength } from \"typestyle/lib/types\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { important, percent } from \"csx\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { buttonResetMixin } from \"@library/forms/buttonStyles\";\n\nexport const notUserContent = \"u-notUserContent\";\n\nexport const dropDownVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"dropDown\");\n\n    const sizing = makeThemeVars(\"sizing\", {\n        widths: {\n            default: 250,\n            medium: 350,\n        },\n        minHeight: 600,\n    });\n\n    const spacer = makeThemeVars(\"spacer\", {\n        margin: {\n            vertical: 8,\n        },\n    });\n\n    const metas = makeThemeVars(\"metas\", {\n        font: {\n            size: globalVars.meta.text.fontSize,\n            color: globalVars.meta.text.color,\n        },\n        padding: {\n            vertical: 6,\n            horizontal: 14,\n        },\n    });\n\n    const item = makeThemeVars(\"item\", {\n        colors: {\n            fg: globalVars.mainColors.fg,\n        },\n        minHeight: 30,\n        mobile: {\n            minHeight: 44,\n            fontSize: 16,\n        },\n\n        padding: {\n            top: 6,\n        },\n    });\n\n    const sectionTitle = makeThemeVars(\"sectionTitle\", {\n        padding: {\n            top: 6,\n            bottom: 6,\n        },\n    });\n\n    const title = makeThemeVars(\"title\", {\n        color: globalVars.mainColors.fg,\n    });\n\n    const contents = makeThemeVars(\"contents\", {\n        bg: globalVars.mainColors.bg,\n        fg: globalVars.mainColors.fg,\n        border: {\n            radius: globalVars.border.radius,\n            color: globalVars.border.color,\n        },\n        padding: {\n            vertical: 9,\n            horizontal: 16,\n        },\n    });\n\n    return {\n        sizing,\n        metas,\n        item,\n        sectionTitle,\n        spacer,\n        title,\n        contents,\n    };\n});\n\nexport const dropDownClasses = useThemeCache(() => {\n    const vars = dropDownVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"dropDown\");\n    const shadows = shadowHelper();\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const root = style({\n        position: \"relative\",\n    });\n\n    const contents = style(\"contents\", {\n        position: \"absolute\",\n        minWidth: unit(vars.sizing.widths.default),\n        backgroundColor: colorOut(vars.contents.bg),\n        color: colorOut(vars.contents.fg),\n        overflow: \"auto\",\n        ...shadowOrBorderBasedOnLightness(vars.contents.bg, borders({}), shadows.dropDown()),\n        ...borders(vars.contents.border),\n        $nest: {\n            \"&&\": {\n                zIndex: 3,\n            },\n            \"&.isMedium\": {\n                width: unit(vars.sizing.widths.medium),\n            },\n            \"&.isParentWidth\": {\n                minWidth: \"initial\",\n            },\n            \"&.isOwnWidth\": {\n                width: \"initial\",\n            },\n            \"&.isRightAligned\": {\n                right: 0,\n                top: 0,\n            },\n            \"& .frame\": {\n                boxShadow: \"none\",\n            },\n            \"&.noMinWidth\": {\n                minWidth: 0,\n            },\n            \"&.hasVerticalPadding\": {\n                ...paddings({\n                    vertical: 12,\n                    horizontal: important(0),\n                }),\n            },\n        },\n    } as NestedCSSProperties);\n\n    const asModal = style(\"asModal\", {\n        $nest: {\n            \"&.hasVerticalPadding\": paddings({\n                vertical: 12,\n            }),\n        },\n    });\n\n    const likeDropDownContent = style(\"likeDropDownContent\", {\n        ...shadows.dropDown(),\n        backgroundColor: colorOut(globalVars.mainColors.bg),\n        ...borders(),\n    } as NestedCSSProperties);\n\n    const items = style(\"items\", {\n        fontSize: unit(globalVars.fonts.size.medium),\n    });\n\n    const metaItems = style(\"metaItems\", {\n        $nest: {\n            \"&&\": {\n                display: \"block\",\n            },\n        },\n        ...paddings(vars.metas.padding),\n    });\n\n    const metaItem = style(\"metaItem\", {\n        $nest: {\n            \"& + &\": {\n                paddingTop: unit(vars.item.padding.top),\n            },\n        },\n        ...fonts(vars.metas.font),\n    });\n\n    // wrapping element\n    const item = style(\"item\", {\n        ...userSelect(\"none\"),\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        width: percent(100),\n        margin: 0,\n        color: \"inherit\",\n        textAlign: \"left\",\n        lineHeight: globalVars.lineHeights.condensed,\n    });\n\n    const section = style(\"section\", {\n        display: \"block\",\n    });\n\n    const toggleButtonIcon = style(\"toggleButtonIcon\", {\n        $nest: {\n            ...buttonStates({\n                allStates: {\n                    color: colorOut(globalVars.mainColors.primary),\n                },\n            }),\n        },\n    });\n\n    // Contents (button or link)\n    // Replaces: .dropDownItem-button, .dropDownItem-link\n    const action = style(\"action\", {\n        $nest: {\n            \"&&\": {\n                ...buttonResetMixin(),\n                cursor: \"pointer\",\n                appearance: \"none\",\n                display: \"flex\",\n                alignItems: \"center\",\n                width: percent(100),\n                textAlign: \"left\",\n                minHeight: unit(vars.item.minHeight),\n                lineHeight: unit(globalVars.lineHeights.condensed),\n                ...paddings({\n                    vertical: 4,\n                    horizontal: 14,\n                }),\n                ...borders({\n                    color: \"transparent\",\n                    radius: 0,\n                }),\n                color: colorOut(vars.item.colors.fg),\n                ...userSelect(\"none\"),\n                ...buttonStates({\n                    allStates: {\n                        textShadow: \"none\",\n                        outline: 0,\n                    },\n                    hover: {\n                        backgroundColor: colorOut(globalVars.states.hover.color),\n                    },\n                    focus: {\n                        backgroundColor: colorOut(globalVars.states.focus.color),\n                    },\n                    active: {\n                        backgroundColor: colorOut(globalVars.states.active.color),\n                    },\n                    accessibleFocus: {\n                        borderColor: colorOut(globalVars.mainColors.primary),\n                    },\n                }),\n                ...mediaQueries.oneColumnDown({\n                    fontSize: unit(vars.item.mobile.fontSize),\n                    fontWeight: globalVars.fonts.weights.semiBold,\n                    minHeight: unit(vars.item.mobile.minHeight),\n                }),\n            },\n        },\n    });\n\n    const text = style(\"text\", {\n        display: \"block\",\n    });\n\n    const separator = style(\"separator\", {\n        listStyle: \"none\",\n        height: unit(globalVars.separator.size),\n        backgroundColor: colorOut(globalVars.separator.color),\n        ...margins(vars.spacer.margin),\n    });\n\n    const sectionHeading = style(\"sectionHeading\", {\n        color: colorOut(globalVars.meta.text.color),\n        fontSize: unit(globalVars.fonts.size.small),\n        textTransform: \"uppercase\",\n        textAlign: \"center\",\n        fontWeight: globalVars.fonts.weights.semiBold,\n        ...(paddings(vars.sectionTitle.padding) as NestedCSSProperties),\n    });\n\n    const sectionContents = style(\"sectionContents\", {\n        display: \"block\",\n    });\n\n    const count = style(\"count\", {\n        fontSize: unit(globalVars.fonts.size.small),\n        paddingLeft: \"1em\",\n        marginLeft: \"auto\",\n    });\n\n    const verticalPadding = style(\n        \"verticalPadding\",\n        {\n            ...paddings({\n                vertical: vars.contents.padding.vertical,\n                horizontal: 0,\n            }),\n        },\n        mediaQueries.oneColumnDown({\n            ...paddings({\n                vertical: 0,\n            }),\n        }),\n    );\n\n    const noVerticalPadding = style(\"noVerticalPadding\", {\n        ...paddings({ vertical: 0 }),\n    });\n\n    const title = style(\"title\", {\n        ...fonts({\n            weight: globalVars.fonts.weights.semiBold,\n            size: globalVars.fonts.size.medium,\n            lineHeight: globalVars.lineHeights.condensed,\n        }),\n        ...paddings({\n            all: 0,\n        }),\n        ...margins({\n            all: 0,\n        }),\n        textAlign: \"left\",\n        flexGrow: 1,\n        color: colorOut(vars.title.color),\n    });\n\n    const paddedFrame = style(\"paddedFrame\", {\n        ...paddings(vars.contents.padding),\n    });\n\n    return {\n        root,\n        contents,\n        asModal,\n        likeDropDownContent,\n        items,\n        metaItems,\n        metaItem,\n        item,\n        section,\n        toggleButtonIcon,\n        action,\n        text,\n        separator,\n        sectionHeading,\n        sectionContents,\n        count,\n        verticalPadding,\n        title,\n        noVerticalPadding,\n        paddedFrame,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { ReactNode } from \"react\";\nimport ErrorMessages from \"@library/forms/ErrorMessages\";\nimport { getRequiredID, IOptionalComponentID } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport Paragraph from \"@library/layout/Paragraph\";\nimport { IFieldError } from \"@library/@types/api/core\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\n\nexport enum InputTextBlockBaseClass {\n    STANDARD = \"inputBlock\",\n    CUSTOM = \"\",\n}\n\ninterface ICallbackProps {\n    labelID: string;\n    hasErrors: boolean;\n    errorID: string;\n}\ntype CallbackChildren = (props: ICallbackProps) => React.ReactNode;\n\nexport interface IInputBlockProps extends IOptionalComponentID {\n    label?: ReactNode;\n    legend?: boolean;\n    children: React.ReactNode | CallbackChildren;\n    className?: string;\n    wrapClassName?: string;\n    labelClassName?: string;\n    noteAfterInput?: string;\n    labelNote?: string;\n    labelID?: string;\n    descriptionID?: string;\n    errors?: IFieldError[];\n    baseClass?: InputTextBlockBaseClass;\n    legacyMode?: boolean;\n}\n\ninterface IState {\n    id: string;\n}\n\nexport default class InputBlock extends React.Component<IInputBlockProps, IState> {\n    public static defaultProps = {\n        errors: [],\n        baseClass: InputTextBlockBaseClass.STANDARD,\n    };\n\n    public constructor(props: IInputBlockProps) {\n        super(props);\n        this.state = {\n            id: getRequiredID(props, \"inputText\") as string,\n        };\n    }\n\n    public render() {\n        const { label, legend } = this.props;\n        const classesInputBlock = inputBlockClasses();\n        const componentClasses = classNames(\n            this.props.baseClass === InputTextBlockBaseClass.STANDARD ? classesInputBlock.root : \"\",\n            this.props.className,\n        );\n        const hasErrors = !!this.props.errors && this.props.errors.length > 0;\n\n        let children;\n        if (typeof this.props.children === \"function\") {\n            // Type is checked, but typechecker not accepting it.\n            // eslint-disable-next-line @typescript-eslint/ban-types\n            children = (this.props.children as Function)({ hasErrors, errorID: this.errorID, labelID: this.labelID });\n        } else {\n            children = this.props.children;\n        }\n\n        const OuterTag = label ? (legend ? \"fieldset\" : \"label\") : \"div\";\n        const LabelTag = label && legend ? \"legend\" : \"span\";\n\n        return (\n            <OuterTag className={componentClasses}>\n                {this.props.label && (\n                    <span id={this.labelID} className={classesInputBlock.labelAndDescription}>\n                        <LabelTag className={classNames(classesInputBlock.labelText, this.props.labelClassName)}>\n                            {this.props.label}\n                        </LabelTag>\n                        <Paragraph className={classesInputBlock.labelNote}>{this.props.labelNote}</Paragraph>\n                    </span>\n                )}\n\n                <span\n                    className={classNames(classesInputBlock.inputWrap, this.props.wrapClassName, [\n                        classesInputBlock.fieldsetGroup,\n                    ])}\n                >\n                    {children}\n                </span>\n                <Paragraph className={classesInputBlock.labelNote}>{this.props.noteAfterInput}</Paragraph>\n                <ErrorMessages id={this.errorID} errors={this.props.errors} />\n            </OuterTag>\n        );\n    }\n\n    private get labelID(): string {\n        return this.state.id + \"-label\";\n    }\n\n    private get errorID(): string {\n        return this.state.id + \"-errors\";\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { getRequiredID, IRequiredComponentID } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport { IFieldError } from \"@library/@types/api/core\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\n\ninterface IProps extends IRequiredComponentID {\n    className?: string;\n    errors?: IFieldError[];\n}\n\ninterface IState {\n    id: string;\n}\n\nexport default class ErrorMessages extends React.Component<IProps, IState> {\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: getRequiredID(props, \"errorMessages\") as string,\n        };\n    }\n\n    public render() {\n        const { errors } = this.props;\n        const classesInputBlock = inputBlockClasses();\n        if (errors && errors.length > 0) {\n            const componentClasses = classNames(classesInputBlock.errors, this.props.className);\n\n            const errorList = (errors as any).map((error: any, index) => {\n                return (\n                    <span key={index} className={classesInputBlock.error}>\n                        {error.message}\n                    </span>\n                );\n            });\n\n            return (\n                <span id={this.state.id} className={componentClasses}>\n                    {errorList}\n                </span>\n            );\n        } else {\n            return null;\n        }\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { inputClasses } from \"@library/forms/inputStyles\";\nimport InputBlock, { IInputBlockProps } from \"@library/forms/InputBlock\";\nimport { getRequiredID } from \"@library/utility/idUtils\";\nimport { Omit } from \"@library/@types/utils\";\nimport classNames from \"classnames\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport { OverflowProperty, ResizeProperty } from \"csstype\";\nimport { TextareaAutosize } from \"react-autosize-textarea/lib/TextareaAutosize\";\n\nexport enum InputTextBlockBaseClass {\n    STANDARD = \"inputBlock\",\n    CUSTOM = \"\",\n}\n\nexport interface IInputTextProps extends Omit<IInputBlockProps, \"children\"> {\n    inputProps: {\n        value?: string;\n        onChange?: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n        onKeyPress?: React.KeyboardEventHandler;\n        inputClassNames?: string;\n        type?: string;\n        defaultValue?: string;\n        placeholder?: string;\n        valid?: boolean;\n        required?: boolean;\n        disabled?: boolean;\n        inputRef?: React.RefObject<HTMLInputElement | HTMLTextAreaElement>;\n        multiline?: boolean;\n        maxLength?: number;\n        className?: string;\n    };\n    multiLineProps?: {\n        onResize?: (event) => {};\n        rows?: number;\n        maxRows?: number;\n        async?: boolean;\n        resize?: ResizeProperty; // for textarea only\n        overflow?: OverflowProperty; // for textarea only\n        className?: string;\n    };\n}\n\nexport default class InputTextBlock extends React.Component<IInputTextProps> {\n    public static defaultProps = {\n        disabled: false,\n        type: \"text\",\n        errors: [],\n        baseClass: InputTextBlockBaseClass.STANDARD,\n        legacyMode: false,\n    };\n\n    private id: string;\n    private ownInputRef = React.createRef<HTMLInputElement | HTMLTextAreaElement>();\n    private get inputRef() {\n        return this.props.inputProps.inputRef || this.ownInputRef;\n    }\n\n    public constructor(props) {\n        super(props);\n        this.id = getRequiredID(props, \"inputText\");\n    }\n\n    public render() {\n        const classesInput = inputClasses();\n        const classesInputBlock = inputBlockClasses();\n\n        const { inputProps, multiLineProps = {}, ...blockProps } = this.props;\n        const classes = classNames(classesInputBlock.inputText, \"inputText\", inputProps.inputClassNames, {\n            InputBox: this.props.legacyMode,\n            [classesInput.text]: !this.props.legacyMode,\n        });\n\n        return (\n            <InputBlock {...blockProps} className={classNames(classesInputBlock.root, this.props.className)}>\n                {blockParams => {\n                    const { labelID, errorID, hasErrors } = blockParams;\n                    let describedBy;\n                    if (hasErrors) {\n                        describedBy = errorID;\n                    }\n\n                    return !inputProps.multiline ? (\n                        <input\n                            id={this.id}\n                            className={classNames(classes, inputProps.className)}\n                            defaultValue={inputProps.defaultValue}\n                            value={inputProps.value}\n                            type={inputProps.type}\n                            disabled={inputProps.disabled}\n                            required={inputProps.required}\n                            placeholder={inputProps.placeholder}\n                            aria-invalid={hasErrors}\n                            aria-describedby={describedBy}\n                            aria-labelledby={labelID}\n                            maxLength={inputProps.maxLength}\n                            onChange={this.onChange}\n                            ref={this.inputRef as any} // Typescripts ref checking a little ridiculous. Distinction without a difference.\n                            onKeyPress={inputProps.onKeyPress}\n                        />\n                    ) : (\n                        <TextareaAutosize\n                            {...multiLineProps}\n                            id={this.id}\n                            className={classNames(classes, multiLineProps.className, {\n                                [classesInputBlock.multiLine(\n                                    multiLineProps.resize ? multiLineProps.resize : \"none\",\n                                    multiLineProps.overflow,\n                                )]: inputProps.multiline,\n                            })}\n                            defaultValue={inputProps.defaultValue}\n                            value={inputProps.value}\n                            type={inputProps.type}\n                            disabled={inputProps.disabled}\n                            required={inputProps.required}\n                            placeholder={inputProps.placeholder}\n                            aria-invalid={hasErrors}\n                            aria-describedby={describedBy}\n                            aria-labelledby={labelID}\n                            maxLength={inputProps.maxLength}\n                            onChange={this.onChange}\n                            ref={this.inputRef as any} // Typescripts ref checking a little ridiculous. Distinction without a difference.\n                            onKeyPress={inputProps.onKeyPress}\n                        />\n                    );\n                }}\n            </InputBlock>\n        );\n    }\n\n    /**\n     * Use a native change event instead of React's because of https://github.com/facebook/react/issues/1159\n     */\n    public componentDidMount() {\n        this.inputRef.current!.addEventListener(\"change\", this.onChange);\n    }\n\n    /**\n     * Use a native change event instead of React's because of https://github.com/facebook/react/issues/1159\n     */\n    public componentWillUnmount() {\n        this.inputRef.current!.removeEventListener(\"change\", this.onChange);\n    }\n\n    public get value(): any {\n        return this.inputRef.current ? this.inputRef.current.value : \"\";\n    }\n\n    public set value(value) {\n        if (this.inputRef.current) {\n            this.inputRef.current.value = value;\n        } else {\n            throw new Error(\"inputDom does not exist\");\n        }\n    }\n\n    public focus() {\n        this.inputRef.current!.focus();\n    }\n\n    public select() {\n        this.inputRef.current!.select();\n    }\n\n    private onChange = event => {\n        if (this.props.inputProps.onChange) {\n            this.props.inputProps.onChange(event);\n        }\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ReduxActions, { ActionsUnion } from \"@library/redux/ReduxActions\";\nimport { INotification, INotificationWritable } from \"@library/@types/api/notifications\";\n\n/**\n * Redux actions for the current user's notification data.\n */\nexport default class NotificationsActions extends ReduxActions {\n    public static readonly GET_NOTIFICATION_REQUEST = \"@@notifications/GET_NOTIFICATION_REQUEST\";\n    public static readonly GET_NOTIFICATION_RESPONSE = \"@@notifications/GET_NOTIFICATION_RESPONSE\";\n    public static readonly GET_NOTIFICATION_ERROR = \"@@notifications/GET_NOTIFICATION_ERROR\";\n\n    /**\n     * Action creators for getting a single notification.\n     */\n    public static getNotificationACs = ReduxActions.generateApiActionCreators(\n        NotificationsActions.GET_NOTIFICATION_REQUEST,\n        NotificationsActions.GET_NOTIFICATION_RESPONSE,\n        NotificationsActions.GET_NOTIFICATION_ERROR,\n        {} as INotification,\n        {},\n    );\n\n    public static readonly GET_NOTIFICATIONS_REQUEST = \"@@notifications/GET_NOTIFICATIONS_REQUEST\";\n    public static readonly GET_NOTIFICATIONS_RESPONSE = \"@@notifications/GET_NOTIFICATIONS_RESPONSE\";\n    public static readonly GET_NOTIFICATIONS_ERROR = \"@@notifications/GET_NOTIFICATIONS_ERROR\";\n\n    /**\n     * Action creators for getting a paginated list of the current user's notifications.\n     */\n    public static getNotificationsACs = ReduxActions.generateApiActionCreators(\n        NotificationsActions.GET_NOTIFICATIONS_REQUEST,\n        NotificationsActions.GET_NOTIFICATIONS_RESPONSE,\n        NotificationsActions.GET_NOTIFICATIONS_ERROR,\n        {} as INotification[],\n        {},\n    );\n\n    public static readonly MARK_READ_REQUEST = \"@@notifications/MARK_READ_REQUEST\";\n    public static readonly MARK_READ_RESPONSE = \"@@notifications/MARK_READ_RESPONSE\";\n    public static readonly MARK_READ_ERROR = \"@@notifications/MARK_READ_ERROR\";\n\n    /**\n     * Action creators for marking a single notification as read.\n     */\n    public static markReadACs = ReduxActions.generateApiActionCreators(\n        NotificationsActions.MARK_READ_REQUEST,\n        NotificationsActions.MARK_READ_RESPONSE,\n        NotificationsActions.MARK_READ_ERROR,\n        {} as INotification,\n        {} as INotificationWritable,\n    );\n\n    public static readonly MARK_ALL_READ_REQUEST = \"@@notifications/MARK_ALL_READ_REQUEST\";\n    public static readonly MARK_ALL_READ_RESPONSE = \"@@notifications/MARK_ALL_READ_RESPONSE\";\n    public static readonly MARK_ALL_READ_ERROR = \"@@notifications/MARK_ALL_READ_ERROR\";\n\n    /**\n     * Action creators for marking all of the current user's notifications as read.\n     */\n    public static markAllReadACs = ReduxActions.generateApiActionCreators(\n        NotificationsActions.MARK_ALL_READ_REQUEST,\n        NotificationsActions.MARK_ALL_READ_RESPONSE,\n        NotificationsActions.MARK_ALL_READ_ERROR,\n        {},\n        {} as INotificationWritable,\n    );\n\n    /**\n     * Union of all possible action types in this class.\n     */\n    public static readonly ACTION_TYPES:\n        | ActionsUnion<typeof NotificationsActions.getNotificationACs>\n        | ActionsUnion<typeof NotificationsActions.getNotificationsACs>\n        | ActionsUnion<typeof NotificationsActions.markReadACs>\n        | ActionsUnion<typeof NotificationsActions.markAllReadACs>;\n\n    /**\n     * Get a single notification.\n     *\n     * @param id Unique ID of the notification.\n     */\n    public getNotification = (id: number) => {\n        return this.dispatchApi(\"get\", `/notifications/${id}`, NotificationsActions.getNotificationACs, {});\n    };\n\n    /**\n     * Get a paginated list of notifications for the current user.\n     */\n    public getNotifications = () => {\n        return this.dispatchApi(\"get\", \"/notifications\", NotificationsActions.getNotificationsACs, {});\n    };\n\n    /**\n     * Mark a single notification as read.\n     *\n     * @param id Unique ID of the notification.\n     */\n    public markRead = (id: number) => {\n        return this.dispatchApi(\"patch\", `/notifications/${id}`, NotificationsActions.markReadACs, {\n            read: true,\n        });\n    };\n\n    /**\n     * Mark all notifications for the current user as read.\n     */\n    public markAllRead = () => {\n        return this.dispatchApi(\"patch\", \"/notifications\", NotificationsActions.markAllReadACs, {\n            read: true,\n        });\n    };\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { colorOut, unit } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { percent } from \"csx\";\n\nexport const frameVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"frame\");\n\n    const colors = makeThemeVars(\"colors\", {\n        bg: globalVars.mainColors.bg,\n        fg: globalVars.mainColors.fg,\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        large: 720,\n        medium: 516,\n        small: 375,\n    });\n\n    const border = makeThemeVars(\"border\", {\n        radius: globalVars.border.radius,\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        padding: 16,\n    });\n\n    const header = makeThemeVars(\"header\", {\n        spacing: spacing.padding,\n        minHeight: 44,\n        fontSize: globalVars.fonts.size.subTitle,\n    });\n\n    const footer = makeThemeVars(\"footer\", {\n        spacing: spacing.padding,\n        minHeight: header.minHeight,\n    });\n\n    return {\n        colors,\n        sizing,\n        border,\n        spacing,\n        header,\n        footer,\n    };\n});\n\nexport const frameClasses = useThemeCache(() => {\n    const vars = frameVariables();\n    const style = styleFactory(\"frame\");\n\n    const headerWrap = style(\"headerWrap\", {\n        background: colorOut(vars.colors.bg),\n        zIndex: 2,\n        willChange: \"height\",\n    });\n    const bodyWrap = style(\"bodyWrap\", {\n        background: colorOut(vars.colors.bg),\n    });\n    const footerWrap = style(\"footerWrap\", {\n        background: colorOut(vars.colors.bg),\n        zIndex: 2,\n        willChange: \"height\",\n    });\n\n    const root = style({\n        backgroundColor: colorOut(vars.colors.bg),\n        maxHeight: percent(100),\n        height: percent(100),\n        borderRadius: unit(vars.border.radius),\n        width: percent(100),\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        minHeight: 0, // https://bugs.chromium.org/p/chromium/issues/detail?id=927066\n        $nest: {\n            [`.${bodyWrap}`]: {\n                flex: 1,\n                overflow: \"auto\",\n            },\n        },\n    });\n\n    return {\n        root,\n        headerWrap,\n        bodyWrap,\n        footerWrap,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { borders, colorOut, fonts, margins, paddings, setAllLinkColors, unit } from \"@library/styles/styleHelpers\";\nimport { shadowHelper, shadowOrBorderBasedOnLightness } from \"@library/styles/shadowHelpers\";\nimport { NestedCSSProperties, NestedCSSSelectors, TLength } from \"typestyle/lib/types\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { em, important, percent, px } from \"csx\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { FontSizeProperty } from \"csstype\";\n\nexport const userContentVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"userContent\");\n    const globalVars = globalVariables();\n    const { mainColors } = globalVars;\n\n    const fonts = makeThemeVars(\"fonts\", {\n        size: globalVars.fonts.size.large,\n        headings: {\n            h1: \"2em\",\n            h2: \"1.5em\",\n            h3: \"1.25em\",\n            h4: \"1em\",\n            h5: \".875em\",\n            h6: \".85em\",\n        },\n    });\n\n    const blocks = makeThemeVars(\"blocks\", {\n        margin: fonts.size,\n        fg: mainColors.fg,\n        bg: globalVars.mixBgAndFg(0.05),\n    });\n\n    const embeds = makeThemeVars(\"embeds\", {\n        bg: mainColors.bg,\n        fg: mainColors.fg,\n        borderRadius: px(2),\n    });\n\n    const code = makeThemeVars(\"code\", {\n        fontSize: em(0.85),\n        borderRadius: 2,\n    });\n\n    const codeInline = makeThemeVars(\"codeInline\", {\n        borderRadius: code.borderRadius,\n        paddingVertical: em(0.2),\n        paddingHorizontal: em(0.4),\n        fg: blocks.fg,\n        bg: blocks.bg,\n    });\n\n    const codeBlock = makeThemeVars(\"codeBlock\", {\n        borderRadius: globalVars.border.radius,\n        paddingVertical: fonts.size,\n        paddingHorizontal: fonts.size,\n        lineHeight: 1.45,\n        fg: blocks.fg,\n        bg: blocks.bg,\n    });\n\n    const list = makeThemeVars(\"list\", {\n        spacing: {\n            top: em(0.5),\n            left: em(2),\n        },\n        listDecoration: {\n            minWidth: em(2),\n        },\n        nestedList: {\n            margin: \"0 0 0 1em\",\n        },\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        base: 2 * Math.ceil((globalVars.spacer.size * 5) / 8),\n    });\n\n    return {\n        fonts,\n        list,\n        blocks,\n        code,\n        codeInline,\n        codeBlock,\n        embeds,\n        spacing,\n    };\n});\n\n/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nexport const userContentClasses = useThemeCache(() => {\n    const style = styleFactory(\"userContent\");\n    const vars = userContentVariables();\n    const globalVars = globalVariables();\n\n    const listItem: NestedCSSProperties = {\n        position: \"relative\",\n        ...margins({\n            top: vars.list.spacing.top,\n            left: vars.list.spacing.left,\n        }),\n        $nest: {\n            \"&:first-child\": {\n                marginTop: 0,\n            },\n            \"&:last-child\": {\n                marginBottom: 0,\n            },\n        },\n    };\n\n    const headingStyle = (tag: string, fontSize: FontSizeProperty<TLength>): NestedCSSProperties => {\n        return {\n            marginTop: unit(vars.spacing.base),\n            fontSize,\n            $nest: lineHeightAdjustment(),\n        };\n    };\n\n    const headings: NestedCSSSelectors = {\n        \"& h1:not(.heading)\": headingStyle(\"h1\", vars.fonts.headings.h1),\n        \"& h2:not(.heading)\": headingStyle(\"h2\", vars.fonts.headings.h2),\n        \"& h3:not(.heading)\": headingStyle(\"h3\", vars.fonts.headings.h3),\n        \"& h4:not(.heading)\": headingStyle(\"h4\", vars.fonts.headings.h4),\n        \"& h5:not(.heading)\": headingStyle(\"h5\", vars.fonts.headings.h5),\n        \"& h6:not(.heading)\": headingStyle(\"h6\", vars.fonts.headings.h6),\n    };\n\n    const lists: NestedCSSSelectors = {\n        [\"& ol\"]: {\n            listStylePosition: \"inside\",\n            margin: `0 0 1em 3em`,\n            padding: 0,\n            $nest: {\n                [`& li`]: {\n                    listStyle: \"decimal\",\n                },\n                [`& ol li`]: {\n                    listStyle: \"lower-alpha\",\n                },\n                [`& ol ol li`]: {\n                    listStyle: \"lower-roman\",\n                },\n                [`& ol ol ol li`]: {\n                    listStyle: \"decimal\",\n                },\n                [`& ol ol ol ol li`]: {\n                    listStyle: \"lower-alpha\",\n                },\n                [`& ol ol ol ol ol li`]: {\n                    listStyle: \"lower-roman\",\n                },\n                [`& ol ol ol ol ol ol li`]: {\n                    listStyle: \"decimal\",\n                },\n                [`& ol, & ul`]: {\n                    margin: vars.list.nestedList.margin,\n                },\n            },\n        },\n        [\"& ul\"]: {\n            listStylePosition: \"inside\",\n            listStyle: \"disc\",\n            margin: `1em 0 1em 2em`,\n            padding: 0,\n            $nest: {\n                [`& li`]: {\n                    listStyle: \"none\",\n                    position: \"relative\",\n                },\n                [`& li::before`]: {\n                    fontFamily: `'Arial', serif`,\n                    content: `\"•\"`,\n                    position: \"absolute\",\n                    left: em(-1),\n                },\n                [`& ol, & ul`]: {\n                    margin: vars.list.nestedList.margin,\n                },\n            },\n        },\n        [`& li`]: {\n            margin: `5px 0`,\n            $nest: {\n                [`&, & *:first-child`]: {\n                    marginTop: 0,\n                },\n                [`&, & *:last-child`]: {\n                    marginBottom: 0,\n                },\n            },\n        },\n    };\n\n    const paragraphSpacing: NestedCSSSelectors = {\n        \"& > p\": {\n            marginTop: 0,\n            marginBottom: 0,\n            $nest: {\n                \"&:not(:first-child)\": {\n                    marginTop: vars.blocks.margin * 0.5,\n                },\n                \"&:first-child\": {\n                    $nest: lineHeightAdjustment(),\n                },\n            },\n        },\n\n        \"&& > *:not(:last-child)\": {\n            marginBottom: vars.blocks.margin,\n        },\n\n        \"&& > *:first-child\": {\n            $unique: true, // Required to prevent collapsing in with some other variable.\n            marginTop: 0,\n\n            $nest: {\n                \"&::before\": {\n                    marginTop: 0,\n                },\n            },\n        },\n    };\n\n    const linkColors = setAllLinkColors();\n    const linkStyle = {\n        color: linkColors.color,\n        $nest: {\n            ...linkColors.nested,\n            \"&:hover, &:focus\": {\n                textDecoration: \"underline\",\n            },\n        },\n    };\n\n    const linkStyles: NestedCSSSelectors = {\n        a: linkStyle,\n        \"p a\": linkStyle,\n        \"li a\": linkStyle,\n    };\n\n    const codeStyles: NestedCSSSelectors = {\n        \"& .code\": {\n            position: \"relative\",\n            fontSize: vars.code.fontSize,\n            fontFamily: `Menlo, Monaco, Consolas, \"Courier New\", monospace`,\n            maxWidth: percent(100),\n            overflowX: \"auto\",\n            margin: 0,\n            color: colorOut(vars.blocks.fg),\n            backgroundColor: colorOut(vars.blocks.bg),\n            border: \"none\",\n        },\n        \"&& .codeInline\": {\n            whiteSpace: \"normal\",\n            ...paddings({\n                top: vars.codeInline.paddingVertical,\n                bottom: vars.codeInline.paddingVertical,\n                left: vars.codeInline.paddingHorizontal,\n                right: vars.codeInline.paddingHorizontal,\n            }),\n            color: colorOut(vars.codeInline.fg),\n            backgroundColor: colorOut(vars.codeInline.bg),\n            borderRadius: vars.codeInline.borderRadius,\n            // We CAN'T use display: `inline` & position: `relative` together.\n            // This causes the cursor to disappear in a contenteditable.\n            // @see https://bugs.chromium.org/p/chromium/issues/detail?id=724821\n            display: \"inline\",\n            position: \"static\",\n        },\n        \"&& .codeBlock\": {\n            display: \"block\",\n            wordWrap: \"normal\",\n            lineHeight: vars.codeBlock.lineHeight,\n            borderRadius: vars.codeBlock.borderRadius,\n            flexShrink: 0, // Needed so code blocks don't collapse in the editor.\n            whiteSpace: \"pre\",\n            color: colorOut(vars.codeBlock.fg),\n            backgroundColor: colorOut(vars.codeBlock.bg),\n            ...paddings({\n                top: vars.codeBlock.paddingVertical,\n                bottom: vars.codeBlock.paddingVertical,\n                left: vars.codeBlock.paddingHorizontal,\n                right: vars.codeBlock.paddingHorizontal,\n            }),\n        },\n    };\n\n    // Blockquotes & spoilers\n    // These are temporarily kludged here due to lack of time.\n    // They should be fully converted in the future but at the moment\n    // Only the bare minimum is convverted in order to make the colors work.\n    const spoilersAndQuotes: NestedCSSSelectors = {\n        \"& .embedExternal-content\": {\n            borderRadius: vars.embeds.borderRadius,\n            $nest: {\n                \"&::after\": {\n                    borderRadius: vars.embeds.borderRadius,\n                },\n            },\n        },\n        \"& .embedText-content\": {\n            background: colorOut(vars.embeds.bg),\n            color: colorOut(vars.embeds.fg),\n            overflow: \"hidden\",\n            ...shadowOrBorderBasedOnLightness(\n                globalVars.body.backgroundImage.color,\n                borders({\n                    color: vars.embeds.fg.fade(0.3),\n                }),\n                shadowHelper().embed(),\n            ),\n        },\n        [`& .embedText-title,\n          & .embedLink-source,\n          & .embedLink-excerpt`]: {\n            color: colorOut(vars.blocks.fg),\n        },\n        \"& .metaStyle\": {\n            opacity: 0.8,\n        },\n        \"& .embedLoader-box\": {\n            background: colorOut(vars.embeds.bg),\n            ...borders({\n                color: vars.embeds.fg.fade(0.3),\n            }),\n        },\n    };\n\n    const root = style({\n        // These CAN'T be flexed. That breaks margin collapsing.\n        display: important(\"block\"),\n        position: \"relative\",\n        width: percent(100),\n        wordBreak: \"break-word\",\n        lineHeight: globalVars.lineHeights.base,\n        fontSize: vars.fonts.size,\n        $nest: {\n            // A placeholder might be put in a ::before element. Make sure we match the line-height adjustment.\n            \"&::before\": {\n                marginTop: lineHeightAdjustment()[\"&::before\"]!.marginTop,\n            },\n            ...headings,\n            ...lists,\n            ...paragraphSpacing,\n            ...linkStyles,\n            ...codeStyles,\n            ...spoilersAndQuotes,\n        },\n    });\n\n    return { root };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport {\n    borders,\n    colorOut,\n    IBordersWithRadius,\n    placeholderStyles,\n    textInputSizingFromFixedHeight,\n    unit,\n} from \"@library/styles/styleHelpers\";\nimport { px } from \"csx\";\nimport { cssRule } from \"typestyle\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { NestedCSSProperties } from \"typestyle/lib/types\";\n\nexport const inputVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const formElementVars = formElementsVariables();\n    const makeThemeVars = variableFactory(\"input\");\n\n    const colors = makeThemeVars(\"colors\", {\n        placeholder: globalVars.mixBgAndFg(0.5),\n        fg: globalVars.mainColors.fg,\n        bg: globalVars.mainColors.bg,\n        state: {\n            fg: globalVars.mainColors.primary,\n        },\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        height: formElementVars.sizing.height,\n    });\n\n    const font = makeThemeVars(\"font\", {\n        size: globalVars.fonts.size.large,\n    });\n\n    const border: IBordersWithRadius = makeThemeVars(\"borders\", globalVars.border);\n\n    return {\n        colors,\n        border,\n        sizing,\n        font,\n    };\n});\n\nexport const inputClasses = useThemeCache(() => {\n    const vars = inputVariables();\n    const style = styleFactory(\"input\");\n    const formElementVars = formElementsVariables();\n    const globalVars = globalVariables();\n\n    const textStyles = {\n        ...textInputSizingFromFixedHeight(vars.sizing.height, vars.font.size, formElementVars.border.fullWidth),\n        backgroundColor: colorOut(vars.colors.bg),\n        color: colorOut(vars.colors.fg),\n        ...borders(vars.border),\n        outline: 0,\n        fontWeight: globalVars.fonts.weights.normal,\n        $nest: {\n            ...placeholderStyles({\n                color: colorOut(vars.colors.placeholder),\n            }),\n            \"&:focus, &.focus-visible\": {\n                borderColor: colorOut(vars.colors.state.fg),\n            },\n        },\n    };\n\n    // Use as assignable unique style.\n    const text = style(\"text\", textStyles as NestedCSSProperties);\n\n    // Use as a global selector. This should be refactored in the future.\n    const applyInputCSSRules = () => cssRule(\" .inputText\", textStyles as NestedCSSProperties);\n\n    const inputText = style(\"inputText\", {\n        marginBottom: 0,\n        $nest: {\n            \"&&\": {\n                marginTop: unit(globalVars.gutter.quarter),\n            },\n        },\n    });\n\n    return { text, inputText, applyInputCSSRules };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { absolutePosition, colorOut, margins, negative, srOnly, unit, userSelect } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { important, px } from \"csx\";\nimport { titleBarVariables } from \"@library/headers/titleBarStyles\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { media } from \"typestyle\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\n\nconst backLinkVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"backLink\");\n\n    const sizing = makeThemeVars(\"backLink\", {\n        height: globalVars.icon.sizes.default,\n        width: (globalVars.icon.sizes.default * 12) / 21, // From SVG ratio\n    });\n\n    // We do a best guess based on calculations for the vertical position of the back link.\n    // However, it might visually be a little off and need some adjustment\n    const position = makeThemeVars(\"position\", {\n        verticalOffset: globalVars.fonts.alignment.headings.verticalOffsetForAdjacentElements,\n    });\n\n    return {\n        sizing,\n        position,\n    };\n});\n\nconst backLinkClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n    const style = styleFactory(\"backLink\");\n    const titleBarVars = titleBarVariables();\n    const vars = backLinkVariables();\n\n    const root = style(\n        {\n            ...userSelect(),\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"flex-start\",\n            overflow: \"visible\",\n            height: unit(vars.sizing.height),\n            minWidth: unit(vars.sizing.width),\n            ...margins({\n                left: negative(globalVars.gutter.half),\n                right: globalVars.gutter.half,\n            }),\n        },\n        mediaQueries.oneColumnDown({\n            ...margins({\n                left: 0,\n            }),\n        }),\n    );\n\n    const link = style(\"link\", {\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        color: \"inherit\",\n        height: unit(vars.sizing.height),\n        $nest: {\n            \"&:hover, &:focus\": {\n                color: colorOut(globalVars.mainColors.primary),\n                outline: 0,\n            },\n        },\n    });\n\n    const inHeading = (fontSize?: number | null) => {\n        if (fontSize) {\n            return style(\"inHeading\", {\n                ...absolutePosition.topLeft(\".5em\"),\n                fontSize: unit(fontSize),\n                transform: `translateY(-50%)`,\n                marginTop: unit(vars.position.verticalOffset),\n            });\n        } else {\n            return \"\";\n        }\n    };\n\n    const label = style(\n        \"label\",\n        {\n            lineHeight: px(globalVars.icon.sizes.default),\n            fontWeight: globalVars.fonts.weights.semiBold,\n            whiteSpace: \"nowrap\",\n            paddingLeft: px(12),\n        },\n        mediaQueries.xs(srOnly()),\n    );\n\n    const icon = style(\"icon\", {\n        height: unit(vars.sizing.height),\n        width: unit(vars.sizing.width),\n    });\n\n    // Since the back link needs to be outside the heading, we need a way to get the height of one line of text to center the link vertically.\n    // We need to get the height from the text, so this element is a hidden space used for aligning.\n    const getLineHeight = style(\"getLineHeight\", {\n        visibility: important(\"hidden\"),\n    });\n\n    return {\n        root,\n        link,\n        label,\n        icon,\n        getLineHeight,\n        inHeading,\n    };\n});\n\nexport default backLinkClasses;\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport {\n    allButtonStates,\n    borders,\n    colorOut,\n    emphasizeLightness,\n    flexHelper,\n    modifyColorBasedOnLightness,\n    unit,\n    userSelect,\n    absolutePosition,\n    pointerEvents,\n    singleBorder,\n} from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { ColorHelper, percent, px, quote, viewHeight } from \"csx\";\nimport backLinkClasses from \"@library/routing/links/backLinkStyles\";\nimport { NestedCSSProperties } from \"typestyle/lib/types\";\nimport { iconClasses } from \"@library/icons/iconClasses\";\nimport { shadowHelper } from \"@library/styles/shadowHelpers\";\nimport { IButtonType } from \"@library/forms/styleHelperButtonInterface\";\nimport { ButtonTypes } from \"@library/forms/buttonStyles\";\nimport generateButtonClass from \"@library/forms/styleHelperButtonGenerator\";\n\nenum TitleBarBorderType {\n    BORDER = \"border\",\n    NONE = \"none\",\n    SHADOW = \"shadow\",\n}\n\nexport const titleBarVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const formElementVars = formElementsVariables();\n    const makeThemeVars = variableFactory(\"titleBar\");\n\n    const sizing = makeThemeVars(\"sizing\", {\n        height: 48,\n        spacer: 12,\n        mobile: {\n            height: 44,\n            width: formElementVars.sizing.height,\n        },\n    });\n\n    const colors = makeThemeVars(\"colors\", {\n        fg: globalVars.mainColors.bg,\n        bg: globalVars.mainColors.primary,\n    });\n\n    const guest = makeThemeVars(\"guest\", {\n        spacer: 8,\n    });\n\n    const border = makeThemeVars(\"border\", {\n        type: TitleBarBorderType.NONE,\n    });\n\n    const buttonSize = globalVars.buttonIcon.size;\n    const button = makeThemeVars(\"button\", {\n        borderRadius: globalVars.border.radius,\n        size: buttonSize,\n        guest: {\n            minWidth: 86,\n        },\n        mobile: {\n            fontSize: 16,\n            width: buttonSize,\n        },\n        state: {\n            bg: emphasizeLightness(colors.bg, 0.04),\n        },\n    });\n\n    const linkButtonDefaults: IButtonType = {\n        name: ButtonTypes.TITLEBAR_LINK,\n        colors: {\n            bg: colors.bg,\n        },\n        fonts: {\n            color: colors.fg,\n        },\n        borders: {\n            style: \"none\",\n            color: \"transparent\",\n        },\n        hover: {\n            colors: {\n                bg: button.state.bg,\n            },\n        },\n        focus: {\n            colors: {\n                bg: button.state.bg,\n            },\n        },\n        focusAccessible: {\n            colors: {\n                bg: button.state.bg,\n            },\n        },\n        active: {\n            colors: {\n                bg: button.state.bg,\n            },\n        },\n    };\n    const linkButton: IButtonType = makeThemeVars(\"linkButton\", linkButtonDefaults);\n\n    const count = makeThemeVars(\"count\", {\n        size: 18,\n        fontSize: 10,\n        fg: globalVars.mainColors.bg,\n        bg: globalVars.mainColors.primary,\n    });\n\n    const dropDownContents = makeThemeVars(\"dropDownContents\", {\n        minWidth: 350,\n        maxHeight: viewHeight(90),\n    });\n\n    const endElements = makeThemeVars(\"endElements\", {\n        flexBasis: buttonSize * 4,\n        mobile: {\n            flexBasis: button.mobile.width * 2,\n        },\n    });\n\n    const compactSearch = makeThemeVars(\"compactSearch\", {\n        maxWidth: 672,\n        mobile: {\n            width: button.mobile.width,\n        },\n    });\n\n    const buttonContents = makeThemeVars(\"buttonContents\", {\n        state: {\n            bg: button.state.bg,\n        },\n    });\n\n    const signIn = makeThemeVars(\"signIn\", {\n        fg: colors.fg,\n        bg: modifyColorBasedOnLightness(globalVars.mainColors.primary, 0.1, true),\n        hover: {\n            bg: modifyColorBasedOnLightness(globalVars.mainColors.primary, 0.2, true),\n        },\n    });\n\n    const resister = makeThemeVars(\"register\", {\n        fg: colors.bg,\n        bg: colors.fg,\n        borderColor: colors.bg,\n        states: {\n            bg: colors.fg.fade(0.9),\n        },\n    });\n\n    const mobileDropDown = makeThemeVars(\"mobileDropdown\", {\n        height: px(sizing.mobile.height),\n    });\n\n    const meBox = makeThemeVars(\"meBox\", {\n        sizing: {\n            buttonContents: formElementVars.sizing.height,\n        },\n    });\n\n    const bottomRow = makeThemeVars(\"bottomRow\", {\n        bg: modifyColorBasedOnLightness(colors.bg, 0.1).desaturate(0.2, true),\n    });\n\n    return {\n        border,\n        sizing,\n        colors,\n        signIn,\n        resister,\n        guest,\n        button,\n        linkButton,\n        count,\n        dropDownContents,\n        endElements,\n        compactSearch,\n        buttonContents,\n        mobileDropDown,\n        meBox,\n        bottomRow,\n    };\n});\n\nexport const titleBarClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = titleBarVariables();\n    const formElementVars = formElementsVariables();\n    const headerColors = vars.colors;\n    const mediaQueries = layoutVariables().mediaQueries();\n    const flex = flexHelper();\n    const style = styleFactory(\"titleBar\");\n\n    const getBorderVars = (): NestedCSSProperties => {\n        switch (vars.border.type) {\n            case TitleBarBorderType.BORDER:\n                return {\n                    borderBottom: singleBorder(),\n                };\n            case TitleBarBorderType.SHADOW:\n                return {\n                    boxShadow: shadowHelper().makeShadow(),\n                };\n            case TitleBarBorderType.NONE:\n            default:\n                return {};\n        }\n    };\n\n    const root = style({\n        maxWidth: percent(100),\n        backgroundColor: headerColors.bg.toString(),\n        color: headerColors.fg.toString(),\n        ...getBorderVars(),\n        $nest: {\n            \"& .searchBar__control\": {\n                color: vars.colors.fg.toString(),\n                cursor: \"pointer\",\n            },\n            \"&& .suggestedTextInput-clear.searchBar-clear\": {\n                $nest: {\n                    \"&:hover\": {\n                        color: vars.colors.fg.toString(),\n                    },\n                    \"&:active\": {\n                        color: vars.colors.fg.toString(),\n                    },\n                    \"&:focus\": {\n                        color: vars.colors.fg.toString(),\n                    },\n                },\n            },\n            \"& .searchBar__placeholder\": {\n                color: vars.colors.fg.fade(0.8).toString(),\n                cursor: \"pointer\",\n            },\n            [`& .${backLinkClasses().link}`]: {\n                $nest: {\n                    \"&, &:hover, &:focus, &:active\": {\n                        color: colorOut(vars.colors.fg),\n                    },\n                },\n            },\n        },\n        ...mediaQueries.oneColumnDown({\n            height: px(vars.sizing.mobile.height),\n        }).$nest,\n    });\n\n    const spacer = style(\n        \"spacer\",\n        {\n            height: px(vars.sizing.height),\n        },\n        mediaQueries.oneColumnDown({\n            height: px(vars.sizing.mobile.height),\n        }),\n    );\n\n    const bar = style(\n        \"bar\",\n        {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            flexWrap: \"nowrap\",\n            alignItems: \"center\",\n            height: px(vars.sizing.height),\n            width: percent(100),\n            $nest: {\n                \"&.isHome\": {\n                    justifyContent: \"space-between\",\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({ height: px(vars.sizing.mobile.height) }),\n    );\n\n    const logoContainer = style(\n        \"logoContainer\",\n        {\n            display: \"inline-flex\",\n            alignSelf: \"center\",\n            color: colorOut(vars.colors.fg),\n            marginRight: unit(globalVars.gutter.size),\n            $nest: {\n                \"&.focus-visible\": {\n                    $nest: {\n                        \"&.headerLogo-logoFrame\": {\n                            outline: `5px solid ${vars.buttonContents.state.bg}`,\n                            background: colorOut(vars.buttonContents.state.bg),\n                            borderRadius: vars.button.borderRadius,\n                        },\n                    },\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            height: px(vars.sizing.mobile.height),\n            marginRight: unit(0),\n        }),\n    );\n\n    const logoFlexBasis = style(\"logoFlexBasis\", {\n        flexBasis: vars.endElements.flexBasis,\n    });\n\n    const meBox = style(\"meBox\", {\n        justifyContent: \"flex-end\",\n    });\n\n    const nav = style(\n        \"nav\",\n        {\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            height: px(vars.sizing.height),\n            color: \"inherit\",\n        },\n        mediaQueries.oneColumnDown({ height: px(vars.sizing.mobile.height) }),\n    );\n\n    const locales = style(\n        \"locales\",\n        {\n            height: px(vars.sizing.height),\n            $nest: {\n                \"&.buttonAsText\": {\n                    $nest: {\n                        \"&:hover\": {\n                            color: \"inherit\",\n                        },\n                        \"&:focus\": {\n                            color: \"inherit\",\n                        },\n                    },\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({ height: px(vars.sizing.mobile.height) }),\n    );\n\n    const messages = style(\"messages\", {\n        color: vars.colors.fg.toString(),\n    });\n\n    const notifications = style(\"notifications\", {\n        color: \"inherit\",\n    });\n\n    const compactSearch = style(\n        \"compactSearch\",\n        {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            marginLeft: \"auto\",\n            minWidth: unit(formElementVars.sizing.height),\n            flexBasis: px(formElementVars.sizing.height),\n            maxWidth: percent(100),\n            height: unit(vars.sizing.height),\n            $nest: {\n                \"&.isOpen\": {\n                    width: unit(vars.compactSearch.maxWidth),\n                    flexBasis: \"auto\",\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({ height: px(vars.sizing.mobile.height) }),\n    );\n\n    const extraMeBoxIcons = style(\"extraMeBoxIcons\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\",\n        flex: 1,\n    });\n\n    const topElement = style(\n        \"topElement\",\n        {\n            color: vars.colors.fg.toString(),\n            padding: `0 ${px(vars.sizing.spacer / 2)}`,\n            margin: `0 ${px(vars.sizing.spacer / 2)}`,\n            borderRadius: px(vars.button.borderRadius),\n        },\n        mediaQueries.oneColumnDown({\n            fontSize: px(vars.button.mobile.fontSize),\n        }),\n    );\n\n    const localeToggle = style(\n        \"localeToggle\",\n        {\n            height: px(vars.sizing.height),\n        },\n        mediaQueries.oneColumnDown({\n            height: px(vars.sizing.mobile.height),\n        }),\n    );\n\n    const languages = style(\"languages\", {\n        marginLeft: \"auto\",\n    });\n\n    const button = style(\n        \"button\",\n        {\n            color: vars.colors.fg.toString(),\n            height: px(vars.button.size),\n            minWidth: px(vars.button.size),\n            maxWidth: percent(100),\n            padding: px(0),\n            $nest: {\n                \"&&\": {\n                    ...allButtonStates(\n                        {\n                            active: {\n                                color: colorOut(vars.colors.fg),\n                                $nest: {\n                                    \"& .meBox-buttonContent\": {\n                                        backgroundColor: colorOut(vars.buttonContents.state.bg),\n                                    },\n                                },\n                            },\n                            hover: {\n                                color: colorOut(vars.colors.fg),\n                                $nest: {\n                                    \"& .meBox-buttonContent\": {\n                                        backgroundColor: colorOut(vars.buttonContents.state.bg),\n                                    },\n                                },\n                            },\n                            accessibleFocus: {\n                                outline: 0,\n                                color: colorOut(vars.colors.fg),\n                                $nest: {\n                                    \"& .meBox-buttonContent\": {\n                                        borderColor: colorOut(vars.colors.fg),\n                                        backgroundColor: colorOut(vars.buttonContents.state.bg),\n                                    },\n                                },\n                            },\n                        },\n                        {\n                            \"& .meBox-buttonContent\": {\n                                ...borders({\n                                    width: 1,\n                                    color: \"transparent\",\n                                }),\n                            },\n                            \"&.isOpen\": {\n                                color: colorOut(vars.colors.fg),\n                                $nest: {\n                                    \"& .meBox-buttonContent\": {\n                                        backgroundColor: colorOut(vars.buttonContents.state.bg),\n                                    },\n                                },\n                            },\n                        },\n                    ),\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            height: px(vars.sizing.mobile.height),\n            width: px(vars.sizing.mobile.width),\n            minWidth: px(vars.sizing.mobile.width),\n        }),\n    );\n\n    const linkButton = generateButtonClass(vars.linkButton);\n\n    const buttonOffset = style(\"buttonOffset\", {\n        transform: `translateX(6px)`,\n    });\n\n    const centeredButtonClass = style(\"centeredButtonClass\", {\n        ...flex.middle(),\n    });\n\n    const searchCancel = style(\"searchCancel\", {\n        ...userSelect(),\n        height: px(formElementVars.sizing.height),\n        $nest: {\n            \"&.focus-visible\": {\n                $nest: {\n                    \"&.meBox-buttonContent\": {\n                        borderRadius: px(vars.button.borderRadius),\n                        backgroundColor: vars.buttonContents.state.bg.toString(),\n                    },\n                },\n            },\n        },\n    });\n\n    const tabButtonActive = {\n        color: globalVars.mainColors.primary.toString(),\n        $nest: {\n            \".titleBar-tabButtonContent\": {\n                color: vars.colors.fg.toString(),\n                backgroundColor: colorOut(modifyColorBasedOnLightness(vars.colors.fg, 1)),\n                borderRadius: px(vars.button.borderRadius),\n            },\n        },\n    };\n\n    const tabButton = style(\"tabButton\", {\n        display: \"block\",\n        height: percent(100),\n        padding: px(0),\n        $nest: {\n            \"&:active\": tabButtonActive,\n            \"&:hover\": tabButtonActive,\n            \"&:focus\": tabButtonActive,\n        },\n    });\n\n    const dropDownContents = style(\"dropDownContents\", {\n        $nest: {\n            \"&&&\": {\n                minWidth: unit(vars.dropDownContents.minWidth),\n                maxHeight: unit(vars.dropDownContents.maxHeight),\n            },\n        },\n    });\n\n    const count = style(\"count\", {\n        height: px(vars.count.size),\n        fontSize: px(vars.count.fontSize),\n        backgroundColor: vars.count.bg.toString(),\n        color: vars.count.fg.toString(),\n    });\n\n    const scroll = style(\"scroll\", {\n        position: \"relative\",\n        top: 0,\n        left: 0,\n        height: percent(100),\n        ...(scrollWithNoScrollBar() as NestedCSSProperties),\n    });\n\n    const rightFlexBasis = style(\n        \"rightFlexBasis\",\n        {\n            display: \"flex\",\n            height: px(vars.sizing.height),\n            flexWrap: \"nowrap\",\n            justifyContent: \"flex-end\",\n            alignItems: \"center\",\n            flexBasis: vars.endElements.flexBasis,\n        },\n        mediaQueries.oneColumnDown({\n            flexShrink: 1,\n            flexBasis: px(vars.endElements.mobile.flexBasis),\n            height: px(vars.sizing.mobile.height),\n        }),\n    );\n\n    const leftFlexBasis = style(\n        \"leftFlexBasis\",\n        {\n            ...flex.middleLeft(),\n            flexBasis: vars.endElements.flexBasis,\n        },\n        mediaQueries.oneColumnDown({\n            flexShrink: 1,\n            flexBasis: px(vars.endElements.mobile.flexBasis),\n        }),\n    );\n\n    const signIn = style(\"signIn\", {\n        marginLeft: unit(vars.guest.spacer),\n        marginRight: unit(vars.guest.spacer),\n        $nest: {\n            \"&&&\": {\n                color: colorOut(vars.signIn.fg),\n                borderColor: colorOut(vars.colors.fg),\n            },\n        },\n    });\n\n    const register = style(\"register\", {\n        marginLeft: unit(vars.guest.spacer),\n        marginRight: unit(vars.guest.spacer),\n        backgroundColor: colorOut(vars.resister.bg),\n        $nest: {\n            \"&&\": {\n                // Ugly solution, but not much choice until: https://github.com/vanilla/knowledge/issues/778\n                ...allButtonStates({\n                    allStates: {\n                        borderColor: colorOut(vars.resister.borderColor, true),\n                        color: colorOut(vars.resister.fg),\n                    },\n                    noState: {\n                        backgroundColor: colorOut(vars.resister.bg, true),\n                    },\n                    hover: {\n                        color: colorOut(vars.resister.fg),\n                        backgroundColor: colorOut(vars.resister.states.bg, true),\n                    },\n                    focus: {\n                        color: colorOut(vars.resister.fg),\n                        backgroundColor: colorOut(vars.resister.states.bg, true),\n                    },\n                    active: {\n                        color: colorOut(vars.resister.fg),\n                        backgroundColor: colorOut(vars.resister.states.bg, true),\n                    },\n                }),\n            },\n        },\n    });\n\n    const compactSearchResults = style(\"compactSearchResults\", {\n        position: \"absolute\",\n        top: unit(formElementVars.sizing.height),\n        maxWidth: px(vars.compactSearch.maxWidth),\n        width: percent(100),\n        $nest: {\n            \"&:empty\": {\n                display: \"none\",\n            },\n        },\n    });\n\n    const clearButtonClass = style(\"clearButtonClass\", {\n        opacity: 0.7,\n        $nest: {\n            \"&&\": {\n                color: colorOut(vars.colors.fg),\n            },\n            \"&:hover, &:focus\": {\n                opacity: 1,\n            },\n        },\n    });\n\n    const guestButton = style(\"guestButton\", {\n        minWidth: unit(vars.button.guest.minWidth),\n        borderRadius: unit(vars.button.borderRadius),\n    });\n\n    const desktopNavWrap = style(\"desktopNavWrap\", {\n        position: \"relative\",\n        flexGrow: 1,\n        ...(addGradientsToHintOverflow(globalVars.gutter.half * 4, vars.colors.bg) as any),\n    });\n\n    return {\n        root,\n        spacer,\n        bar,\n        logoContainer,\n        meBox,\n        nav,\n        locales,\n        messages,\n        notifications,\n        compactSearch,\n        topElement,\n        localeToggle,\n        languages,\n        button,\n        buttonOffset,\n        linkButton,\n        searchCancel,\n        tabButton,\n        dropDownContents,\n        count,\n        extraMeBoxIcons,\n        scroll,\n        rightFlexBasis,\n        leftFlexBasis,\n        signIn,\n        register,\n        centeredButtonClass,\n        compactSearchResults,\n        clearButtonClass,\n        guestButton,\n        logoFlexBasis,\n        desktopNavWrap,\n    };\n});\n\nexport const titleBarLogoClasses = useThemeCache(() => {\n    const vars = titleBarVariables();\n    const style = styleFactory(\"titleBarLogo\");\n    const logoFrame = style(\"logoFrame\", { display: \"inline-flex\" });\n    const logoHeight = px(vars.sizing.height - 18);\n\n    const logo = style(\"logo\", {\n        display: \"block\",\n        height: logoHeight,\n        width: \"auto\",\n        $nest: {\n            \"&.isCentred\": {\n                margin: \"auto\",\n            },\n            [`.${iconClasses().vanillaLogo}`]: {\n                height: logoHeight,\n                width: \"auto\",\n            },\n        },\n    });\n\n    return { logoFrame, logo };\n});\n\nexport const titleBarHomeClasses = useThemeCache(() => {\n    const vars = titleBarVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"titleBarHome\");\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const root = style({\n        minHeight: vars.sizing.mobile.height * 2,\n    });\n\n    const left = style(\"left\", {\n        height: px(1),\n        width: px(vars.button.size),\n        flexBasis: vars.button.size,\n    });\n\n    const bottom = style(\n        \"bottom\",\n        {\n            position: \"relative\",\n            backgroundColor: colorOut(vars.bottomRow.bg),\n            height: unit(vars.sizing.height),\n            width: percent(100),\n            ...(addGradientsToHintOverflow(globalVars.gutter.half * 4, vars.colors.bg) as any),\n        },\n        mediaQueries.oneColumnDown({\n            height: px(vars.sizing.mobile.height),\n            ...(addGradientsToHintOverflow(globalVars.gutter.half * 4, vars.bottomRow.bg) as any),\n        }),\n    );\n\n    return {\n        root,\n        bottom,\n        left,\n    };\n});\n\nexport const scrollWithNoScrollBar = (nestedStyles?: NestedCSSProperties) => {\n    return {\n        overflow: [\"-moz-scrollbars-none\", \"auto\"],\n        \"-ms-overflow-style\": \"none\",\n        $nest: {\n            \"&::-webkit-scrollbar\": {\n                display: \"none\",\n            },\n            ...nestedStyles,\n        },\n    };\n};\n\nexport const addGradientsToHintOverflow = (width: number | string, color: ColorHelper) => {\n    const gradient = (direction: \"right\" | \"left\") => {\n        return `linear-gradient(to ${direction}, ${colorOut(color.fade(0))} 0%, ${colorOut(\n            color.fade(0.3),\n        )} 20%, ${colorOut(color)} 90%)`;\n    };\n    return {\n        $nest: {\n            \"&:after\": {\n                ...absolutePosition.topRight(),\n                background: gradient(\"right\"),\n            },\n            \"&:before\": {\n                ...absolutePosition.topLeft(),\n                background: gradient(\"left\"),\n            },\n            \"&:before, &:after\": {\n                ...pointerEvents(),\n                content: quote(``),\n                height: percent(100),\n                width: unit(width),\n                zIndex: 1,\n            },\n        },\n    };\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ReduxActions, { bindThunkAction } from \"@library/redux/ReduxActions\";\nimport actionCreatorFactory from \"typescript-fsa\";\nimport { ITheme } from \"@library/theming/themeReducer\";\nimport { IApiError } from \"@library/@types/api/core\";\n\nconst createAction = actionCreatorFactory(\"@@themes\");\n\nexport default class ThemeActions extends ReduxActions {\n    public static getAssets = createAction.async<{ themeKey: string }, ITheme, IApiError>(\"GET\");\n    public getAssets = (themeKey: string) => {\n        const { theme } = this.getState();\n        if (theme.assets.data) {\n            return theme.assets.data;\n        }\n\n        const apiThunk = bindThunkAction(ThemeActions.getAssets, async () => {\n            const response = await this.api.get(`/themes/${themeKey}`);\n            return response.data;\n        })({ themeKey });\n        return this.dispatch(apiThunk);\n    };\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IApiError, LoadStatus } from \"@library/@types/api/core\";\nimport { IMe, IMeCounts } from \"@library/@types/api/users\";\nimport ReduxActions, { bindThunkAction } from \"@library/redux/ReduxActions\";\nimport { actionCreatorFactory } from \"typescript-fsa\";\n\nconst createAction = actionCreatorFactory(\"@@users\");\n\n// The duration we wait to check for new counts.\nconst COUNT_CACHE_PERIOD = 60; // 60 Seconds\n\n/**\n * Redux actions for the users data.\n */\nexport default class UserActions extends ReduxActions {\n    public static getMeACs = createAction.async<{}, IMe, IApiError>(\"GET_ME\");\n    /**\n     * Request the currently signed in user data if it's not loaded.\n     */\n    public getMe = () => {\n        const currentUser = this.getState().users.current;\n        if (currentUser.status === LoadStatus.LOADING) {\n            // Don't request the user more than once.\n            return;\n        }\n        const apiThunk = bindThunkAction(UserActions.getMeACs, async () => {\n            const response = await this.api.get(\"/users/me\");\n            return response.data;\n        })();\n\n        return this.dispatch(apiThunk);\n    };\n\n    public static getCountsACs = createAction.async<{}, { counts: IMeCounts }, IApiError>(\"GET_ME_COUNTS\");\n\n    /**\n     * Check if we have valid count data and request it again if it is stale.\n     */\n    public checkCountData = () => {\n        const currentTime = new Date().getTime();\n        const { lastRequested } = this.getState().users.countInformation;\n\n        if (lastRequested !== null && currentTime < lastRequested + COUNT_CACHE_PERIOD) {\n            // Bailout if we've requested this data within the previous cache period\n            return;\n        }\n        const apiThunk = bindThunkAction(UserActions.getCountsACs, async () => {\n            const response = await this.api.get(\"/users/me-counts\");\n            return response.data;\n        })();\n\n        return this.dispatch(apiThunk);\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ILocale } from \"@vanilla/i18n\";\nimport { actionCreatorFactory } from \"typescript-fsa\";\nimport { IApiError, LoadStatus } from \"@library/@types/api/core\";\nimport { bindThunkAction } from \"@library/redux/ReduxActions\";\nimport apiv2 from \"@library/apiv2\";\nimport getStore from \"@library/redux/getStore\";\n\nconst createAction = actionCreatorFactory(\"@@locales\");\nexport const getAllLocalesACs = createAction.async<{}, ILocale[], IApiError>(\"GET_ALL\");\n\n/**\n * Thunk for fetching locales.\n */\nexport function fetchLocalesFromApi(force?: boolean): Promise<ILocale[]> {\n    const { dispatch, getState } = getStore();\n\n    const localeLoadable = getState().locales.locales;\n    if (!force && localeLoadable.status === LoadStatus.SUCCESS) {\n        return Promise.resolve(localeLoadable.data!);\n    }\n\n    const apiThunk = bindThunkAction(getAllLocalesACs, async () => {\n        const response = await apiv2.get(`/locales`);\n        return response.data;\n    })();\n    return apiThunk(dispatch, getState, {});\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { NestedCSSProperties } from \"typestyle/lib/types\";\nimport { unit } from \"@library/styles/styleHelpers\";\n\nexport interface IPaddings {\n    top?: string | number;\n    right?: string | number;\n    bottom?: string | number;\n    left?: string | number;\n    horizontal?: string | number;\n    vertical?: string | number;\n    all?: string | number;\n}\n\nexport const paddings = (styles: IPaddings) => {\n    const paddingVals = {} as NestedCSSProperties;\n\n    if (!styles) {\n        return paddingVals;\n    }\n\n    if (styles.all !== undefined) {\n        paddingVals.paddingTop = unit(styles.all);\n        paddingVals.paddingRight = unit(styles.all);\n        paddingVals.paddingBottom = unit(styles.all);\n        paddingVals.paddingLeft = unit(styles.all);\n    }\n\n    if (styles.vertical !== undefined) {\n        paddingVals.paddingTop = unit(styles.vertical);\n        paddingVals.paddingBottom = unit(styles.vertical);\n    }\n\n    if (styles.horizontal !== undefined) {\n        paddingVals.paddingLeft = unit(styles.horizontal);\n        paddingVals.paddingRight = unit(styles.horizontal);\n    }\n\n    if (styles.top !== undefined) {\n        paddingVals.paddingTop = unit(styles.top);\n    }\n\n    if (styles.right !== undefined) {\n        paddingVals.paddingRight = unit(styles.right);\n    }\n\n    if (styles.bottom !== undefined) {\n        paddingVals.paddingBottom = unit(styles.bottom);\n    }\n\n    if (styles.left !== undefined) {\n        paddingVals.paddingLeft = unit(styles.left);\n    }\n\n    return paddingVals as NestedCSSProperties;\n};\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { logError } from \"@vanilla/utils\";\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport { IUsersStoreState } from \"@library/features/users/userModel\";\nimport ReduxActions, { ActionsUnion } from \"@library/redux/ReduxActions\";\nimport { IUserSuggestion } from \"@library/features/users/suggestion/IUserSuggestion\";\nimport UserSuggestionModel from \"@library/features/users/suggestion/UserSuggestionModel\";\nimport { Dispatch } from \"redux\";\nimport apiv2 from \"@library/apiv2\";\nimport debounce from \"lodash/debounce\";\n\ninterface ILookupUserOptions {\n    username: string;\n}\n\nexport default class UserSuggestionActions extends ReduxActions {\n    public static readonly SET_ACTIVE_SUGGESTION = \"@@mentions/SET_ACTIVE_SUGGESTION\";\n    public static readonly LOAD_USERS_REQUEST = \"@@mentions/GET_USERS_REQUEST\";\n    public static readonly LOAD_USERS_RESPONSE = \"@@mentions/LOAD_USERS_RESPONSE\";\n    public static readonly LOAD_USERS_ERROR = \"@@mentions/LOAD_USERS_ERROR\";\n\n    public static readonly ACTION_TYPES:\n        | ActionsUnion<typeof UserSuggestionActions.loadUsersACs>\n        | ReturnType<typeof UserSuggestionActions.setActiveAC>;\n\n    // The number of characters that we will lookup to try and invalidate a lookup early.\n    private static USER_LIMIT = 50;\n\n    // Action creators\n    public static loadUsersACs = ReduxActions.generateApiActionCreators(\n        UserSuggestionActions.LOAD_USERS_REQUEST,\n        UserSuggestionActions.LOAD_USERS_RESPONSE,\n        UserSuggestionActions.LOAD_USERS_ERROR,\n        {} as IUserSuggestion[],\n        {} as ILookupUserOptions,\n    );\n\n    public static setActiveAC(suggestionID: string, suggestionIndex: number) {\n        return ReduxActions.createAction(UserSuggestionActions.SET_ACTIVE_SUGGESTION, {\n            suggestionID,\n            suggestionIndex,\n        });\n    }\n\n    /**\n     * Filter users down to a list that loosely matches the current searchName\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Collator\n     */\n    public static filterSuggestions(users: IUserSuggestion[], searchName: string) {\n        const searchCollator = Intl.Collator(\"en\", {\n            usage: \"search\",\n            sensitivity: \"base\",\n            ignorePunctuation: true,\n            numeric: true,\n        });\n\n        return users.filter((userSuggestion: IUserSuggestion) => {\n            if (userSuggestion.name.length < searchName.length) {\n                return false;\n            }\n\n            const suggestionIDPartial = userSuggestion.name.substring(0, searchName.length);\n            return searchCollator.compare(suggestionIDPartial, searchName) === 0;\n        });\n    }\n\n    public setActive = this.bindDispatch(UserSuggestionActions.setActiveAC);\n\n    /**\n     * Make an API request for mention suggestions. These results are cached by the lookup username.\n     */\n    private interalLoadUsers = (username: string) => {\n        return this.dispatch((dispatch: Dispatch<any>, getState: () => IUsersStoreState) => {\n            const trie = UserSuggestionModel.selectSuggestionsTrie(getState());\n            // Attempt an exact lookup first.\n            const exactLookup = trie.getValue(username);\n            if (exactLookup != null) {\n                switch (exactLookup.status) {\n                    case LoadStatus.SUCCESS:\n                        if (exactLookup.data) {\n                            return dispatch(\n                                UserSuggestionActions.loadUsersACs.response(\n                                    { data: exactLookup.data, status: 200 },\n                                    { username },\n                                ),\n                            );\n                        }\n                        break;\n                    case LoadStatus.LOADING:\n                        // Already handled\n                        return;\n                    case LoadStatus.ERROR:\n                        // Previously failed.\n                        if (exactLookup.error) {\n                            return dispatch(UserSuggestionActions.loadUsersACs.error(exactLookup.error, { username }));\n                        }\n                }\n            }\n\n            // Attempt a partial lookup to try and see if we can get results without an API request\n            const partialLookup = trie.getValueFromPartialsOfWord(username);\n            if (partialLookup != null) {\n                switch (partialLookup.status) {\n                    case LoadStatus.SUCCESS: {\n                        if (partialLookup.data && partialLookup.data.length < UserSuggestionActions.USER_LIMIT) {\n                            // The previous match already found the maximum amount of users that the server had\n                            // Return the previous results.\n                            return dispatch(\n                                UserSuggestionActions.loadUsersACs.response(\n                                    {\n                                        data: UserSuggestionActions.filterSuggestions(partialLookup.data, username),\n                                        status: 200,\n                                    },\n                                    { username },\n                                ),\n                            );\n                        }\n                        break;\n                    }\n                    case LoadStatus.ERROR:\n                        break;\n                    // Previously failed. We still want to proceed to a real lookup so do nothing.\n                    case LoadStatus.PENDING:\n                        break;\n                    // We still want to proceed to a real lookup so do nothing.\n                }\n            }\n\n            // Start the lookup.\n            dispatch(UserSuggestionActions.loadUsersACs.request({ username }));\n\n            const params = {\n                name: username + \"*\",\n                order: \"mention\",\n                limit: UserSuggestionActions.USER_LIMIT,\n            };\n            return apiv2\n                .get(\"/users/by-names/\", { params /*, cancelToken: this.apiCancelSource.token*/ })\n                .then(response => {\n                    if (response.status >= 500) {\n                        throw new Error(response.data);\n                    }\n\n                    // Add unique domIDs to each user.\n                    response.data = response.data.map(data => {\n                        data.domID = \"mentionSuggestion\" + data.userID;\n                        return data;\n                    });\n\n                    // Result is good. Lets GO!\n                    dispatch(UserSuggestionActions.loadUsersACs.response(response, { username }));\n                })\n                .catch(error => {\n                    logError(error);\n                    dispatch(UserSuggestionActions.loadUsersACs.error(error, { username }));\n                });\n        });\n    };\n\n    public loadUsers = debounce(this.interalLoadUsers, 50);\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { formatUrl } from \"@library/utility/appUtils\";\nimport { createPath, LocationDescriptor, LocationDescriptorObject } from \"history\";\nimport { RouteComponentProps, withRouter } from \"react-router\";\n\nexport interface IWithLinkContext {\n    linkContext: string;\n    pushSmartLocation(location: LocationDescriptor);\n    isDynamicNavigation(location: LocationDescriptor): boolean;\n    makeHref(location: LocationDescriptor): string;\n}\n\nexport const LinkContext = React.createContext<IWithLinkContext>({\n    linkContext: formatUrl(\"/\"),\n    pushSmartLocation: () => {\n        return;\n    },\n    isDynamicNavigation: () => {\n        return false;\n    },\n    makeHref: (location: LocationDescriptor) => {\n        const stringUrl = typeof location === \"string\" ? location : createPath(location);\n        return formatUrl(stringUrl, true);\n    },\n});\n\ninterface IProps extends RouteComponentProps<any> {\n    linkContext: string;\n    children: React.ReactNode;\n    urlFormatter?: (url: string, withDomain?: boolean) => string;\n}\n\nexport const LinkContextProvider = withRouter((props: IProps) => {\n    const makeHref = (location: LocationDescriptor): string => {\n        const { urlFormatter } = props;\n        const finalUrlFormatter = urlFormatter ? urlFormatter : formatUrl;\n        const stringUrl = typeof location === \"string\" ? location : createPath(location);\n        const href = finalUrlFormatter(stringUrl, true);\n        return href;\n    };\n\n    /**\n     * Determine if the URL is one that we are able to navigate to dynamically.\n     *\n     * This should be true if we are nested inside of or are the linkContext.\n     * The current URL is excluded so that a click on your own page does something the user can see.\n     *\n     * @param href The URL to check.\n     */\n    const isDynamicNavigation = (href: string): boolean => {\n        const link = new URL(href, window.location.href);\n        const isCurrentPage = link.pathname === window.location.pathname;\n        return href.startsWith(props.linkContext) && !isCurrentPage;\n    };\n\n    const pushSmartLocation = (location: LocationDescriptor) => {\n        const href = makeHref(location);\n        if (isDynamicNavigation(href)) {\n            props.history.push(makeLocationDescriptorObject(location, href));\n        } else {\n            window.location.href = href;\n        }\n    };\n\n    return (\n        <LinkContext.Provider\n            value={{\n                linkContext: props.linkContext,\n                pushSmartLocation,\n                isDynamicNavigation,\n                makeHref,\n            }}\n        >\n            {props.children}\n        </LinkContext.Provider>\n    );\n});\n\n/**\n * Create a new LocationDescriptor with a \"relative\" path.\n *\n * This way we ensure we use react-router's navigation and not a full refresh.\n *\n * @param initial The starting location. We may want to preserve state here if we can.\n * @param newHref The new string url to point to.\n */\nexport function makeLocationDescriptorObject(initial: LocationDescriptor, newHref: string): LocationDescriptorObject {\n    // Get the search and pathName\n    const link = new URL(newHref, window.location.href);\n    const { search, pathname } = link;\n\n    const appRelativeLink = pathname.replace(formatUrl(\"/\"), \"/\");\n\n    if (typeof initial === \"string\") {\n        return {\n            pathname: appRelativeLink,\n            search,\n        };\n    } else {\n        return {\n            ...initial,\n            pathname: appRelativeLink,\n            search,\n        };\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport ThemeActions from \"@library/theming/ThemeActions\";\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport produce from \"immer\";\n\nexport interface ITheme {\n    assets: IThemeAssets;\n}\n\nexport interface IThemeAssets {\n    fonts?: IThemeFont[];\n    logo?: IThemeExternalAsset;\n    mobileLogo?: IThemeExternalAsset;\n    variables?: IThemeVariables;\n}\n\nexport interface IThemeFont {\n    name: string;\n    url: string;\n    fallbacks: string[];\n}\n\nexport interface IThemeExternalAsset {\n    type: string;\n    url: string;\n}\n\nexport interface IThemeVariables {\n    [key: string]: string;\n}\n\nexport interface IThemeState {\n    assets: ILoadable<IThemeAssets>;\n}\n\nexport const INITIAL_STATE: IThemeState = {\n    assets: {\n        status: LoadStatus.PENDING,\n    },\n};\n\nexport const themeReducer = produce(\n    reducerWithInitialState(INITIAL_STATE)\n        .case(ThemeActions.getAssets.started, state => {\n            state.assets.status = LoadStatus.LOADING;\n            return state;\n        })\n        .case(ThemeActions.getAssets.done, (state, payload) => {\n            state.assets.status = LoadStatus.SUCCESS;\n            state.assets.data = payload.result.assets;\n            return state;\n        })\n        .case(ThemeActions.getAssets.failed, (state, payload) => {\n            if (payload.error.response && payload.error.response.status === 404) {\n                // This theme just doesn't have variables. Use the defaults.\n                state.assets.data = {};\n                state.assets.status = LoadStatus.SUCCESS;\n                return state;\n            } else {\n                state.assets.status = LoadStatus.ERROR;\n                state.assets.error = payload.error;\n                return state;\n            }\n        }),\n);\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { produce } from \"immer\";\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport { ILocale } from \"@vanilla/i18n\";\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport { getAllLocalesACs } from \"@library/locales/localeActions\";\n\nexport interface ILocaleState {\n    locales: ILoadable<ILocale[]>;\n}\n\nconst DEFAULT_LOCALE_STATE = {\n    locales: {\n        status: LoadStatus.PENDING,\n    },\n};\n\nexport const localeReducer = produce(\n    reducerWithInitialState<ILocaleState>(DEFAULT_LOCALE_STATE)\n        .case(getAllLocalesACs.started, (nextState, payload) => {\n            nextState.locales.status = LoadStatus.LOADING;\n            return nextState;\n        })\n        .case(getAllLocalesACs.done, (nextState, payload) => {\n            nextState.locales.status = LoadStatus.SUCCESS;\n            nextState.locales.data = payload.result;\n            return nextState;\n        })\n        .case(getAllLocalesACs.failed, (nextState, payload) => {\n            nextState.locales.status = LoadStatus.ERROR;\n            nextState.locales.error = payload.error;\n            return nextState;\n        }),\n);\n","/**\n * A reducer registry so that we can have dynamically loading reducers.\n *\n * @see http://nicolasgallagher.com/redux-modules-and-code-splitting/\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IThemeState, themeReducer } from \"@library/theming/themeReducer\";\nimport { IUsersStoreState, usersReducer } from \"@library/features/users/userModel\";\nimport { Reducer, ReducersMapObject, combineReducers } from \"redux\";\nimport { ILocaleState, localeReducer } from \"@library/locales/localeReducer\";\nimport getStore from \"@library/redux/getStore\";\n\nconst dynamicReducers = {};\n\nexport function registerReducer(name: string, reducer: Reducer) {\n    dynamicReducers[name] = reducer;\n    getStore().replaceReducer(combineReducers(getReducers()));\n}\n\nexport interface ICoreStoreState extends IUsersStoreState {\n    theme: IThemeState;\n    locales: ILocaleState;\n}\n\nexport function getReducers(): ReducersMapObject<any, any> {\n    return {\n        // We have a few static reducers.\n        users: usersReducer,\n        theme: themeReducer,\n        locales: localeReducer,\n        ...dynamicReducers,\n    };\n}\n\n/**\n * @deprecated\n */\nconst reducerRegistry = {\n    register: registerReducer,\n    getReducers,\n};\n\nexport default reducerRegistry;\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { delegateEvent } from \"@vanilla/dom-utils\";\n\nexport function initSpoilers() {\n    // Setup\n    delegateEvent(\"click\", \".js-toggleSpoiler\", handleToggleSpoiler);\n}\n\n/**\n * Toggle a spoiler open and closed.\n */\nfunction handleToggleSpoiler(event: MouseEvent, triggeringElement: HTMLElement) {\n    const toggleButton = triggeringElement;\n\n    const spoilerContainer = toggleButton.closest(\".spoiler\");\n    if (spoilerContainer) {\n        spoilerContainer.classList.toggle(\"isShowingSpoiler\");\n    }\n}\n","/**\n * Wire together the different parts of the application.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { initCodeHighlighting } from \"@library/content/code\";\nimport { initEmojiSupport } from \"@library/content/emoji\";\nimport { initSpoilers } from \"@library/content/spoilers\";\nimport { mountAllEmbeds } from \"@library/embeddedContent/embedService\";\n\nexport async function initAllUserContent() {\n    initEmojiSupport();\n    initSpoilers();\n    await mountAllEmbeds();\n    initCodeHighlighting();\n}\n\n/**\n * Runs method for all embeds that need to be rendered everytime content changes.\n * This is ideal for something like react's `componentDidMount`.\n */\nexport function convertAllUserContent() {\n    mountAllEmbeds();\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { onReady, onContent } from \"@library/utility/appUtils\";\nimport { convertToSafeEmojiCharacters } from \"@vanilla/dom-utils\";\n\nexport function initEmojiSupport() {\n    // Emoji\n    onReady(() => convertToSafeEmojiCharacters(document.body));\n    onContent(() => convertToSafeEmojiCharacters(document.body));\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\n\ninterface IProps {\n    children: React.ReactNode;\n    tag?: keyof JSX.IntrinsicElements;\n}\n\n/**\n * Children of component only visible to screen readers\n */\nexport default class ScreenReaderContent extends React.PureComponent<IProps> {\n    public render() {\n        const Tag = this.props.tag || \"div\";\n        return <Tag className=\"sr-only\">{this.props.children}</Tag>;\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport React from \"react\";\nimport { AttachmentType } from \"@library/content/attachments/AttatchmentType\";\nimport {\n    FileTypeGenericIcon,\n    FileTypeWordIcon,\n    FileTypeExcelIcon,\n    FileTypePDFIcon,\n    FileTypeImageIcon,\n    FileTypePowerPointIcon,\n    FileTypeZipIcon,\n} from \"@library/icons/fileTypes\";\n/**\n * Map a mimeType into an AttachmentType.\n *\n * @param mimeType\n */\nexport function mimeTypeToAttachmentType(mimeType?: string | null): AttachmentType {\n    if (!mimeType) {\n        return AttachmentType.FILE;\n    }\n\n    if (mimeType.startsWith(\"image/\")) {\n        return AttachmentType.IMAGE;\n    }\n\n    switch (mimeType) {\n        case \"application/pdf\":\n            return AttachmentType.PDF;\n        case \"application/vnd.ms-excel\":\n        case \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":\n            return AttachmentType.EXCEL;\n        case \"application/msword\":\n        case \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\n            return AttachmentType.WORD;\n        case \"application/vnd.ms-powerpoint\":\n        case \"application/vnd.openxmlformats-officedocument.presentationml.presentation\":\n            return AttachmentType.PPT;\n        case \"application/zip\":\n        case \"application/x-7z-compressed\":\n        case \"application/x-bzip\":\n        case \"application/x-bzip2\":\n        case \"application/x-rar-compressed\":\n            return AttachmentType.ARCHIVE;\n        default:\n            return AttachmentType.FILE;\n    }\n}\n\nexport function GetAttachmentIcon(props: { type: AttachmentType; className?: string }) {\n    switch (props.type) {\n        case AttachmentType.PDF:\n            return <FileTypePDFIcon className={props.className} />;\n        case AttachmentType.EXCEL:\n            return <FileTypeExcelIcon className={props.className} />;\n        case AttachmentType.WORD:\n            return <FileTypeWordIcon className={props.className} />;\n        case AttachmentType.PPT:\n            return <FileTypePowerPointIcon className={props.className} />;\n        case AttachmentType.ARCHIVE:\n            return <FileTypeZipIcon className={props.className} />;\n        case AttachmentType.IMAGE:\n            return <FileTypeImageIcon className={props.className} />;\n        default:\n            return <FileTypeGenericIcon className={props.className} />;\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IUserSuggestion } from \"@library/features/users/suggestion/IUserSuggestion\";\nimport { ILoadable } from \"@library/@types/api/core\";\n\nexport type ISuggestionValue = ILoadable<IUserSuggestion[]>;\n\nexport interface ISuggestionNode {\n    children?: {\n        [key: string]: ISuggestionNode;\n    };\n    value?: ISuggestionValue;\n}\n\n/**\n * A trie for storage of mention data.\n */\nexport default class SuggestionTrie {\n    public MAX_PARTIAL_LOOKUP_ITERATIONS = 10;\n    private root: ISuggestionNode = {};\n\n    /**\n     * Insert a value into a node for the word. This will overwrite whatever value the node already has\n     *\n     * @param word - The location in the trie.\n     * @param value - The value for the node.\n     */\n    public insert(word: string, value: ISuggestionValue): void {\n        let current = this.root;\n\n        for (let i = 0; i < word.length; i++) {\n            const letter = word[i];\n            if (!current.children) {\n                current.children = {};\n            }\n\n            if (!(letter in current.children)) {\n                const contents: ISuggestionNode = i !== word.length - 1 ? {} : { children: {} };\n                current.children[letter] = contents;\n            }\n\n            current = current.children[letter];\n        }\n\n        current.value = value;\n    }\n\n    /**\n     * Get a node for a given word.\n     *\n     * If no word is passed the root node will be returned.\n     *\n     * @param word - The word to lookup.\n     */\n    public getNode(word?: string): ISuggestionNode | null {\n        let node = this.root;\n        if (word === undefined) {\n            return node;\n        }\n\n        for (let i = 0; i < word.length; i++) {\n            const char = word.charAt(i);\n            if (node.children && node.children[char]) {\n                node = node.children[char];\n            } else {\n                return null;\n            }\n        }\n        return node;\n    }\n\n    /**\n     * Get the value out of a particular node.\n     *\n     * @param word - The word to lookup.\n     */\n    public getValue(word: string): ISuggestionValue | null {\n        const node = this.getNode(word);\n        return (node && node.value) || null;\n    }\n\n    /**\n     * Lookup the value for a word using increasingly small substrings of the current string.\n     *\n     * Number of iterations is capped at MAX_PARTIAL_LOOKUP_ITERATIONS.\n     *\n     * ex. this.getValueFormPartials(\"test\") will lookup for\n     * - \"test\",\n     * - \"tes\",\n     * - \"te\",\n     * - \"t\"\n     *\n     * And return immediately if it finds a result.\n     */\n    public getValueFromPartialsOfWord(word: string): ISuggestionValue | null {\n        const startingLength = Math.min(this.MAX_PARTIAL_LOOKUP_ITERATIONS, word.length);\n        for (let x = startingLength; x > 0; x--) {\n            const substring = word.substring(0, x);\n            const potentialValue = this.getValue(substring);\n            if (potentialValue != null) {\n                return potentialValue;\n            }\n        }\n\n        return null;\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport { IUsersStoreState } from \"@library/features/users/userModel\";\nimport SuggestionTrie from \"@library/features/users/suggestion/SuggestionTrie\";\nimport { IUserSuggestion } from \"@library/features/users/suggestion/IUserSuggestion\";\nimport UserSuggestionActions from \"@library/features/users/suggestion/UserSuggestionActions\";\nimport ReduxReducer from \"@library/redux/ReduxReducer\";\nimport moment from \"moment\";\nimport { IUserFragment } from \"@library/@types/api/users\";\n\nexport interface IUserSuggestionState {\n    lastSuccessfulUsername: string | null;\n    currentUsername: string | null;\n    trie: SuggestionTrie;\n    activeSuggestionID: string;\n    activeSuggestionIndex: number;\n}\n\nexport interface IInjectableSuggestionsProps {\n    lastSuccessfulUsername: string | null;\n    currentUsername: string | null;\n    activeSuggestionID: string;\n    activeSuggestionIndex: number;\n    suggestions: ILoadable<IUserSuggestion[]>;\n    isLoading: boolean;\n}\n\nexport default class UserSuggestionModel implements ReduxReducer<IUserSuggestionState> {\n    private static readonly defaultSuggestions: ILoadable<IUserSuggestion[]> = {\n        status: LoadStatus.PENDING,\n    };\n\n    public static mapStateToProps(state: IUsersStoreState): IInjectableSuggestionsProps {\n        const stateSlice = { ...UserSuggestionModel.stateSlice(state) };\n        const { trie, ...rest } = stateSlice;\n        const suggestions = stateSlice.lastSuccessfulUsername\n            ? trie.getValue(stateSlice.lastSuccessfulUsername) || UserSuggestionModel.defaultSuggestions\n            : UserSuggestionModel.defaultSuggestions;\n\n        const currentNode = stateSlice.currentUsername && trie.getValue(stateSlice.currentUsername);\n        const isLoading = !!currentNode && currentNode.status === LoadStatus.LOADING;\n\n        return {\n            ...rest,\n            suggestions,\n            isLoading,\n        };\n    }\n\n    public static selectSuggestionsTrie(state: IUsersStoreState): SuggestionTrie {\n        return UserSuggestionModel.stateSlice(state).trie;\n    }\n\n    private static stateSlice(state: IUsersStoreState): IUserSuggestionState {\n        if (!state.users || !state.users.suggestions) {\n            throw new Error(\n                `Could not find users.suggestions in state ${state}. Be sure to initialize the usersReducer()`,\n            );\n        }\n\n        return state.users.suggestions;\n    }\n\n    /**\n     * Sort a list of user suggestions.\n     *\n     * Priorities\n     * [Exact Match]\n     * [Users active in the last 90 days, sorted loosely with transliteration]\n     * [Users not active in the last 90 days, sorted loosely with transliteration]\n     *\n     * @param users The users to sort.\n     * @param searchName The current search text.\n     * @param currentMoment The current time.\n     */\n    public static sortSuggestions(users: IUserSuggestion[], searchName: string, currentMoment = moment()) {\n        const looseCollator = Intl.Collator(\"en\", {\n            usage: \"sort\",\n            sensitivity: \"variant\",\n            ignorePunctuation: true,\n            numeric: true,\n        });\n\n        // Days of recent activity to look at.\n        const ACTIVE_THRESHOLD = 90;\n\n        // Fan out into most recently active users & less active users.\n        let recentlyActive: IUserSuggestion[] = [];\n        let lessActive: IUserSuggestion[] = [];\n\n        const daysAgo90 = currentMoment.subtract(ACTIVE_THRESHOLD, \"days\");\n\n        for (const user of users) {\n            if (!user.dateLastActive) {\n                lessActive.push(user);\n                continue;\n            }\n\n            const lastActiveMoment = moment(user.dateLastActive);\n            if (lastActiveMoment.isSameOrAfter(daysAgo90)) {\n                recentlyActive.push(user);\n            } else {\n                lessActive.push(user);\n            }\n        }\n\n        const sortByName = (userA: IUserSuggestion, userB: IUserSuggestion) => {\n            const casedSearchName = searchName.toLocaleLowerCase();\n            const aCasedName = userA.name.toLocaleLowerCase();\n            const bCasedName = userB.name.toLocaleLowerCase();\n\n            // Return partial matches first.\n            if (aCasedName.startsWith(casedSearchName) && !bCasedName.startsWith(casedSearchName)) {\n                return -1;\n            }\n            if (bCasedName.startsWith(casedSearchName) && !aCasedName.startsWith(casedSearchName)) {\n                return 1;\n            }\n            return looseCollator.compare(userA.name.toLocaleLowerCase(), userB.name.toLocaleLowerCase());\n        };\n\n        const exactToTheTop = (userA: IUserSuggestion, userB: IUserSuggestion) => {\n            const casedSearchName = searchName.toLocaleLowerCase();\n            const aCasedName = userA.name.toLocaleLowerCase();\n\n            //  Return exact matches first.\n            if (aCasedName === casedSearchName) {\n                return -1;\n            }\n\n            // Don't affect the sorts otherwise.\n            return 0;\n        };\n\n        // Sort each set of users separately.\n        recentlyActive.sort(sortByName);\n        lessActive.sort(sortByName);\n\n        // Join them back together.\n        const allUsers = [...recentlyActive, ...lessActive];\n\n        // Sort exact matches to the top.\n        allUsers.sort(exactToTheTop);\n        return allUsers;\n    }\n\n    public readonly initialState: IUserSuggestionState = {\n        lastSuccessfulUsername: null,\n        currentUsername: null,\n        trie: new SuggestionTrie(),\n        activeSuggestionID: \"\",\n        activeSuggestionIndex: 0,\n    };\n\n    public reducer = (\n        state = this.initialState,\n        action: typeof UserSuggestionActions.ACTION_TYPES,\n    ): IUserSuggestionState => {\n        switch (action.type) {\n            case UserSuggestionActions.LOAD_USERS_REQUEST: {\n                const { username } = action.meta;\n                state.trie.insert(username, {\n                    status: LoadStatus.LOADING,\n                });\n\n                // We want to invalidate the previous results unless:\n                // - The new string is longer than the old one\n                // - The new string is a superset of the old one.\n                let shouldKeepPreviousResults = false;\n                const previousSuccessfulName = state.lastSuccessfulUsername;\n                if (previousSuccessfulName != null && username.length >= previousSuccessfulName.length) {\n                    const newNameSubstring = username.substring(0, previousSuccessfulName.length);\n                    if (newNameSubstring === previousSuccessfulName) {\n                        shouldKeepPreviousResults = true;\n                    }\n                }\n\n                return {\n                    ...state,\n                    currentUsername: username,\n                    lastSuccessfulUsername: shouldKeepPreviousResults ? state.lastSuccessfulUsername : null,\n                };\n            }\n            case UserSuggestionActions.LOAD_USERS_ERROR: {\n                const error = action.payload;\n                const { username } = action.meta;\n                state.trie.insert(username, {\n                    status: LoadStatus.ERROR,\n                    data: undefined,\n                    error,\n                });\n                return state;\n            }\n            case UserSuggestionActions.LOAD_USERS_RESPONSE: {\n                const users = action.payload.data;\n                const { username } = action.meta;\n                state.trie.insert(username, {\n                    status: LoadStatus.SUCCESS,\n                    data: UserSuggestionModel.sortSuggestions(users, username),\n                });\n\n                const firstUserID = users.length > 0 ? users[0].domID : \"\";\n                return {\n                    ...state,\n                    activeSuggestionID: firstUserID,\n                    activeSuggestionIndex: 0,\n                    lastSuccessfulUsername: username,\n                    currentUsername: username,\n                };\n            }\n            case UserSuggestionActions.SET_ACTIVE_SUGGESTION: {\n                const { suggestionID, suggestionIndex } = action.payload;\n                return {\n                    ...state,\n                    activeSuggestionID: suggestionID,\n                    activeSuggestionIndex: suggestionIndex,\n                };\n            }\n            default:\n                return state;\n        }\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { t } from \"@library/utility/appUtils\";\n\ninterface IHumanFileSize {\n    amount: number;\n    unit: string;\n    unitAbbr: string;\n}\n\nenum FileSizeUnit {\n    B = \"B\",\n    KB = \"KB\",\n    MB = \"MB\",\n    GB = \"GB\",\n    TB = \"TB\",\n}\n\n/**\n * Parse a number of bytes into pieces of a human readable file size.\n *\n * @param size File size in bytes\n */\nexport function humanFileSize(size: number): IHumanFileSize {\n    const i: number = Math.floor(Math.log(size) / Math.log(1024));\n    const unitAbbr = Object.values(FileSizeUnit)[i];\n\n    const fullValue: number = size / Math.pow(1024, i);\n    // 2 digits\n    const value = Number.parseFloat(fullValue.toFixed(2));\n    const unit = getUnabbreviatedFileSizeUnit(unitAbbr);\n    return {\n        amount: value,\n        unit,\n        unitAbbr,\n    };\n}\n\n/**\n * Component for rendering the results of `humanFileSize`.\n */\nexport function HumanFileSize(props: { numBytes: number }) {\n    const humanSize = humanFileSize(props.numBytes);\n    return (\n        <>\n            {humanSize.amount}\n            <abbr title={humanSize.unit}>{` ${humanSize.unitAbbr}`}</abbr>\n        </>\n    );\n}\n\n/**\n * Convert from FileSizeUnit to the unabbreviated version.\n *\n * @param unit The unit to translate.\n */\nfunction getUnabbreviatedFileSizeUnit(unit: FileSizeUnit): string {\n    switch (unit) {\n        case FileSizeUnit.B:\n            return t(\"Byte\");\n        case FileSizeUnit.KB:\n            return t(\"Kilobyte\");\n        case FileSizeUnit.MB:\n            return t(\"Megabyte\");\n        case FileSizeUnit.GB:\n            return t(\"Gigabyte\");\n        case FileSizeUnit.TB:\n            return t(\"Terabyte\");\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useContext } from \"react\";\nimport { logWarning } from \"@vanilla/utils\";\nimport { style } from \"typestyle\";\n\ntype ScollOffsetSetter = (offset: number) => void;\n\ninterface IContextParams {\n    setScrollOffset: ScollOffsetSetter;\n    resetScrollOffset: () => void;\n    scrollOffset: number | null;\n    offsetClass: string;\n    getCalcedHashOffset(): number;\n    hashOffsetRef: React.RefObject<HTMLDivElement>;\n    temporarilyDisabledWatching: (duration: number) => void;\n}\n\nexport const ScrollOffsetContext = React.createContext<IContextParams>({\n    setScrollOffset: () => {\n        logWarning(\"Set scroll offset called, but a proper provider was not configured.\");\n    },\n    resetScrollOffset: () => {\n        logWarning(\"Reset scroll offset called, but a proper provider was not configured.\");\n    },\n    scrollOffset: null,\n    getCalcedHashOffset: () => 0,\n    temporarilyDisabledWatching: () => {\n        logWarning(\"Attempted to disable watching but a proper provider was not configured.\");\n    },\n    hashOffsetRef: {\n        current: null,\n    },\n    offsetClass: \"\",\n});\n\nexport interface IWithScrollOffset {\n    setScrollOffset: ScollOffsetSetter;\n}\n\ninterface IProps {\n    scrollWatchingEnabled?: boolean;\n    children: React.ReactNode;\n}\n\ninterface IState {\n    scrollOffset: number;\n    isScrolledOff: boolean;\n    hashOffset: number;\n    isWatchingEnabled: boolean;\n}\n\n/**\n * Provider for handling a global scroll offset.\n * This wraps `ScrollOffset.Provider` with some good default behaviour.\n *\n * Using this, you can have one component declare an offset value.\n * Other components can then recieve this value through context.\n * The context itself handles watching the scroll position and provides a CSS Class styling for the offset.\n *\n * Using the CSS class provided out of this context will translate the set value into translateY value.\n * @see setScrollOffset\n */\nexport class ScrollOffsetProvider extends React.Component<IProps, IState> {\n    public state: IState = {\n        scrollOffset: 0,\n        isScrolledOff: false,\n        hashOffset: 0,\n        isWatchingEnabled: true,\n    };\n\n    private hashOffsetRef = React.createRef<HTMLDivElement>();\n\n    /**\n     * @inheritdoc\n     */\n    public render() {\n        const { scrollWatchingEnabled } = this.props;\n\n        // Generate a CSS based on our calculated values.\n        const { scrollOffset, isScrolledOff } = this.state;\n        const offsetClass = style({\n            transition: \"transform 0.3s ease\",\n            willChange: \"transform\",\n            transform: isScrolledOff ? `translateY(-${scrollOffset}px)` : \"none\",\n        });\n\n        // Render out the context with all values and methods.\n        return (\n            <ScrollOffsetContext.Provider\n                value={{\n                    setScrollOffset: this.setScrollOffset,\n                    resetScrollOffset: this.resetScrollOffset,\n                    scrollOffset: isScrolledOff && scrollWatchingEnabled ? scrollOffset : 0,\n                    offsetClass: scrollWatchingEnabled ? offsetClass : \"\",\n                    getCalcedHashOffset: this.getCalcedHashOffset,\n                    hashOffsetRef: this.hashOffsetRef,\n                    temporarilyDisabledWatching: this.temporarilyDisabledWatching,\n                }}\n            >\n                {this.props.children}\n            </ScrollOffsetContext.Provider>\n        );\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public componentDidMount() {\n        window.addEventListener(\"scroll\", this.scrollHandler);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public componentWillUnmount() {\n        window.removeEventListener(\"scroll\", this.scrollHandler);\n    }\n\n    private get shouldWatchScroll() {\n        return this.props.scrollWatchingEnabled && this.state.isWatchingEnabled;\n    }\n\n    private temporarilyDisabledWatching = (duration: number) => {\n        this.setState({ isWatchingEnabled: false });\n        setTimeout(() => {\n            this.setState({ isWatchingEnabled: true });\n        }, duration);\n    };\n\n    /** Keep a local copy of our previous window scroll value. */\n    private previousScrollValue = 0;\n\n    private scrollHandler = () => {\n        // Early bailout if we aren't watching scroll position.\n        if (!this.shouldWatchScroll) {\n            return;\n        }\n\n        // Trigger the scrolled state if we've moved up or down by a certain number of pixels.\n        requestAnimationFrame(() => {\n            const wiggleRoom = 10;\n            const newScrolledValue = window.scrollY;\n\n            // Always show if we are within the initial scrolloffset.\n            if (newScrolledValue < 400) {\n                this.setState({ isScrolledOff: false });\n                return;\n            }\n\n            const isScrollingDown = newScrolledValue > this.previousScrollValue + wiggleRoom;\n            const isScrollingUp = newScrolledValue < this.previousScrollValue - wiggleRoom;\n            this.previousScrollValue = window.scrollY;\n            if (isScrollingDown) {\n                this.setState({ isScrolledOff: true });\n            } else if (isScrollingUp) {\n                this.setState({ isScrolledOff: false });\n            }\n        });\n    };\n\n    /**\n     * Reset the context state.\n     */\n    private resetScrollOffset = () => {\n        this.setState({\n            scrollOffset: 0,\n            isScrolledOff: false,\n        });\n    };\n\n    /**\n     * Set the value items will be translated by.\n     */\n    private setScrollOffset: ScollOffsetSetter = offset => {\n        this.setState({ scrollOffset: offset });\n    };\n\n    private getCalcedHashOffset = (): number => {\n        const offsetElement = this.hashOffsetRef.current;\n        if (!offsetElement) {\n            return 0;\n        }\n\n        const rect = offsetElement.getBoundingClientRect();\n        return rect.bottom;\n    };\n}\n\nexport function useScrollOffset() {\n    return useContext(ScrollOffsetContext);\n}\n\n/**\n * Component that reports it's bottom most position to the scroll offset provider.\n *\n * Eg. If you click a link #some-hash and an element with the ID `some-hash` is present in the page\n * that item will stay below the HashOffsetReporter.\n */\nexport function HashOffsetReporter(props: { children: React.ReactNode }) {\n    const offset = useScrollOffset();\n    return <div ref={offset.hashOffsetRef}>{props.children}</div>;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\n\ninterface IProps {\n    condition: boolean;\n    className?: string;\n    tag?: keyof JSX.IntrinsicElements;\n    children?: React.ReactNode;\n}\n\n/**\n * Facilitates wrapping conditionally a component\n */\nexport default class ConditionalWrap extends React.Component<IProps> {\n    public render() {\n        const { condition, className, tag, children } = this.props;\n        const Tag = tag || \"div\";\n        if (condition) {\n            return <Tag className={className}>{children}</Tag>;\n        } else {\n            return <>{children}</>;\n        }\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { ComponentClass } from \"react\";\nimport { logWarning, logError } from \"@vanilla/utils\";\nimport { mountReact } from \"@vanilla/react-utils\";\nimport { AppContext } from \"@library/AppContext\";\n\nlet useTheme = true;\n\n/**\n * Disable theming for the site. This is useful for sections like the dashboard.\n */\nexport function disableComponentTheming() {\n    useTheme = false;\n}\n\n/**\n * The currently registered Components.\n * @private\n */\nconst _components = {};\n\n/**\n * Register a component in the Components registry.\n *\n * @param name The name of the component.\n * @param component The component to register.\n */\nexport function addComponent(name: string, component: React.ComponentType<any>) {\n    _components[name.toLowerCase()] = component;\n}\n\n/**\n * Test to see if a component has been registered.\n *\n * @param name The name of the component to test.\n * @returns Returns **true** if the component has been registered or **false** otherwise.\n */\nexport function componentExists(name: string): boolean {\n    return _components[name.toLowerCase()] !== undefined;\n}\n\n/**\n * Get a component from the component registry.\n *\n * @param name The name of the component.\n * @returns Returns the component or **undefined** if there is no registered component.\n */\nexport function getComponent(name: string): ComponentClass | undefined {\n    return _components[name.toLowerCase()];\n}\n\n/**\n * Mount all declared Components on the dom.\n *\n * The page signifies that an element contains a component with the `data-react=\"<Component>\"` attribute.\n *\n * @param parent - The parent element to search. This element is not included in the search.\n */\nexport function _mountComponents(parent: Element) {\n    parent.querySelectorAll(\"[data-react]\").forEach(node => {\n        if (!(node instanceof HTMLElement)) {\n            logWarning(\"Attempting to mount a data-react component on an invalid element\", node);\n            return;\n        }\n\n        const name = node.getAttribute(\"data-react\") || \"\";\n        let props = node.getAttribute(\"data-props\") || {};\n        if (typeof props === \"string\") {\n            props = JSON.parse(props);\n        }\n\n        const Component = getComponent(name);\n\n        if (Component) {\n            mountReact(\n                <AppContext variablesOnly noTheme={!useTheme}>\n                    <Component {...props} />\n                </AppContext>,\n                node,\n                undefined,\n                { overwrite: true },\n            );\n        } else {\n            logError(\"Could not find component %s.\", name);\n        }\n    });\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { createRef, useContext, useEffect, useState } from \"react\";\nimport { logWarning } from \"@vanilla/utils\";\n\ntype FontSizeSetter = (fontSize: number | null) => void;\n\ninterface IContextParams {\n    setFontSize: FontSizeSetter;\n    fontSize: number | null;\n}\n\nexport const FontSizeCalculatorContext = React.createContext<IContextParams>({\n    setFontSize: () => {\n        logWarning(\"'setFontSize' called, but a proper provider was not configured.\");\n    },\n    fontSize: null,\n});\n\nexport interface IWithFontSize {\n    setFontSize: FontSizeSetter;\n}\n\ninterface IProps {\n    children: React.ReactNode;\n}\n\n/**\n * Provider for getting a calculated font size from an element.\n * This context is to center elements based on the font size of text,\n * so it stays centered on the first line.\n *\n * Returns the line height in pixels\n *\n * @see fontSize\n */\nexport function FontSizeCalculatorProvider(props: IProps) {\n    const { children } = props;\n    const [fontSize, setFontSize] = useState<number | null>(null);\n\n    return (\n        <FontSizeCalculatorContext.Provider\n            value={{\n                setFontSize,\n                fontSize,\n            }}\n        >\n            {children}\n        </FontSizeCalculatorContext.Provider>\n    );\n}\n\nexport function useFontSizeCalculator() {\n    return useContext(FontSizeCalculatorContext);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\nimport { percent, viewHeight } from \"csx\";\nimport { cssRule } from \"typestyle\";\nimport { colorOut, background, fontFamilyWithDefaults, margins, paddings, fonts } from \"@library/styles/styleHelpers\";\n\nexport const bodyCSS = useThemeCache(() => {\n    const globalVars = globalVariables();\n    cssRule(\"html\", {\n        \"-ms-overflow-style\": \"-ms-autohiding-scrollbar\",\n    });\n\n    cssRule(\"html, body\", {\n        backgroundColor: colorOut(globalVars.body.backgroundImage.color),\n        ...fonts({\n            size: globalVars.fonts.size.medium,\n            family: globalVars.fonts.families.body,\n            color: globalVars.mainColors.fg,\n        }),\n        wordBreak: \"break-word\",\n        overscrollBehavior: \"none\", // For IE -> https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior\n    });\n\n    cssRule(\"*\", {\n        // For Mobile Safari -> https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior\n        \"-webkit-overflow-scrolling\": \"touch\",\n    });\n\n    cssRule(\"h1, h2, h3, h4, h5, h6\", {\n        display: \"block\",\n        lineHeight: globalVars.lineHeights.condensed,\n        ...margins({\n            all: 0,\n        }),\n        ...paddings({\n            all: 0,\n        }),\n    });\n\n    cssRule(\"p\", {\n        ...margins({\n            all: 0,\n        }),\n        ...paddings({\n            all: 0,\n        }),\n    });\n\n    cssRule(\".page\", {\n        display: \"flex\",\n        overflow: \"visible\",\n        flexDirection: \"column\",\n        width: percent(100),\n        minHeight: viewHeight(100),\n        position: \"relative\",\n        zIndex: 0,\n    });\n\n    cssRule(\"button\", {\n        \"-webkit-appearance\": \"none\",\n        \"-moz-appearance\": \"none\",\n    });\n\n    cssRule(\".page-minHeight\", {\n        flexGrow: 1,\n        display: \"flex\",\n        flexDirection: \"column\",\n    });\n\n    cssRule(\n        `input::-webkit-search-decoration,\n        input::-webkit-search-cancel-button,\n        input::-webkit-search-results-button,\n        input::-webkit-search-results-decoration,\n        input::-ms-clear`,\n        {\n            display: \"none\",\n        },\n    );\n});\n\nexport const bodyClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"fullBackground\");\n    const image = globalVars.body.backgroundImage;\n    const root = style(\n        {\n            display: !image ? \"none\" : \"block\",\n            position: \"fixed\",\n            top: 0,\n            left: 0,\n            width: percent(100),\n            height: viewHeight(100),\n            zIndex: -1,\n        },\n        background(image),\n    );\n\n    return { root };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { bodyClasses, bodyCSS } from \"@library/layout/bodyStyles\";\n\n/**\n * Creates a drop down menu\n */\nexport default class Backgrounds extends React.Component {\n    public render() {\n        bodyCSS(); // set styles on body tag\n\n        // Make a backwards compatible body background (absolute positioned).\n        const classes = bodyClasses();\n        return <div className={classes.root} />;\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { absolutePosition, flexHelper, ISpinnerProps, spinnerLoader, unit } from \"@library/styles/styleHelpers\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { TLength } from \"typestyle/lib/types\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { percent } from \"csx\";\n\nexport const loaderVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"loader\");\n\n    const colors = makeThemeVars(\"colors\", {\n        fg: globalVars.mainColors.primary,\n    });\n\n    const fullPage: ISpinnerProps = makeThemeVars(\"fullPage\", {\n        size: 100,\n        thickness: 6,\n        color: colors.fg,\n    });\n\n    const medium: ISpinnerProps = makeThemeVars(\"medium\", {\n        size: 50,\n        thickness: 4,\n        color: colors.fg,\n    });\n\n    const small: ISpinnerProps = makeThemeVars(\"small\", {\n        size: 36,\n        thickness: 4,\n        color: colors.fg,\n    });\n\n    return { fullPage, small, medium };\n});\n\nexport const loaderClasses = useThemeCache(() => {\n    const vars = loaderVariables();\n    const flex = flexHelper();\n    const style = styleFactory(\"loader\");\n    const fullPageLoader = style(\"fullPageLoader\", {\n        position: \"fixed\",\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        margin: \"auto\",\n        height: unit(vars.fullPage.size),\n        width: unit(vars.fullPage.size),\n        $nest: {\n            \"&:after\": {\n                ...spinnerLoader(vars.fullPage),\n            },\n        },\n        zIndex: 1,\n    });\n    const mediumLoader = style(\"mediumLoader\", {\n        ...absolutePosition.fullSizeOfParent(),\n        ...flex.middle(),\n        height: percent(100),\n        width: percent(100),\n        $nest: {\n            \"&:after\": {\n                ...spinnerLoader(vars.medium),\n            },\n        },\n    });\n    const smallLoader = style(\"smallLoader\", {\n        ...flex.middle(),\n        height: percent(46),\n        width: percent(46),\n        margin: \"auto\",\n        $nest: {\n            \"&:after\": {\n                ...spinnerLoader(vars.small),\n            },\n        },\n    });\n\n    const loaderContainer = (size: TLength) => {\n        return style({\n            position: \"relative\",\n            display: \"block\",\n            margin: \"auto\",\n            height: unit(size),\n            width: unit(size),\n        });\n    };\n\n    return {\n        fullPageLoader,\n        mediumLoader,\n        smallLoader,\n        loaderContainer,\n    };\n});\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { unit } from \"@library/styles/styleHelpers\";\nimport { TLength } from \"typestyle/lib/types\";\nimport { t } from \"@library/utility/appUtils\";\nimport { loaderClasses } from \"@library/loaders/loaderStyles\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport { style } from \"typestyle\";\nimport { PaddingProperty } from \"csstype\";\nimport ConditionalWrap from \"@library/layout/ConditionalWrap\";\n\ninterface IProps {\n    minimumTime?: number;\n    loaderStyleClass?: string;\n    height?: number;\n    width?: number;\n    padding?: PaddingProperty<TLength>;\n    small?: boolean;\n}\n\ninterface IState {\n    showLoader: boolean;\n}\n\n/**\n * A smart loading component. Takes up the full page and only displays in certain scenarios.\n */\nexport default class Loader extends React.Component<IProps, IState> {\n    public state: IState = {\n        showLoader: false,\n    };\n\n    public render() {\n        if (this.props.minimumTime && this.props.minimumTime > 0 && !this.state.showLoader) {\n            return null;\n        }\n        const styleClass = this.props.small\n            ? loaderClasses().smallLoader\n            : this.props.loaderStyleClass || loaderClasses().fullPageLoader;\n\n        return (\n            <React.Fragment>\n                <ConditionalWrap\n                    condition={!!this.props.padding}\n                    className={style({ padding: unit(this.props.padding) })}\n                >\n                    <div className={styleClass} aria-hidden=\"true\" />\n                    <ScreenReaderContent>\n                        <p>{t(\"Loading\")}</p>\n                    </ScreenReaderContent>\n                </ConditionalWrap>\n            </React.Fragment>\n        );\n    }\n\n    private timeout: NodeJS.Timeout;\n\n    public componentDidMount() {\n        const duration = this.props.minimumTime || 150;\n        this.timeout = setTimeout(() => {\n            this.setState({ showLoader: true });\n        }, duration);\n    }\n\n    public componentWillUnmount() {\n        this.timeout && clearTimeout(this.timeout);\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport getStore from \"@library/redux/getStore\";\nimport WebFont from \"webfontloader\";\n\nconst defaultFontConfig: WebFont.Config = {\n    google: {\n        families: [\"Open Sans:400,400italic,600,700\"],\n    },\n};\n\nexport function loadThemeFonts() {\n    const state = getStore().getState();\n    const assets = state.theme.assets.data || {};\n    const { fonts } = assets;\n\n    if (fonts && fonts.length > 0) {\n        const webFontConfig: WebFont.Config = {\n            custom: {\n                families: fonts.map(font => font.name),\n                urls: fonts.map(font => font.url),\n            },\n        };\n\n        if (webFontConfig.custom && webFontConfig.custom.urls && webFontConfig.custom.urls.length > 0) {\n            WebFont.load(webFontConfig);\n        }\n    } else {\n        // If the theme has no font config of its own, load the default.\n        WebFont.load(defaultFontConfig);\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport apiv2 from \"@library/apiv2\";\nimport Backgrounds from \"@library/layout/Backgrounds\";\nimport { inputClasses } from \"@library/forms/inputStyles\";\nimport Loader from \"@library/loaders/Loader\";\nimport { prepareShadowRoot } from \"@vanilla/dom-utils\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport ThemeActions from \"@library/theming/ThemeActions\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport React, { Children } from \"react\";\nimport { connect } from \"react-redux\";\nimport { loadThemeFonts } from \"./loadThemeFonts\";\n\nexport interface IWithThemeProps {\n    theme: IThemeVariables;\n}\n\nclass BaseThemeProvider extends React.Component<IProps> {\n    public render() {\n        const { assets } = this.props;\n        if (this.props.disabled) {\n            return this.props.children;\n        }\n        if (this.props)\n            switch (assets.status) {\n                case LoadStatus.PENDING:\n                case LoadStatus.LOADING:\n                    return <Loader />;\n                case LoadStatus.ERROR:\n                    return this.props.errorComponent;\n            }\n\n        if (!assets.data) {\n            return null;\n        }\n\n        if (this.props.variablesOnly) {\n            return this.props.children;\n        }\n\n        // Apply kludged input text styling everywhere.\n        inputClasses().applyInputCSSRules();\n\n        return (\n            <>\n                <Backgrounds />\n                {this.props.children}\n            </>\n        );\n    }\n\n    public componentDidMount() {\n        if (this.props.disabled) {\n            return;\n        }\n        void this.props.requestData();\n\n        if (this.props.variablesOnly) {\n            return;\n        }\n\n        const themeHeader = document.getElementById(\"themeHeader\");\n        const themeFooter = document.getElementById(\"themeFooter\");\n\n        if (themeHeader) {\n            prepareShadowRoot(themeHeader, true);\n        }\n\n        if (themeFooter) {\n            prepareShadowRoot(themeFooter, true);\n        }\n\n        loadThemeFonts();\n    }\n}\n\ninterface IOwnProps {\n    children: React.ReactNode;\n    themeKey: string;\n    errorComponent: React.ReactNode;\n    variablesOnly?: boolean;\n    disabled?: boolean;\n}\n\ntype IProps = IOwnProps & ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\n\nfunction mapStateToProps(state: ICoreStoreState, ownProps: IOwnProps) {\n    return {\n        assets: state.theme.assets,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: any, ownProps: IOwnProps) {\n    const themeActions = new ThemeActions(dispatch, apiv2);\n    return {\n        requestData: () => themeActions.getAssets(ownProps.themeKey),\n    };\n}\n\nexport const ThemeProvider = connect(\n    mapStateToProps,\n    mapDispatchToProps,\n)(BaseThemeProvider);\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { DeviceProvider } from \"@library/layout/DeviceContext\";\nimport { FontSizeCalculatorProvider } from \"@library/layout/pageHeadingContext\";\nimport { ScrollOffsetProvider } from \"@library/layout/ScrollOffsetContext\";\nimport getStore from \"@library/redux/getStore\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport { ThemeProvider } from \"@library/theming/ThemeProvider\";\nimport { getMeta } from \"@library/utility/appUtils\";\nimport React, { useMemo } from \"react\";\nimport { LiveAnnouncer } from \"react-aria-live\";\nimport { Provider } from \"react-redux\";\nimport { inheritHeightClass } from \"@library/styles/styleHelpers\";\nimport classNames from \"classnames\";\nimport { style } from \"typestyle\";\nimport { percent } from \"csx\";\nimport { LocaleProvider } from \"@vanilla/i18n\";\n\ninterface IProps {\n    children: React.ReactNode;\n    variablesOnly?: boolean;\n    noTheme?: boolean;\n    errorComponent?: React.ReactNode;\n}\n\n/**\n * Core provider set for running most Vanilla components.\n */\nexport function AppContext(props: IProps) {\n    const store = useMemo(() => getStore<ICoreStoreState>(), []);\n\n    const rootStyle = style({\n        $debugName: \"appContext\",\n        width: percent(100),\n    });\n\n    return (\n        <div className={classNames(\"js-appContext\", rootStyle, inheritHeightClass())}>\n            {/* A wrapper div is required or will cause error when no routes match or in hot reload */}\n            <Provider store={store}>\n                <LocaleProvider>\n                    <LiveAnnouncer>\n                        <ThemeProvider\n                            disabled={props.noTheme}\n                            errorComponent={props.errorComponent || null}\n                            themeKey={getMeta(\"ui.themeKey\", \"keystone\")}\n                            variablesOnly={props.variablesOnly}\n                        >\n                            <FontSizeCalculatorProvider>\n                                <ScrollOffsetProvider scrollWatchingEnabled={false}>\n                                    <DeviceProvider>{props.children}</DeviceProvider>\n                                </ScrollOffsetProvider>\n                            </FontSizeCalculatorProvider>\n                        </ThemeProvider>\n                    </LiveAnnouncer>\n                </LocaleProvider>\n            </Provider>\n        </div>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport React, { RefObject, useState } from \"react\";\nimport { FOCUS_CLASS } from \"@library/embeddedContent/embedService\";\nimport classNames from \"classnames\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport { t } from \"@library/utility/appUtils\";\nimport { embedContentClasses } from \"@library/embeddedContent/embedStyles\";\n\ninterface IProps {\n    className?: string;\n    type: string;\n    description?: string;\n    children?: React.ReactNode;\n    inEditor?: boolean;\n    noBaseClass?: boolean;\n    isSmall?: boolean;\n    setContentRef?: (element: HTMLElement | null) => void;\n}\n\nexport function EmbedContent(props: IProps) {\n    const id = useUniqueID(\"richEditor-embed-description\");\n    const defaultDesc = t(\"richEditor.externalEmbed.description\");\n    const classes = embedContentClasses();\n\n    return (\n        <div\n            aria-describedby={id}\n            aria-label={\"External embed content - \" + props.type}\n            className={classNames(props.className, classes.root, !props.noBaseClass && \"embedExternal-content\", {\n                [FOCUS_CLASS]: props.inEditor,\n                [classes.small]: props.isSmall,\n            })}\n            tabIndex={props.inEditor ? -1 : undefined} // Should only as a whole when inside the editor.\n            ref={props.setContentRef}\n        >\n            <span className=\"sr-only\">{props.description || defaultDesc}</span>\n            {props.children}\n        </div>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { EmbedContainer } from \"@library/embeddedContent/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport React from \"react\";\n\ninterface IProps extends IBaseEmbedProps {\n    author: string;\n    codePenID: string;\n    height?: number;\n    name?: string;\n}\n\nconst MIN_HEIGHT = 350;\n\n/**\n * A class for rendering CodePen embeds.\n */\nexport function CodePenEmbed(props: IProps): JSX.Element {\n    const src = `https://codepen.io/${props.author}/embed/preview/${props.codePenID}`;\n\n    return (\n        <EmbedContent type={props.embedType} inEditor={props.inEditor}>\n            <iframe src={src} height={Math.max(props.height || MIN_HEIGHT, MIN_HEIGHT)} width=\"100%\" scrolling=\"no\" />\n        </EmbedContent>\n    );\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { logError } from \"@vanilla/utils\";\nimport { t } from \"@library/utility/appUtils\";\n\ntype TranslateCallback = (contents: string) => React.ReactNode;\n\ninterface IProps {\n    source: string;\n    errorHandler?: (...values) => void;\n    translateFunction?: (source: string) => string;\n    c0?: TranslateCallback | React.ReactNode;\n    c1?: TranslateCallback | React.ReactNode;\n    c2?: TranslateCallback | React.ReactNode;\n    c3?: TranslateCallback | React.ReactNode;\n    c4?: TranslateCallback | React.ReactNode;\n}\n\n/**\n * Component for translating text with interpolated components.\n * Can accept source strings with interpolated translation components in a form such as:\n * - \"Published on <0/> by <1 />.\"\n * - \"For more information, please see our <0>public documentation</0>.\"\n *\n * About the placeholders:\n * - Self closing placeholders will be replace with the result from the prop that has a correspsonding ID.\n *   Eg. \"<0/>\" will be replaced by prop `c0`.\n *   \"<3 />\" will be replaced by prop `c3`.\n * - Placeholders content will have their translated content passed as an argument to their callback prop.\n *\n * Limitations\n * - Only placeholders 0-4 are currently allowed. Break up your translation strings!\n * - These tag's CANNOT be nested currently.\n *\n * Examples\n * <Translate source=\"test\" />\n *   -> translated text of \"test\"\n * <Translate source=\"Hello <0/>\" />\n *   -> Error because c0 was not provided.\n * <Translate source=\"Hello <0/> world!\" c0={<SomeComponent />}/>\n *   -> Hello <SomeComponent/> world!\n * <Translate source=\"Visit <0>our site</0> for help.\" c0={content => <a href=\"http://site.com\">{content}</a>}/>\"\n *   -> Visit <a href=\"http://site.com\">our site</a> for help.\n */\nexport default class Translate extends React.Component<IProps> {\n    public static defaultProps: Partial<IProps> = {\n        errorHandler: logError,\n        translateFunction: t,\n    };\n\n    /**\n     * @inheritDoc\n     */\n    public render(): React.ReactNode {\n        // First parse out the self closing elements.\n        const tagRegex = /<([\\d ]+)>(.*?)<\\/\\1>|<([\\d ]+)\\/>|([^<]+|<)/g;\n\n        const result: React.ReactNode[] = [];\n        this.translatedSource.replace(tagRegex, (match, childrenID, childrenMatch, standaloneID, textMatch, index) => {\n            if (textMatch != null) {\n                result.push(<React.Fragment key={index}>{textMatch}</React.Fragment>);\n            }\n\n            if (standaloneID != null) {\n                result.push(this.getInterpolatedComponent(standaloneID, index));\n            }\n\n            if (childrenMatch != null && childrenID != null) {\n                result.push(this.getInterpolatedComponent(childrenID, index, childrenMatch));\n            }\n            return match;\n        });\n\n        return result;\n    }\n\n    /**\n     * Create an interpolated component inside of a react fragment.\n     *\n     * @param id The id of the component we are replacing. Eg. <0/> -> 0.\n     * @param key The key of the fragment (index).\n     * @param value The content to pass along to the prop callback.\n     */\n    private getInterpolatedComponent(id: string, key: number, value?: string): React.ReactNode {\n        id = id.trim();\n\n        if (!(`c${id}` in this.props)) {\n            this.logIDNotFound(id);\n            return null;\n        }\n\n        const prop = this.props[`c${id}`];\n        const contents = typeof prop === \"function\" ? prop(value) : prop;\n\n        return <React.Fragment key={key}>{contents}</React.Fragment>;\n    }\n\n    /**\n     * Get a translated version of the source string.\n     */\n    private get translatedSource(): string {\n        return this.props.translateFunction!(this.props.source);\n    }\n\n    /**\n     * Log that an ID has not been found with some context.\n     */\n    private logIDNotFound(id) {\n        this.props.errorHandler!(\n            `A translation interpolation value #${id} was not provided for source string ${\n                this.props.source\n            }. \\nThe translated value of source is ${this.translatedSource}.`,\n        );\n    }\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { t } from \"@library/utility/appUtils\";\nimport React, { Component } from \"react\";\nimport moment from \"moment\";\n\ninterface IProps {\n    /** The timestamp to format and display */\n    timestamp: string;\n    /** An additional classname to apply to the root of the component */\n    className?: string;\n    /** Display a fixed or relative visible time. */\n    mode?: \"relative\" | \"fixed\";\n}\n\n/**\n * Component for displaying an accessible nicely formatted time string.\n */\nexport default class DateTime extends Component<IProps> {\n    public static defaultProps: Partial<IProps> = {\n        mode: \"fixed\",\n    };\n    private interval;\n\n    public render() {\n        return (\n            <time className={this.props.className} dateTime={this.props.timestamp} title={this.titleTime}>\n                {this.humanTime}\n            </time>\n        );\n    }\n\n    public componentDidMount() {\n        if (this.props.mode === \"relative\") {\n            this.interval = setInterval(() => {\n                this.forceUpdate();\n            }, 30000);\n        }\n    }\n\n    public componentWillUnmount() {\n        if (this.interval) {\n            clearInterval(this.interval);\n        }\n    }\n\n    /**\n     * Get the title of the time tag (long extended date)\n     */\n    private get titleTime(): string {\n        const date = new Date(this.props.timestamp);\n        return date.toLocaleString(undefined, {\n            year: \"numeric\",\n            month: \"long\",\n            day: \"numeric\",\n            weekday: \"long\",\n            hour: \"numeric\",\n            minute: \"numeric\",\n        });\n    }\n\n    /**\n     * Get a shorter human readable time for the time tag.\n     */\n    private get humanTime(): string {\n        const inputMoment = moment(this.props.timestamp);\n\n        if (this.props.mode === \"relative\") {\n            const difference = moment.duration(moment().diff(inputMoment));\n            const seconds = difference.asSeconds();\n            if (seconds >= 0 && seconds <= 5) {\n                return t(\"just now\");\n            }\n\n            return inputMoment.from(moment());\n        } else {\n            return inputMoment.toDate().toLocaleString(undefined, { year: \"numeric\", month: \"short\", day: \"numeric\" });\n        }\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { NavLink, NavLinkProps } from \"react-router-dom\";\nimport { makeLocationDescriptorObject, LinkContext } from \"@library/routing/links/LinkContextProvider\";\nimport { sanitizeUrl } from \"@vanilla/utils\";\nimport { LocationDescriptor } from \"history\";\n\ninterface IProps extends NavLinkProps {\n    tabIndex?: number;\n    to: LocationDescriptor;\n}\n\n/**\n * Link component that checks it's <LinkContext /> to know if it needs to do a full refresh\n * or a partial refresh of the page.\n *\n * If the passed `to` is a subset of the context then a partial navigation will be completed.\n * If the resulting URL has the same pathname as the current page we will do a full refresh.\n *\n * Eg.\n * Context = https://test.com/root\n * To = https://test.com/root/someUrl/deeper/nested\n * Result = /root/someUrl/deeper/nested (react router navigation)\n *\n * Context = https://test.com/otherRoot\n * To = https://test.com/root/someUrl/deeper/nested\n * Result = https://test.com/root/someUrl/deeper/nested (full refresh)\n */\nexport default function SmartLink(props: IProps) {\n    const { replace, ...passthru } = props;\n\n    return (\n        <LinkContext.Consumer>\n            {context => {\n                const href = context.makeHref(props.to);\n                if (context.isDynamicNavigation(href)) {\n                    return (\n                        <NavLink\n                            {...passthru}\n                            to={makeLocationDescriptorObject(props.to, href)}\n                            activeClassName=\"isCurrent\"\n                            tabIndex={props.tabIndex ? props.tabIndex : 0}\n                            replace={replace}\n                        />\n                    );\n                } else {\n                    return <a {...passthru} target=\"_blank\" rel=\"noopener noreferrer\" href={sanitizeUrl(href)} tabIndex={props.tabIndex ? props.tabIndex : 0} />;\n                }\n            }}\n        </LinkContext.Consumer>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { HumanFileSize } from \"@library/utility/fileUtils\";\nimport { GetAttachmentIcon } from \"@library/content/attachments/attachmentUtils\";\nimport { AttachmentType } from \"@library/content/attachments/AttatchmentType\";\nimport { attachmentClasses } from \"@library/content/attachments/attachmentStyles\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport Translate from \"@library/content/Translate\";\nimport DateTime from \"@library/content/DateTime\";\nimport { attachmentIconClasses } from \"@library/content/attachments/attachmentIconsStyles\";\nimport classNames from \"classnames\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { EmbedContainer, EmbedContainerSize } from \"@library/embeddedContent/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/EmbedContent\";\nimport { FOCUS_CLASS } from \"@library/embeddedContent/embedService\";\n\nexport interface IFileAttachment {\n    name: string; // File name\n    title?: string; // Optional other label for file\n    dateUploaded: string;\n    mimeType?: string;\n    deleteAttachment?: () => void;\n}\n\ninterface IProps extends IFileAttachment {\n    type: AttachmentType;\n    size: number; // bytes\n    url: string;\n    inEditor?: boolean;\n}\n\nexport default class Attachment extends React.Component<IProps> {\n    public render() {\n        const { title, name, url, dateUploaded, type, mimeType, size } = this.props;\n        const label = title || name;\n        const classes = attachmentClasses();\n        const iconClasses = attachmentIconClasses();\n        const classesMetas = metasClasses();\n\n        return (\n            <EmbedContainer size={EmbedContainerSize.SMALL}>\n                <EmbedContent inEditor={this.props.inEditor} type={this.props.type}>\n                    <SmartLink\n                        to={url}\n                        className={classNames(classes.link, classes.box)}\n                        type={mimeType}\n                        download={name}\n                        tabIndex={1}\n                    >\n                        {type && (\n                            <div className={classNames(classes.format)}>\n                                <GetAttachmentIcon type={type} className={iconClasses.root} />\n                            </div>\n                        )}\n                        <div className={classNames(classes.main)}>\n                            <div className={classNames(classes.title)}>{label}</div>\n                            <div className={classNames(classes.metas, classesMetas.root)}>\n                                {dateUploaded && (\n                                    <span className={classesMetas.meta}>\n                                        <Translate source=\"Uploaded <0/>\" c0={<DateTime timestamp={dateUploaded} />} />\n                                    </span>\n                                )}\n                                <span className={classesMetas.meta}>\n                                    <HumanFileSize numBytes={size} />\n                                </span>\n                            </div>\n                        </div>\n                    </SmartLink>\n                </EmbedContent>\n            </EmbedContainer>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ensureScript } from \"@vanilla/dom-utils\";\nimport { escapeHTML } from \"@vanilla/dom-utils\";\nimport { EmbedContent } from \"@library/embeddedContent/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport React, { useLayoutEffect } from \"react\";\nimport { useThrowError } from \"@vanilla/react-utils\";\n\ninterface IProps extends IBaseEmbedProps {\n    height: number;\n    width: number;\n    name?: string;\n    photoUrl?: string;\n    photoID: string;\n    foreignID: string;\n    embedSignature: string;\n}\n\n/**\n * A class for rendering Getty Images embeds.\n */\nexport function GettyImagesEmbed(props: IProps): JSX.Element {\n    const throwError = useThrowError();\n\n    useLayoutEffect(() => {\n        void convertGettyEmbeds().catch(throwError);\n    });\n\n    return (\n        <EmbedContent type={props.embedType} inEditor={props.inEditor}>\n            <a\n                className=\"embedExternal-content gie-single js-gettyEmbed\"\n                href={`https://www.gettyimages.com/detail/${props.photoID}`}\n                id={props.foreignID}\n                data-height={props.height}\n                data-width={props.width}\n                data-sig={props.embedSignature}\n                data-items={props.photoID}\n            >\n                {props.url}\n            </a>\n        </EmbedContent>\n    );\n}\n\nasync function convertGettyEmbeds() {\n    const gettyPosts = document.querySelectorAll(\".js-gettyEmbed\");\n    if (gettyPosts.length > 0) {\n        for (const post of gettyPosts) {\n            const url = post.getAttribute(\"href\") || \"\";\n            const foreignID = post.getAttribute(\"id\") || \"\";\n            const embedSignature = post.getAttribute(\"data-sig\") || \"\";\n            const height = Number(post.getAttribute(\"data-height\")) || 1;\n            const width = Number(post.getAttribute(\"data-width\")) || 1;\n            const items = escapeHTML(post.getAttribute(\"data-items\") || \"\");\n            const data: IProps = {\n                embedType: \"gettyimages\",\n                url,\n                height,\n                width,\n                foreignID,\n                embedSignature,\n                photoID: items,\n            };\n            await loadGettyImages(data);\n            post.classList.remove(\"js-gettyEmbed\");\n        }\n    }\n}\n\nasync function loadGettyImages(props: IProps) {\n    const fallbackCallback = (c: any) => {\n        (window.gie.q = window.gie.q || []).push(c);\n    };\n    // This is part of Getty's embed code, we need to ensure embeds are loaded and sent to their widget.js script.\n    window.gie = window.gie || fallbackCallback;\n\n    window.gie(() => {\n        window.gie.widgets.load({\n            id: props.foreignID,\n            sig: props.embedSignature,\n            w: props.width + \"px\",\n            h: props.height + \"px\",\n            items: props.photoID,\n            caption: false,\n            is360: false,\n            tld: \"com\",\n        });\n    });\n\n    /// DO NOT IGNORE\n    /// This will turn totally sideways if window.gie is not populated before the script is initially loaded.\n    await ensureScript(\"https://embed-cdn.gettyimages.com/widgets.js\");\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ensureScript } from \"@vanilla/dom-utils\";\nimport { EmbedContent } from \"@library/embeddedContent/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport React, { useLayoutEffect } from \"react\";\nimport { useThrowError } from \"@vanilla/react-utils\";\n\ninterface IProps extends IBaseEmbedProps {\n    height: number;\n    imgurID: string;\n    isAlbum: boolean;\n    width: number;\n}\n\n/**\n * A class for rendering Imgur embeds.\n */\nexport function ImgurEmbed(props: IProps): JSX.Element {\n    const throwError = useThrowError();\n\n    useLayoutEffect(() => {\n        void convertImgurEmbeds().catch(throwError);\n    });\n\n    return (\n        <EmbedContent type={props.embedType} inEditor={props.inEditor}>\n            <blockquote className=\"imgur-embed-pub\" data-id={props.imgurID} />\n        </EmbedContent>\n    );\n}\n\nasync function convertImgurEmbeds() {\n    const images = Array.from(document.querySelectorAll(\".imgur-embed-pub\"));\n    if (images.length > 0) {\n        await ensureScript(\"https://s.imgur.com/min/embed.js\");\n\n        if (!window.imgurEmbed) {\n            throw new Error(\"The Imgur post failed to load\");\n        }\n\n        if (window.imgurEmbed.createIframe) {\n            const imagesLength = images.length;\n            for (let i = 0; i < imagesLength; i++) {\n                window.imgurEmbed.createIframe();\n            }\n        } else {\n            window.imgurEmbed.tasks = images.length;\n        }\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { EmbedContainer } from \"@library/embeddedContent/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport React, { useEffect, useLayoutEffect } from \"react\";\nimport { ensureScript } from \"@vanilla/dom-utils\";\nimport { useThrowError } from \"@vanilla/react-utils\";\n\ninterface IProps extends IBaseEmbedProps {\n    version: number;\n    postID: string;\n    height?: number;\n    width?: number;\n    name?: string;\n}\n\n/**\n * A class for rendering Instagram embeds.\n */\nexport function InstagramEmbed(props: IProps): JSX.Element {\n    const throwError = useThrowError();\n    useLayoutEffect(() => {\n        void convertInstagramEmbeds().catch(throwError);\n    });\n\n    const permaLink = `https://www.instagram.com/p/${props.postID}`;\n\n    return (\n        <EmbedContainer inEditor={props.inEditor}>\n            <EmbedContent type={props.embedType} inEditor={props.inEditor}>\n                <div className=\"embedExternal embedInstagram\">\n                    <div className=\"embedExternal-content\">\n                        <blockquote\n                            className=\"instagram-media\"\n                            data-instgrm-captioned\n                            data-instgrm-permalink={permaLink}\n                            data-instgrm-version={props.version}\n                        >\n                            <a href={permaLink}>{permaLink}</a>\n                        </blockquote>\n                    </div>\n                </div>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n\nasync function convertInstagramEmbeds() {\n    const instagramEmbeds = document.querySelectorAll(\".instagram-media\");\n    if (instagramEmbeds.length > 0) {\n        await ensureScript(\"https://platform.instagram.com/en_US/embeds.js\");\n\n        if (!window.instgrm) {\n            throw new Error(\"The Instagram post failed to load\");\n        }\n\n        window.instgrm.Embeds.process();\n    }\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport shave from \"shave\";\nimport throttle from \"lodash/throttle\";\n\ninterface IProps {\n    tag?: string;\n    className?: string;\n    children: React.ReactNode;\n    useMaxHeight?: boolean;\n    lines?: number;\n    expand?: boolean;\n}\n\nexport default class TruncatedText extends React.PureComponent<IProps> {\n    private ref = React.createRef<HTMLDivElement>();\n\n    public static defaultProps: Partial<IProps> = {\n        lines: 3,\n        expand: false,\n    };\n\n    public render() {\n        const Tag = (this.props.tag || \"span\") as \"span\";\n\n        return (\n            <Tag className={this.props.className} ref={this.ref}>\n                {this.props.children}\n            </Tag>\n        );\n    }\n\n    public componentDidMount() {\n        this.truncate();\n        window.addEventListener(\"resize\", this.resizeListener);\n    }\n\n    public componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.resizeListener);\n    }\n\n    public componentDidUpdate() {\n        this.truncate();\n    }\n\n    private resizeListener = throttle(() => {\n        this.truncate();\n    }, 250);\n\n    private truncate() {\n        if (this.props.useMaxHeight) {\n            this.truncateTextBasedOnMaxHeight();\n        } else {\n            this.truncateBasedOnLines();\n        }\n    }\n\n    /**\n     * Truncate element text based on a certain number of lines.\n     *\n     * @param excerpt - The excerpt to truncate.\n     */\n    private truncateBasedOnLines() {\n        const lineHeight = this.calculateLineHeight();\n        if (lineHeight !== null) {\n            const maxHeight = this.props.lines! * lineHeight;\n            shave(this.ref.current!, maxHeight);\n        }\n    }\n\n    /**\n     * Truncate element text based on max-height\n     *\n     * @param excerpt - The excerpt to truncate.\n     */\n    private truncateTextBasedOnMaxHeight() {\n        const element = this.ref.current!;\n        const maxHeight = parseInt(getComputedStyle(element)[\"max-height\"], 10);\n        if (maxHeight && maxHeight > 0) {\n            shave(element, maxHeight);\n        }\n    }\n\n    private calculateLineHeight(): number | null {\n        if (this.ref.current) {\n            return parseInt(getComputedStyle(this.ref.current)[\"line-height\"], 10);\n        } else {\n            return null;\n        }\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { HTMLAttributes } from \"react\";\nimport { embedContainerClasses } from \"@library/embeddedContent/embedStyles\";\nimport classNames from \"classnames\";\n\nexport function EmbedTitle(props: HTMLAttributes<HTMLHeadingElement>) {\n    const classes = embedContainerClasses();\n    return <h3 {...props} className={classNames(classes.title, props.className)} />;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { absolutePosition, colorOut, defaultTransition, unit } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\nimport { linearGradient, percent, px, translateY } from \"csx\";\nimport { buttonResetMixin } from \"@library/forms/buttonStyles\";\n\nexport const collapsableContentClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"collapsableContent\");\n\n    const paddingAdjustment = style(\"paddingAdjustment\", {});\n\n    const root = style({\n        background: colorOut(globalVars.mainColors.bg),\n        position: \"relative\",\n    });\n\n    const heightContainer = style(\"heightContainer\", {\n        position: \"relative\",\n        display: \"block\",\n        overflow: \"hidden\",\n    });\n\n    const collapser = style(\"collapser\", {\n        $nest: {\n            \"&&\": {\n                ...buttonResetMixin(),\n                borderRadius: 0,\n                width: percent(100),\n                height: unit(globalVars.icon.sizes.default),\n                padding: 0,\n                margin: 0,\n            },\n        },\n    });\n\n    const footer = style(\"footer\", {\n        position: \"relative\",\n        height: unit(globalVars.icon.sizes.default),\n    });\n\n    const collapserIcon = style(\"collapserIcon\", {\n        ...defaultTransition(\"transform\"),\n    });\n\n    const gradient = style(\"gradient\", {\n        ...absolutePosition.topLeft(),\n        width: percent(100),\n        height: 75,\n        background: linearGradient(\n            \"to bottom\",\n            colorOut(globalVars.mainColors.bg.fade(0))!,\n            colorOut(globalVars.mainColors.bg)!,\n        ),\n        transform: `translateY(-100%)`,\n    });\n\n    return { heightContainer, root, collapser, collapserIcon, footer, gradient, paddingAdjustment };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { collapsableContentClasses } from \"@library/content/collapsableContentStyles\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonStyles\";\nimport { BottomChevronIcon } from \"@library/icons/common\";\nimport { unit } from \"@library/styles/styleHelpers\";\nimport { t } from \"@library/utility/appUtils\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport { useMeasure } from \"@vanilla/react-utils\";\nimport classNames from \"classnames\";\nimport { nextTick } from \"q\";\nimport React, { useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport { animated, useSpring } from \"react-spring\";\n\ninterface IProps {\n    children: React.ReactNode;\n    maxHeight?: number;\n    overshoot?: number;\n    className?: string;\n    isExpandedDefault?: boolean;\n    firstChild?: boolean;\n}\n\nexport function CollapsableContent(props: IProps) {\n    const { isExpandedDefault = false, firstChild = false } = props;\n    const [isExpanded, setIsExpanded] = useState(isExpandedDefault);\n\n    const containerMaxHeight = props.maxHeight ? props.maxHeight : 100;\n    const containerOvershoot = props.overshoot ? props.overshoot : 50;\n\n    const heightLimit = containerMaxHeight + containerOvershoot;\n\n    const ref = useRef<HTMLDivElement>(null);\n    const scrollRef = useRef<HTMLDivElement>(null);\n    const measurements = useMeasure(ref);\n\n    useLayoutEffect(() => {\n        nextTick(() => {\n            scrollRef.current!.scrollTo({ top: 0 });\n        });\n    });\n\n    const toggleCollapse = () => {\n        if (isExpanded) {\n            setIsExpanded(false);\n            if (ref.current) {\n                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n                window.scrollTo({ top: ref.current.getBoundingClientRect().top + scrollTop, behavior: \"smooth\" });\n            }\n        } else {\n            setIsExpanded(true);\n        }\n    };\n\n    const maxCollapsedHeight = measurements.height < heightLimit ? measurements.height : containerMaxHeight;\n    const targetHeight = isExpanded ? measurements.height : maxCollapsedHeight;\n    const maxHeight = maxCollapsedHeight > measurements.height ? measurements.height : maxCollapsedHeight;\n\n    const { height } = useSpring({\n        height: targetHeight > 0 ? targetHeight : \"auto\",\n    });\n\n    const gradientProps = useSpring({\n        opacity: isExpanded ? 0 : 1,\n    });\n\n    const classes = collapsableContentClasses();\n\n    const hasOverflow = measurements.height > heightLimit;\n\n    const title = isExpanded ? t(\"Collapse\") : t(\"Expand\");\n\n    const toggleID = useMemo(() => uniqueIDFromPrefix(\"collapsableContent_toggle\"), []);\n    const contentID = useMemo(() => uniqueIDFromPrefix(\"collapsableContent_content\"), []);\n\n    return (\n        <div className={classNames(classes.root)}>\n            <animated.div\n                id={contentID}\n                ref={scrollRef}\n                style={{\n                    minHeight: maxHeight,\n                    height: height,\n                }}\n                className={classNames(classes.heightContainer)}\n                aria-expanded={isExpanded}\n            >\n                <div ref={ref} className={props.className}>\n                    {props.children}\n                </div>\n            </animated.div>\n\n            {hasOverflow && (\n                <div className={classes.footer}>\n                    <animated.div style={gradientProps} className={classNames(classes.gradient)} />\n                    <Button\n                        id={toggleID}\n                        title={title}\n                        className={classes.collapser}\n                        baseClass={ButtonTypes.CUSTOM}\n                        onClick={toggleCollapse}\n                        controls={contentID}\n                    >\n                        <BottomChevronIcon\n                            title={title}\n                            className={classes.collapserIcon}\n                            rotate={!isExpanded ? undefined : 180}\n                        />\n                    </Button>\n                </div>\n            )}\n        </div>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { forceRenderStyles } from \"typestyle\";\nimport { useScrollOffset } from \"@library/layout/ScrollOffsetContext\";\nimport { useEffect } from \"react\";\nimport { initAllUserContent } from \"@library/content/index\";\n\n/**\n * Hook for handling hash scrolling and user content rendering.\n *\n * @param content The content being displayed. Pass this to refresh the content when filled.\n * @param disabled Whether or not hash scrolling is disabled.\n */\nexport function useHashScrolling(content: string, disabled?: boolean) {\n    const { temporarilyDisabledWatching, getCalcedHashOffset } = useScrollOffset();\n    const calcedOffset = getCalcedHashOffset();\n\n    useEffect(() => {\n        if (disabled) {\n            return;\n        }\n        void initAllUserContent().then(() => {\n            initHashScrolling(calcedOffset, () => temporarilyDisabledWatching(500));\n        });\n    }, [calcedOffset, temporarilyDisabledWatching, disabled, content]);\n}\n\nexport function initHashScrolling(offset: number = 0, beforeScrollHandler?: () => void) {\n    /**\n     * Scroll to the window's current hash value.\n     */\n    const scrollToHash = (event?: HashChangeEvent) => {\n        event && event.preventDefault();\n\n        const targetID = window.location.hash.replace(\"#\", \"\");\n        const element =\n            (document.querySelector(`[data-id=\"${targetID}\"]`) as HTMLElement) || document.getElementById(targetID);\n        if (element) {\n            forceRenderStyles();\n            beforeScrollHandler && beforeScrollHandler();\n            setTimeout(() => {\n                const top = window.pageYOffset + element.getBoundingClientRect().top - offset;\n                window.scrollTo({ top, behavior: \"smooth\" });\n            }, 10);\n        }\n    };\n\n    scrollToHash();\n\n    window.addEventListener(\"hashchange\", scrollToHash);\n    return () => {\n        window.removeEventListener(\"hashchange\", scrollToHash);\n    };\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useHashScrolling } from \"@library/content/hashScrolling\";\nimport { userContentClasses } from \"@library/content/userContentStyles\";\nimport className from \"classnames\";\nimport React from \"react\";\n\ninterface IProps {\n    className?: string;\n    content: string;\n    ignoreHashScrolling?: boolean;\n}\n\n/**\n * A component for placing rendered user content.\n *\n * This will ensure that all embeds/etc are initialized.\n */\nexport default function UserContent(props: IProps) {\n    const classes = userContentClasses();\n\n    useHashScrolling(props.content, props.ignoreHashScrolling);\n\n    return (\n        <div\n            className={className(\"userContent\", props.className, classes.root)}\n            dangerouslySetInnerHTML={{ __html: props.content }}\n        />\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { borders, objectFitWithFallback, unit } from \"@library/styles/styleHelpers\";\nimport { calc, percent } from \"csx\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { NestedCSSProperties } from \"typestyle/lib/types\";\n\nexport const userLabelVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"userLabel\");\n    const globalVars = globalVariables();\n    const { mainColors } = globalVars;\n\n    const avatar = makeThemeVars(\"spacing\", {\n        size: 40,\n        borderRadius: \"50%\",\n        margin: 8,\n    });\n\n    const name = makeThemeVars(\"name\", {\n        fontSize: globalVars.fonts.size.medium,\n        fontWeight: globalVars.fonts.weights.bold,\n    });\n\n    return {\n        avatar,\n        name,\n    };\n});\n\nexport const userLabelClasses = useThemeCache(() => {\n    const style = styleFactory(\"userLabel\");\n    const globalVars = globalVariables();\n    const vars = userLabelVariables();\n\n    const root = style({\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        width: percent(100),\n        minHeight: unit(vars.avatar.size),\n    });\n\n    const fixLineHeight = style(\"fixLineHeight\", {});\n\n    const compact = style(\"compact\", {\n        $nest: {\n            [`&.${fixLineHeight}`]: lineHeightAdjustment() as NestedCSSProperties,\n        },\n    });\n\n    const main = style(\"main\", {\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexWrap: \"nowrap\",\n        alignItems: \"flex-start\",\n        justifyContent: \"space-between\",\n        width: calc(`100% - ${unit(vars.avatar.size + vars.avatar.margin)}`),\n        flexBasis: calc(`100% - ${unit(vars.avatar.size + vars.avatar.margin)}`),\n        minHeight: unit(vars.avatar.size),\n    });\n\n    const avatar = style(\"avatar\", {\n        ...objectFitWithFallback(),\n        overflow: \"hidden\",\n        ...borders({\n            color: globalVars.mixBgAndFg(0.1),\n            width: 1,\n            radius: vars.avatar.borderRadius,\n        }),\n    });\n    const avatarLink = style(\"avatarLink\", {\n        display: \"block\",\n        position: \"relative\",\n        width: unit(vars.avatar.size),\n        height: unit(vars.avatar.size),\n        flexBasis: unit(vars.avatar.size),\n    });\n    const topRow = style(\"topRow\", {});\n    const bottomRow = style(\"bottomRow\", {});\n    const isCompact = style(\"isCompact\", {});\n\n    const userName = style(\"userName\", {\n        $nest: {\n            \"&&\": {\n                fontWeight: globalVars.fonts.weights.bold,\n                fontSize: unit(globalVars.fonts.size.medium),\n                lineHeight: globalVars.lineHeights.condensed,\n            },\n            [`&&.${isCompact}`]: {\n                fontSize: unit(globalVars.fonts.size.small),\n            },\n        },\n    });\n\n    return { root, avatar, avatarLink, topRow, bottomRow, userName, main, compact, isCompact, fixLineHeight };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { borders, paddings, unit } from \"@library/styles/styleHelpers\";\n\nexport const rolesClasses = useThemeCache(() => {\n    const style = styleFactory(\"roles\");\n    const globalVars = globalVariables();\n    const metaVars = globalVars.meta;\n\n    const role = style({\n        ...borders({ color: metaVars.text.color, radius: 3 }),\n        ...paddings({\n            horizontal: 4,\n        }),\n        $nest: {\n            \"&&\": {\n                fontSize: metaVars.text.fontSize,\n                lineHeight: globalVars.lineHeights.condensed,\n            },\n        },\n    });\n\n    return { role };\n});\n","import React from \"react\";\nimport { IUser, IUserRoles } from \"@library/@types/api/users\";\nimport ConditionalWrap from \"@library/layout/ConditionalWrap\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport { rolesClasses } from \"@library/content/rolesStyles\";\nimport classNames from \"classnames\";\n\n/**\n * Display user role(s)\n */\n\ninterface IProps extends IUserRoles {\n    maxRoleCount?: number;\n    wrapper?: boolean;\n    classNane?: string;\n    roleClass?: string;\n}\n\nexport function Roles(props: IProps) {\n    const { roles, maxRoleCount = 1, wrapper = true } = props;\n\n    const classesMeta = metasClasses();\n    const classes = rolesClasses();\n\n    const userRoles = roles.map((r, i) => {\n        if (i < maxRoleCount) {\n            return (\n                <span key={i} className={classNames(classesMeta.meta, classes.role)}>\n                    {r.name}\n                </span>\n            );\n        }\n    });\n\n    return (\n        <ConditionalWrap condition={wrapper} className={classNames(classesMeta.root, \"isFlexed\")}>\n            {userRoles}\n        </ConditionalWrap>\n    );\n}\n","import React from \"react\";\nimport { IUserFragment } from \"@library/@types/api/users\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { makeProfileUrl } from \"@library/utility/appUtils\";\nimport { userLabelClasses } from \"@library/content/userLabelStyles\";\nimport { Roles } from \"@library/content/Roles\";\nimport classNames from \"classnames\";\nimport DateTime from \"@library/content/DateTime\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport { ICategoryFragment } from \"@vanilla/addon-vanilla/@types/api/categories\";\n\n/**\n * Contains, user avatar, name, and optionnal meta data\n */\n\ninterface IUserLabel {\n    user: IUserFragment;\n    date?: string;\n    dateLink?: string;\n    category?: ICategoryFragment;\n    displayOptions?: {\n        showRole?: boolean;\n        showCategory?: boolean;\n    };\n    compact?: boolean;\n    fixLineHeight?: boolean;\n}\n\nexport function UserLabel(props: IUserLabel) {\n    const { user, date, dateLink, displayOptions = {}, category, compact = false, fixLineHeight = false } = props;\n    const { showRole = true, showCategory = false } = displayOptions;\n\n    const userUrl = makeProfileUrl(user.name);\n    const classes = userLabelClasses();\n    const classesMeta = metasClasses();\n\n    const dateComponent = dateLink ? (\n        <SmartLink to={dateLink} className={classNames(classesMeta.meta)}>\n            <DateTime timestamp={date} className={classNames(classesMeta.metaStyle)} />\n        </SmartLink>\n    ) : (\n        <DateTime timestamp={date} className={classNames(classesMeta.meta)} />\n    );\n\n    const categoryComponent =\n        showCategory && category ? (\n            <SmartLink to={category.url} className={classesMeta.meta}>\n                {category.name}\n            </SmartLink>\n        ) : null;\n\n    if (compact) {\n        return (\n            <div className={classNames(classes.compact, classesMeta.root, { [classes.fixLineHeight]: fixLineHeight })}>\n                <SmartLink to={userUrl} className={classNames(classes.userName, classes.isCompact, classesMeta.meta)}>\n                    {user.name}\n                </SmartLink>\n                {dateComponent}\n                {categoryComponent}\n            </div>\n        );\n    } else {\n        return (\n            <article className={classes.root}>\n                <SmartLink to={userUrl} className={classes.avatarLink}>\n                    <img src={user.photoUrl} alt={user.name} className={classes.avatar} />\n                </SmartLink>\n                <div className={classes.main}>\n                    <div className={classNames(classesMeta.root, \"isFlexed\", classes.topRow)}>\n                        <SmartLink to={userUrl} className={classNames(classes.userName, classesMeta.meta)}>\n                            {user.name}\n                        </SmartLink>\n                        {showRole && user.label && <Roles roles={[{ roleID: 0, name: user.label }]} wrapper={false} />}\n                    </div>\n                    <div className={classNames(classesMeta.root, \"isFlexed\", classes.bottomRow)}>\n                        {dateComponent}\n                        {categoryComponent}\n                    </div>\n                </div>\n            </article>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { embedContainerVariables } from \"@library/embeddedContent/embedStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { allLinkStates, colorOut, importantUnit, margins, paddings, unit } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { percent } from \"csx\";\n\nexport const quoteEmbedVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"quoteEmbed\");\n\n    const title = makeThemeVars(\"title\", {\n        padding: 14,\n    });\n\n    const userContent = makeThemeVars(\"userContent\", {\n        padding: 8,\n    });\n\n    const footer = makeThemeVars(\"footer\", {\n        height: 44,\n    });\n\n    return { title, footer, userContent };\n});\n\nexport const quoteEmbedClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const embedVars = embedContainerVariables();\n    const vars = quoteEmbedVariables();\n\n    const style = styleFactory(\"quoteEmbed\");\n\n    const root = style({\n        $nest: {\n            \"&&\": {\n                overflow: \"visible\",\n            },\n        },\n    });\n\n    const body = style(\"body\", {\n        display: \"block\",\n        textAlign: \"left\",\n        margin: 0,\n        padding: 0,\n        $nest: {\n            \"&::before, &::after\": {\n                content: \"initial\",\n            },\n        },\n    });\n\n    const userName = style(\"userName\", {\n        fontWeight: globalVars.fonts.weights.bold,\n    });\n\n    const title = style(\"title\", {\n        ...lineHeightAdjustment(),\n        ...margins({\n            horizontal: importantUnit(0),\n            top: importantUnit(0),\n            bottom: importantUnit(globalVars.meta.spacing.default),\n        }),\n        display: \"block\",\n        width: percent(100),\n        color: colorOut(globalVars.mainColors.fg),\n        fontSize: globalVars.fonts.size.medium,\n        fontWeight: globalVars.fonts.weights.bold,\n        lineHeight: globalVars.lineHeights.condensed,\n    });\n\n    const isPadded = style(\"isPadded\", {});\n    const fixLineHeight = style(\"fixLineHeight\", {});\n\n    const titleLink = style(\"titleLink\", {\n        display: \"block\",\n        position: \"relative\",\n        $nest: {\n            [`&.${isPadded}`]: {\n                paddingTop: unit(vars.title.padding),\n            },\n        },\n    });\n\n    const header = style(\"header\", {\n        ...paddings({\n            all: embedVars.spacing.padding,\n            bottom: 0,\n        }),\n    });\n\n    const paddingAdjustment = style(\"paddingAdjustment\", {});\n\n    const content = style(\"content\", {\n        ...paddings({\n            all: embedVars.spacing.padding,\n        }),\n        width: percent(100),\n        $nest: {\n            [`&.${paddingAdjustment}`]: {\n                ...paddings({\n                    all: embedVars.spacing.padding,\n                    top: vars.userContent.padding,\n                }),\n            },\n        },\n    });\n\n    const footer = style(\"footer\", {\n        position: \"relative\",\n        ...paddings({\n            horizontal: embedVars.spacing.padding,\n        }),\n    });\n\n    const footerMain = style(\"footerMain\", {\n        display: \"flex\",\n        position: \"relative\",\n        flexWrap: \"wrap\",\n        width: percent(100),\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        minHeight: unit(vars.footer.height),\n    });\n\n    const footerSeparator = style(\"footerSeparator\", {\n        // Reset\n        border: 0,\n        borderStyle: \"solid\",\n        margin: 0,\n        display: \"block\",\n\n        // Styling\n        width: percent(100),\n        height: unit(1),\n        backgroundColor: colorOut(globalVars.mixBgAndFg(0.2)),\n    });\n\n    const postLink = style(\"postLink\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        marginLeft: \"auto\",\n        ...allLinkStates({\n            allStates: {\n                textDecoration: \"none\",\n            },\n            noState: {\n                color: colorOut(globalVars.links.colors.default),\n            },\n            hover: {\n                color: colorOut(globalVars.links.colors.hover),\n            },\n            focus: {\n                color: colorOut(globalVars.links.colors.focus),\n            },\n            active: {\n                color: colorOut(globalVars.links.colors.active),\n            },\n        }),\n    });\n    const postLinkIcon = style(\"postLinkIcon\", {\n        color: \"inherit\",\n    });\n\n    const discussionLink = style(\"discussionLink\", {\n        height: unit(globalVars.icon.sizes.default),\n        width: unit(globalVars.icon.sizes.default),\n        ...allLinkStates({\n            allStates: {\n                textDecoration: \"none\",\n            },\n            noState: {\n                color: colorOut(globalVars.links.colors.default),\n            },\n            hover: {\n                color: colorOut(globalVars.links.colors.hover),\n            },\n            focus: {\n                color: colorOut(globalVars.links.colors.focus),\n            },\n            active: {\n                color: colorOut(globalVars.links.colors.active),\n            },\n        }),\n    });\n\n    const discussionIcon = style(\"discussionIcon\", {\n        color: \"inherit\",\n    });\n\n    const blockquote = style(\"blockquote\", {\n        margin: 0,\n        padding: 0,\n        $nest: {\n            \".userContent\": {\n                ...lineHeightAdjustment(),\n                fontSize: unit(globalVars.fonts.size.medium),\n            },\n        },\n    });\n\n    return {\n        root,\n        body,\n        userName,\n        title,\n        titleLink,\n        isPadded,\n        header,\n        content,\n        fixLineHeight,\n        footer,\n        footerMain,\n        footerSeparator,\n        postLink,\n        postLinkIcon,\n        discussionLink,\n        discussionIcon,\n        blockquote,\n        paddingAdjustment,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { useThemeCache, styleFactory } from \"@library/styles/styleUtils\";\nimport { margins } from \"@library/styles/styleHelpers\";\nimport { important, percent } from \"csx\";\n\nexport const twitterEmbedClasses = useThemeCache(() => {\n    const style = styleFactory(\"twitter\");\n\n    const card = style(\"card\", {\n        // borderRadius: 4,\n        width: \"auto\",\n        display: \"inline-flex\",\n        maxWidth: percent(100),\n\n        $nest: {\n            // The shadow DOM root.\n            \"& .twitter-tweet\": {\n                ...margins({\n                    vertical: important(0),\n                    horizontal: important(\"auto\"),\n                }),\n                minWidth: important(\"100%\"),\n            },\n        },\n    });\n\n    return { card };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ensureScript } from \"@vanilla/dom-utils\";\nimport { EmbedContent } from \"@library/embeddedContent/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { twitterEmbedClasses } from \"@library/embeddedContent/twitterEmbedStyles\";\nimport { visibility } from \"@library/styles/styleHelpers\";\nimport classNames from \"classnames\";\nimport React, { useEffect, useState, useLayoutEffect } from \"react\";\nimport { useThrowError } from \"@vanilla/react-utils\";\n\ninterface IProps extends IBaseEmbedProps {\n    statusID: string;\n}\n\nconst TWITTER_SCRIPT = \"https://platform.twitter.com/widgets.js\";\n\n/**\n * A class for rendering Twitter embeds.\n */\nexport function TwitterEmbed(props: IProps): JSX.Element {\n    const [twitterLoaded, setTwitterLoaded] = useState(false);\n    const throwError = useThrowError();\n    const classes = twitterEmbedClasses();\n    const { onRenderComplete } = props;\n\n    useLayoutEffect(() => {\n        // Don't count our tweet as rendered until the tweet is fully loaded.\n        onRenderComplete && onRenderComplete();\n    }, [twitterLoaded, onRenderComplete]);\n\n    useEffect(() => {\n        void convertTwitterEmbeds()\n            .then(() => {\n                // We need to track the load status for the internal representation.\n                // Otherwise we end up with a flash of the URL next to the rendered tweet.\n                setTwitterLoaded(true);\n            })\n            .catch(throwError);\n    }, [setTwitterLoaded, throwError]);\n\n    return (\n        <>\n            {!twitterLoaded && (\n                <div className={classNames(\"embedLinkLoader\")}>\n                    <a href={props.url} className=\"embedLinkLoader-link\" rel=\"nofollow\">\n                        {props.url} <span aria-hidden=\"true\" className=\"embedLinkLoader-loader\" />\n                    </a>\n                </div>\n            )}\n            <EmbedContent\n                type={props.embedType}\n                inEditor={props.inEditor}\n                isSmall\n                className={twitterLoaded ? undefined : visibility().displayNone}\n            >\n                <div\n                    className={classNames(\"js-twitterCard\", classes.card)}\n                    data-tweeturl={props.url}\n                    data-tweetid={props.statusID}\n                >\n                    <a href={props.url} className=\"tweet-url\" rel=\"nofollow\">\n                        {props.url}\n                    </a>\n                </div>\n            </EmbedContent>\n        </>\n    );\n}\n\nTwitterEmbed.async = true;\n\n/**\n * Render a single twitter embed.\n */\nasync function renderTweet(contentElement: HTMLElement) {\n    if (!window.twttr) {\n        throw new Error(\"The Twitter widget failed to load.\");\n    }\n\n    // Ensure we have a status id to look up.\n    const statusID = contentElement.getAttribute(\"data-tweetid\");\n    if (statusID == null) {\n        throw new Error(\"Attempted to embed a tweet but the statusID could not be found\");\n    }\n\n    // Check that we haven't already started to load this embed (In the case multiple onContents are fired off).\n    if (\n        !contentElement.classList.contains(\"js-twitterCardLoaded\") &&\n        !contentElement.classList.contains(\"js-twitterCardPreload\")\n    ) {\n        contentElement.classList.add(\"js-twitterCardPreload\");\n\n        // Remove a url if there is one around.\n        const url = contentElement.querySelector(\".tweet-url\");\n        if (url) {\n            url.remove();\n        }\n\n        // Render the embed.\n        const options = { conversation: \"none\" };\n        await window.twttr.widgets.createTweet(statusID, contentElement, options);\n\n        // Fade it in.\n        contentElement.classList.add(\"js-twitterCardLoaded\");\n    }\n}\n\n/**\n * Convert all of the twitter embeds in the page. This is for transforming twitter embeds that were\n * server rendered.\n *\n * @see library/Vanilla/Embeds/EmbedManager.php\n */\nexport async function convertTwitterEmbeds() {\n    const tweets = Array.from(document.querySelectorAll(\".js-twitterCard\"));\n    if (tweets.length > 0) {\n        await ensureScript(TWITTER_SCRIPT);\n        const promises = tweets.map(contentElement => {\n            return renderTweet(contentElement as HTMLElement);\n        });\n\n        // Render all the pages twitter embeds at the same time.\n        await Promise.all(promises);\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { EmbedContainer } from \"@library/embeddedContent/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { t } from \"@library/utility/appUtils\";\nimport { simplifyFraction } from \"@vanilla/utils\";\nimport classNames from \"classnames\";\nimport React, { useCallback, useState } from \"react\";\nimport { style } from \"typestyle\";\nimport { percent } from \"csx\";\n\ninterface IProps extends IBaseEmbedProps {\n    height: number;\n    width: number;\n    photoUrl: string;\n    frameSrc: string;\n    time?: string;\n}\n\nexport function VideoEmbed(props: IProps) {\n    const { name, height, width, frameSrc, photoUrl, embedType } = props;\n\n    const [isPlaying, setIsPlaying] = useState(false);\n\n    const togglePlaying = useCallback(() => {\n        setIsPlaying(!isPlaying);\n    }, [setIsPlaying, isPlaying]);\n\n    let ratioClass: string | undefined;\n    const ratio = simplifyFraction(height || 3, width || 4);\n    switch (ratio.shorthand) {\n        case \"21:9\":\n            ratioClass = \"is21by9\";\n            break;\n        case \"4:3\":\n            ratioClass = \"is4by3\";\n            break;\n        case \"1:1\":\n            ratioClass = \"is1by1\";\n            break;\n        case \"16:9\":\n            ratioClass = \"is16by9\";\n            break;\n        default:\n            ratioClass = style({\n                $debugName: \"isCustomRatio\",\n                paddingTop: percent(((height || 3) / (width || 4)) * 100),\n            });\n    }\n\n    return (\n        <EmbedContainer className=\"embedVideo\" inEditor={props.inEditor}>\n            <EmbedContent type={embedType} inEditor={props.inEditor}>\n                <div className={classNames(\"embedVideo-ratio\", ratioClass)}>\n                    {isPlaying ? (\n                        <VideoIframe url={frameSrc} />\n                    ) : (\n                        <VideoThumbnail name={name} onClick={togglePlaying} photoUrl={photoUrl} />\n                    )}\n                </div>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n\nfunction VideoThumbnail(props: { name?: string; onClick: React.MouseEventHandler; photoUrl: string }) {\n    return (\n        <button type=\"button\" aria-label={props.name} className=\"embedVideo-playButton\" onClick={props.onClick}>\n            <img src={props.photoUrl} role=\"presentation\" className=\"embedVideo-thumbnail\" />\n            <span className=\"embedVideo-scrim\" />\n            <PlayIcon />\n        </button>\n    );\n}\n\nfunction VideoIframe(props: { url: string }) {\n    return (\n        <iframe\n            frameBorder=\"0\"\n            allow=\"autoplay; encrypted-media\"\n            className=\"embedVideo-iframe\"\n            src={props.url}\n            allowFullScreen={true}\n        />\n    );\n}\n\nfunction PlayIcon() {\n    const cssStyle: React.CSSProperties = { fill: \"currentColor\", strokeWidth: 0.3 };\n\n    return (\n        <svg className=\"embedVideo-playIcon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-1 -1 24 24\">\n            <title>{t(\"Play Video\")}</title>\n            <path\n                className=\"embedVideo-playIconPath embedVideo-playIconPath-circle\"\n                style={cssStyle}\n                d=\"M11,0A11,11,0,1,0,22,11,11,11,0,0,0,11,0Zm0,20.308A9.308,9.308,0,1,1,20.308,11,9.308,9.308,0,0,1,11,20.308Z\"\n            />\n            <polygon\n                className=\"embedVideo-playIconPath embedVideo-playIconPath-triangle\"\n                style={cssStyle}\n                points=\"8.609 6.696 8.609 15.304 16.261 11 8.609 6.696\"\n            />\n        </svg>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useThemeCache, styleFactory } from \"@library/styles/styleUtils\";\nimport { flexHelper } from \"@library/styles/styleHelpers\";\nimport { px } from \"csx\";\n\nexport const embedErrorClasses = useThemeCache(() => {\n    const style = styleFactory(\"embedError\");\n    const renderErrorRoot = style(\"renderErrorRoot\", {\n        display: \"block\",\n        textAlign: \"left\",\n    });\n\n    const renderErrorIconLink = style(\"renderErrorIconLink\", {\n        paddingLeft: px(4),\n        verticalAlign: \"middle\",\n    });\n\n    return { renderErrorRoot, renderErrorIconLink };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { WarningIcon } from \"@library/icons/common\";\nimport { t } from \"@library/utility/appUtils\";\nimport { embedErrorClasses } from \"@library/embeddedContent/embedErrorStyles\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { FOCUS_CLASS } from \"@library/embeddedContent/embedService\";\nimport classNames from \"classnames\";\n\ninterface IProps {\n    url: string;\n}\n\nexport function EmbedRenderError(props: IProps) {\n    const warningTitle = t(\"This embed could not be loaded in your browser.\");\n    const classes = embedErrorClasses();\n    const helpUrl =\n        \"https://success.vanillaforums.com/kb/articles/13-rich-editor#what-causes-the-warning-icon-while-inserting-a-rich-embed\";\n\n    return (\n        <div className={classNames(FOCUS_CLASS, classes.renderErrorRoot, \"embedLinkLoader-link\")} tabIndex={-1}>\n            <SmartLink to={props.url} rel=\"nofollow\">\n                {props.url}\n            </SmartLink>\n            <SmartLink className={classes.renderErrorIconLink} to={helpUrl}>\n                <WarningIcon warningMessage={warningTitle} />\n            </SmartLink>\n        </div>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { EmbedRenderError } from \"@library/embeddedContent/EmbedRenderError\";\n\ninterface IProps {\n    url: string;\n    children: React.ReactNode;\n}\n\ninterface IState {\n    error: Error | null;\n}\n\n/**\n * Error boundary for catching rendering errors from embeds.\n */\nexport class EmbedErrorBoundary extends React.PureComponent<IProps, IState> {\n    public state: IState = {\n        error: null,\n    };\n\n    public render() {\n        if (this.state.error) {\n            return <EmbedRenderError url={this.props.url} />;\n        } else {\n            return this.props.children;\n        }\n    }\n\n    public componentDidCatch(error: Error) {\n        this.setState({ error });\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { mountReact } from \"@vanilla/react-utils\";\nimport { CodePenEmbed } from \"@library/embeddedContent/CodePenEmbed\";\nimport { FileEmbed } from \"@library/embeddedContent/FileEmbed\";\nimport { GettyImagesEmbed } from \"@library/embeddedContent/GettyImagesEmbed\";\nimport { GiphyEmbed } from \"@library/embeddedContent/GiphyEmbed\";\nimport { ImageEmbed } from \"@library/embeddedContent/ImageEmbed\";\nimport { ImgurEmbed } from \"@library/embeddedContent/ImgurEmbed\";\nimport { InstagramEmbed } from \"@library/embeddedContent/InstagramEmbed\";\nimport { LinkEmbed } from \"@library/embeddedContent/LinkEmbed\";\nimport { QuoteEmbed } from \"@library/embeddedContent/QuoteEmbed\";\nimport { SoundCloudEmbed } from \"@library/embeddedContent/SoundCloudEmbed\";\nimport { convertTwitterEmbeds, TwitterEmbed } from \"@library/embeddedContent/TwitterEmbed\";\nimport { VideoEmbed } from \"@library/embeddedContent/VideoEmbed\";\nimport { onContent } from \"@library/utility/appUtils\";\nimport { logWarning } from \"@vanilla/utils\";\nimport React from \"react\";\nimport Quill from \"quill/core\";\nimport { EmbedErrorBoundary } from \"@library/embeddedContent/EmbedErrorBoundary\";\n\nexport const FOCUS_CLASS = \"embed-focusableElement\";\n\n// Methods\nexport interface IBaseEmbedProps {\n    // Stored data.\n    embedType: string;\n    url: string;\n    name?: string;\n    // Frontend only\n    inEditor?: boolean;\n    onRenderComplete?: () => void;\n    syncBackEmbedValue?: (values: object) => void;\n    quill?: Quill | null;\n}\n\ntype EmbedComponentType = React.ComponentType<IBaseEmbedProps> & {\n    async?: boolean;\n};\n\nconst registeredEmbeds = new Map<string, EmbedComponentType>();\n\nexport function registerEmbed(embedType: string, EmbedComponent: EmbedComponentType) {\n    registeredEmbeds.set(embedType, EmbedComponent);\n}\n\nexport function getEmbedForType(embedType: string): EmbedComponentType | null {\n    return registeredEmbeds.get(embedType) || null;\n}\n\nexport async function mountEmbed(mountPoint: HTMLElement, data: IBaseEmbedProps, inEditor: boolean) {\n    return new Promise((resolve, reject) => {\n        const type = data.embedType || null;\n        if (type === null) {\n            logWarning(`Found embed with data`, data, `and no type on element`, mountPoint);\n            return;\n        }\n        const exception: string | null = \"exception\" in data ? data[\"exception\"] : null;\n        if (exception !== null) {\n            logWarning(`Found embed with data`, data, `and and exception`, exception, ` on element`, mountPoint);\n            return;\n        }\n        const EmbedClass = getEmbedForType(type);\n        if (EmbedClass === null) {\n            logWarning(\n                `Attempted to mount embed type ${type} on element`,\n                mountPoint,\n                `but could not find registered embed.`,\n            );\n            return;\n        }\n\n        const isAsync = EmbedClass.async;\n        const onMountComplete = () => resolve();\n        // If the component is flagged as async, then it will confirm when the render is complete.\n        mountReact(\n            <EmbedErrorBoundary url={data.url}>\n                <EmbedClass {...data} inEditor={inEditor} onRenderComplete={isAsync ? onMountComplete : undefined} />\n            </EmbedErrorBoundary>,\n            mountPoint,\n            !isAsync ? onMountComplete : undefined,\n        );\n    });\n}\n\nexport async function mountAllEmbeds(root: HTMLElement = document.body) {\n    const mountPoints = root.querySelectorAll(\"[data-embedjson]\");\n    const promises = Array.from(mountPoints).map(mountPoint => {\n        const parsedData = JSON.parse(mountPoint.getAttribute(\"data-embedjson\") || \"{}\");\n        return mountEmbed(mountPoint as HTMLElement, parsedData, false);\n    });\n    await Promise.all(promises);\n}\n\n// Default embed registration\nregisterEmbed(\"codepen\", CodePenEmbed);\nregisterEmbed(\"file\", FileEmbed);\nregisterEmbed(\"gettyimages\", GettyImagesEmbed);\nregisterEmbed(\"getty\", GettyImagesEmbed);\nregisterEmbed(\"giphy\", GiphyEmbed);\nregisterEmbed(\"imgur\", ImgurEmbed);\nregisterEmbed(\"instagram\", InstagramEmbed);\nregisterEmbed(\"link\", LinkEmbed);\nregisterEmbed(\"quote\", QuoteEmbed);\nregisterEmbed(\"soundcloud\", SoundCloudEmbed);\nregisterEmbed(\"twitch\", VideoEmbed);\nregisterEmbed(\"twitter\", TwitterEmbed);\nregisterEmbed(\"vimeo\", VideoEmbed);\nregisterEmbed(\"wistia\", VideoEmbed);\nregisterEmbed(\"youtube\", VideoEmbed);\nregisterEmbed(\"image\", ImageEmbed);\n\n// This is specifically required because of some legacy formats that don't render\n// The embed json format. Twitter was converted out of global JS and merged here.\nonContent(convertTwitterEmbeds);\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport Attachment from \"@library/content/attachments/Attachment\";\nimport { mimeTypeToAttachmentType } from \"@library/content/attachments/attachmentUtils\";\n\ninterface IProps extends IBaseEmbedProps {\n    type: string; // Mime type.\n    size: number;\n    dateInserted: string;\n    name: string;\n}\n\n/**\n * An embed class for quoted user content on the same site.\n */\nexport function FileEmbed(props: IProps) {\n    const { type, size, dateInserted, name, url } = props;\n    const attachmentType = mimeTypeToAttachmentType(type);\n    return (\n        <Attachment\n            inEditor={props.inEditor}\n            type={attachmentType}\n            size={size}\n            name={name}\n            url={url}\n            dateUploaded={dateInserted}\n            mimeType={type}\n        />\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { EmbedContainer } from \"@library/embeddedContent/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/EmbedContent\";\n\ninterface IProps extends IBaseEmbedProps {\n    giphyID: string;\n    height: number;\n    width: number;\n}\n\n/**\n * A class for rendering Giphy embeds.\n */\nexport function GiphyEmbed(props: IProps): JSX.Element {\n    const paddingBottom = ((props.height || 1) / (props.width || 1)) * 100 + \"%\";\n    const ratioStyle: React.CSSProperties = {\n        maxWidth: props.width ? props.width + \"px\" : \"100%\",\n        paddingBottom,\n    };\n\n    if (!props.giphyID) {\n        throw new Error(\"Giphy embed fail, the post could not be found\");\n    }\n    const src = `https://giphy.com/embed/${props.giphyID}`;\n\n    return (\n        <EmbedContainer className=\"embedGiphy\" inEditor={props.inEditor}>\n            <EmbedContent type={props.embedType} inEditor={props.inEditor}>\n                <div className=\"embedExternal-ratio\" style={ratioStyle}>\n                    <iframe src={src} className=\"giphy-embed embedGiphy-iframe\" />\n                </div>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport classNames from \"classnames\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport { EmbedContainer } from \"@library/embeddedContent/EmbedContainer\";\nimport TruncatedText from \"@library/content/TruncatedText\";\nimport { EmbedTitle } from \"@library/embeddedContent/EmbedTitle\";\nimport { EmbedContent } from \"@library/embeddedContent/EmbedContent\";\n\ninterface IProps extends IBaseEmbedProps {\n    photoUrl?: string;\n    body?: string;\n}\n\nexport function LinkEmbed(props: IProps) {\n    const { name, url, photoUrl, body } = props;\n    const classesMetas = metasClasses();\n    const title = name ? <EmbedTitle>{name}</EmbedTitle> : null;\n\n    const source = <span className={classNames(\"embedLink-source\", classesMetas.metaStyle)}>{url}</span>;\n\n    let linkImage: JSX.Element | null = null;\n    if (photoUrl) {\n        linkImage = <img src={photoUrl} className=\"embedLink-image\" aria-hidden=\"true\" />;\n    }\n\n    return (\n        <EmbedContainer className=\"embedText embedLink\">\n            <EmbedContent type=\"link\" inEditor={props.inEditor}>\n                <SmartLink className=\"embedLink-link\" to={url} rel=\"noreferrer\">\n                    <article className=\"embedText-body embedLink-body\">\n                        {linkImage}\n                        <div className=\"embedText-main embedLink-main\">\n                            <div className=\"embedText-header embedLink-header\">\n                                {title}\n                                {source}\n                            </div>\n                            <TruncatedText tag=\"div\" className=\"embedLink-excerpt\" useMaxHeight={true}>\n                                {body}\n                            </TruncatedText>\n                        </div>\n                    </article>\n                </SmartLink>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IUserFragment, IUserFragmentAndRoles } from \"@library/@types/api/users\";\nimport { CollapsableContent } from \"@library/content/CollapsableContent\";\nimport UserContent from \"@library/content/UserContent\";\nimport { UserLabel } from \"@library/content/UserLabel\";\nimport { EmbedContainer } from \"@library/embeddedContent/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { quoteEmbedClasses } from \"@library/embeddedContent/quoteEmbedStyles\";\nimport { DiscussionIcon, RightChevronIcon } from \"@library/icons/common\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { t } from \"@library/utility/appUtils\";\nimport { ICategoryFragment } from \"@vanilla/addon-vanilla/@types/api/categories\";\nimport classNames from \"classnames\";\nimport React from \"react\";\n\ninterface IProps extends IBaseEmbedProps {\n    body: string;\n    dateInserted: string;\n    insertUser: IUserFragment;\n    discussionLink?: string;\n    category?: ICategoryFragment;\n    // For compatibility, new options are hidden by default\n    displayOptions?: {\n        showUserLabel?: boolean;\n        showCompactUserInfo?: boolean;\n        showDiscussionLink?: boolean;\n        showPostLink?: boolean;\n        showCategoryLink?: boolean;\n        expandByDefault?: boolean;\n    };\n}\n\n/**\n * An embed class for quoted user content on the same site.\n *\n * This is not an editable quote. Instead it an expandable/collapsable snapshot of the quoted/embedded comment/discussion.\n */\nexport function QuoteEmbed(props: IProps) {\n    const { body, insertUser, name, url, dateInserted, discussionLink, category, displayOptions = {} } = props;\n\n    const classes = quoteEmbedClasses();\n    const {\n        showUserLabel = false,\n        showCompactUserInfo = true,\n        showDiscussionLink = true,\n        showPostLink = false,\n        showCategoryLink = false,\n        expandByDefault = false,\n    } = displayOptions;\n\n    const discussionTitle = t(\"View Original Discussion\");\n\n    const linkToDiscussion = showDiscussionLink && discussionLink && (\n        <SmartLink title={discussionTitle} to={discussionLink} className={classes.discussionLink}>\n            <DiscussionIcon title={discussionTitle} className={classes.discussionIcon} />\n            <ScreenReaderContent>{discussionTitle}</ScreenReaderContent>\n        </SmartLink>\n    );\n\n    const postTitle = t(\"View Post\");\n    const linkToPost = showPostLink && url && (\n        <SmartLink to={url} className={classes.postLink}>\n            {postTitle}\n            <RightChevronIcon title={postTitle} className={classes.postLinkIcon} />\n        </SmartLink>\n    );\n\n    const showHeader = showUserLabel || name || showCompactUserInfo;\n\n    return (\n        <EmbedContainer withPadding={false} className={classes.root}>\n            <EmbedContent type=\"Quote\" inEditor={props.inEditor}>\n                <article className={classes.body}>\n                    {showHeader && (\n                        <header className={classes.header}>\n                            {showUserLabel && (\n                                <UserLabel\n                                    user={insertUser}\n                                    date={dateInserted}\n                                    dateLink={url}\n                                    category={category}\n                                    displayOptions={{\n                                        showCategory: showCategoryLink,\n                                        showRole: true,\n                                    }}\n                                />\n                            )}\n\n                            {name && (\n                                <SmartLink\n                                    to={url}\n                                    className={classNames(classes.titleLink, { [classes.isPadded]: showUserLabel })}\n                                >\n                                    <h2 className={classes.title}>{name}</h2>\n                                </SmartLink>\n                            )}\n\n                            {!showUserLabel && showCompactUserInfo && (\n                                <UserLabel\n                                    user={insertUser}\n                                    date={dateInserted}\n                                    dateLink={url}\n                                    compact={true}\n                                    category={category}\n                                    displayOptions={{ showCategory: showCategoryLink }}\n                                    fixLineHeight={!showUserLabel && !name}\n                                />\n                            )}\n                        </header>\n                    )}\n                    <CollapsableContent\n                        className={classNames(classes.content, { [classes.paddingAdjustment]: showHeader })}\n                        isExpandedDefault={!!expandByDefault}\n                        firstChild={!showUserLabel && !name && !showCompactUserInfo}\n                    >\n                        <blockquote className={classes.blockquote} cite={url}>\n                            <UserContent content={body} />\n                        </blockquote>\n                    </CollapsableContent>\n                    {(linkToDiscussion || linkToPost) && (\n                        <footer className={classes.footer}>\n                            <hr className={classes.footerSeparator} aria-hidden={true} />\n                            <div className={classes.footerMain}>\n                                {linkToDiscussion}\n                                {linkToPost}\n                            </div>\n                        </footer>\n                    )}\n                </article>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { EmbedContainer } from \"@library/embeddedContent/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/EmbedContent\";\n\ninterface IProps extends IBaseEmbedProps {\n    playlistID?: number;\n    showArtwork: boolean;\n    trackID?: number;\n    userID?: number;\n    useVisualPlayer: boolean;\n}\n\n/**\n * A class for rendering SoundCloud embeds.\n */\nexport function SoundCloudEmbed(props: IProps): JSX.Element {\n    const frameSource = soundCloudPlayerUrl(props);\n\n    return (\n        <EmbedContainer inEditor={props.inEditor}>\n            <EmbedContent type={props.embedType} inEditor={props.inEditor}>\n                <div className=\"embedExternal embedSoundCloud\">\n                    <div className=\"embedExternal-content\">\n                        <iframe width=\"100%\" scrolling=\"no\" src={frameSource} />\n                    </div>\n                </div>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n\nfunction soundCloudPlayerUrl(props: IProps): string {\n    let resourceType: string;\n    let resourceID: number;\n\n    if (props.playlistID) {\n        resourceType = \"playlists\";\n        resourceID = props.playlistID;\n    } else if (props.trackID) {\n        resourceType = \"tracks\";\n        resourceID = props.trackID;\n    } else if (props.userID) {\n        resourceType = \"users\";\n        resourceID = props.userID;\n    } else {\n        throw new Error(\"Unable to determine SoundCloud resource type.\");\n    }\n\n    const parameters = {\n        show_artwork: props.showArtwork,\n        visual: props.useVisualPlayer,\n        url: `https://api.soundcloud.com/${resourceType}/${resourceID}`,\n    };\n    const query = Object.keys(parameters)\n        .map(key => encodeURIComponent(key) + \"=\" + encodeURIComponent(parameters[key]))\n        .join(\"&\");\n\n    return `https://w.soundcloud.com/player/?${query}`;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IBaseEmbedProps, FOCUS_CLASS } from \"@library/embeddedContent/embedService\";\nimport { DeviceProvider } from \"@library/layout/DeviceContext\";\nimport { embedMenuClasses } from \"@rich-editor/editor/pieces/embedMenuStyles\";\nimport { ImageEmbedMenu } from \"@rich-editor/editor/pieces/ImageEmbedMenu\";\nimport classNames from \"classnames\";\nimport React, { useRef, useState } from \"react\";\nimport { useFocusWatcher } from \"@vanilla/react-utils\";\n\ninterface IProps extends IBaseEmbedProps {\n    type: string; // Mime type.\n    size: number;\n    dateInserted: string;\n    name: string;\n    width?: number;\n    height?: number;\n}\n\n/**\n * An embed class for quoted user content on the same site.\n */\nexport function ImageEmbed(props: IProps) {\n    const contentRef = useRef<HTMLDivElement>(null);\n    const [isFocused, setFocused] = useState(false);\n    const [isOpen, setIsOpen] = useState(false);\n    useFocusWatcher(contentRef, newFocusValue => {\n        setFocused(newFocusValue);\n    });\n\n    return (\n        <DeviceProvider>\n            <div ref={contentRef} className={classNames(\"embedImage\", embedMenuClasses().imageContainer)}>\n                <div className=\"embedImage-link\">\n                    <img\n                        className={classNames(\"embedImage-img\", FOCUS_CLASS)}\n                        src={props.url}\n                        alt={props.name}\n                        tabIndex={props.inEditor ? -1 : undefined}\n                    />\n                </div>\n                {props.inEditor && (isFocused || isOpen) && (\n                    <ImageEmbedMenu\n                        onVisibilityChange={setIsOpen}\n                        onSave={newValue => {\n                            props.syncBackEmbedValue &&\n                                props.syncBackEmbedValue({\n                                    name: newValue.alt,\n                                });\n                        }}\n                        initialAlt={props.name}\n                    />\n                )}\n            </div>\n        </DeviceProvider>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { appearance, colorOut, paddings, singleBorder, unit, margins, flexHelper } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { calc, em, percent } from \"csx\";\nimport { frameVariables } from \"@library/layout/frame/frameStyles\";\n\nexport const frameHeaderClasses = useThemeCache(() => {\n    const vars = frameVariables();\n    const globalVars = globalVariables();\n    const formElVars = formElementsVariables();\n    const style = styleFactory(\"frameHeader\");\n\n    const root = style({\n        display: \"flex\",\n        position: \"relative\",\n        alignItems: \"center\",\n        flexWrap: \"nowrap\",\n        width: percent(100),\n        color: colorOut(vars.colors.fg),\n        zIndex: 1,\n        borderBottom: singleBorder(),\n        ...paddings({\n            top: 4,\n            right: vars.footer.spacing,\n            bottom: 4,\n            left: vars.footer.spacing,\n        }),\n        $nest: {\n            \"& .button + .button\": {\n                marginLeft: unit(12 - formElVars.border.width),\n            },\n        },\n    });\n\n    const rootMinimal = style(\"rootMinimal\", {\n        display: \"block\",\n    });\n\n    const backButton = style(\"backButton\", {\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        justifyContent: \"center\",\n        alignItems: \"flex-end\",\n        flexShrink: 1,\n        transform: `translateX(-6px) translateY(-1px)`,\n    });\n\n    const heading = style(\"heading\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        flexGrow: 1,\n        margin: 0,\n        textOverflow: \"ellipsis\",\n        width: calc(`100% - ${formElVars.sizing.height}`),\n        flexBasis: calc(`100% - ${formElVars.sizing.height}`),\n        fontWeight: globalVars.fonts.weights.semiBold,\n        fontSize: unit(globalVars.fonts.size.large),\n    });\n\n    const headingMinimal = style(\"headingMinimal\", {\n        ...flexHelper().middle(),\n        ...paddings({ horizontal: 24 }),\n        $nest: {\n            \"& *\": {\n                textTransform: \"uppercase\",\n                fontSize: unit(globalVars.fonts.size.small),\n            },\n        },\n    });\n\n    const left = style(\"left\", {\n        fontSize: unit(vars.header.fontSize),\n    });\n\n    const centred = style(\"centred\", {\n        textAlign: \"center\",\n        textTransform: \"uppercase\",\n        fontSize: unit(globalVars.fonts.size.small),\n        color: colorOut(globalVars.mixBgAndFg(0.6)),\n        fontWeight: globalVars.fonts.weights.semiBold,\n    });\n\n    const spacerWidth = globalVars.icon.sizes.large - (globalVars.gutter.half + globalVars.gutter.quarter);\n\n    const leftSpacer = style(\"leftSpacer\", {\n        display: \"block\",\n        height: unit(spacerWidth),\n        flexBasis: unit(spacerWidth),\n        width: unit(spacerWidth),\n    });\n\n    const action = style(\"action\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        position: \"relative\",\n        flexShrink: 1,\n        height: unit(formElVars.sizing.height),\n        width: unit(formElVars.sizing.height),\n        flexBasis: unit(formElVars.sizing.height),\n        color: colorOut(vars.colors.fg),\n        transform: `translateX(10px)`,\n        $nest: {\n            \"&:not(.focus-visible)\": {\n                outline: 0,\n            },\n            \"&:hover, &:focus, &.focus-visible\": {\n                color: colorOut(globalVars.mainColors.primary),\n            },\n        },\n    });\n\n    const backButtonIcon = style(\"backButtonIcon\", {\n        display: \"block\",\n    });\n\n    const close = style(\"close\", {\n        ...appearance(),\n        cursor: \"pointer\",\n        height: unit(formElVars.sizing.height),\n        width: unit(formElVars.sizing.height),\n        flexBasis: unit(formElVars.sizing.height),\n        padding: 0,\n        border: 0,\n    });\n\n    const closeMinimal = style(\"closeMinimal\", {\n        position: \"absolute\",\n        top: 0,\n        bottom: 0,\n        ...margins({ vertical: \"auto\" }),\n        right: unit(6),\n    });\n\n    const categoryIcon = style(\"categoryIcon\", {\n        flexBasis: unit(18),\n        marginRight: \".6em\",\n        opacity: 0.8,\n    });\n\n    return {\n        closeMinimal,\n        root,\n        rootMinimal,\n        backButton,\n        heading,\n        left,\n        centred,\n        leftSpacer,\n        action,\n        backButtonIcon,\n        close,\n        categoryIcon,\n        headingMinimal,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { percent, color } from \"csx\";\nimport { paddings, unit } from \"@library/styles/styleHelpers\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\n\nexport const containerVariables = useThemeCache(() => {\n    const vars = layoutVariables();\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"containerVariables\");\n\n    const spacing = makeThemeVars(\"spacing\", {\n        padding: {\n            horizontal: vars.gutter.size,\n        },\n    });\n\n    const sizing = makeThemeVars(\"sizes\", {\n        full: vars.contentSizes.full,\n        narrowContentSize: vars.contentSizes.narrow,\n    });\n\n    const colors = makeThemeVars(\"colors\", {\n        bg: globalVars.mainColors.bg,\n    });\n\n    return {\n        sizing,\n        colors,\n        spacing,\n    };\n});\n\nexport const containerClasses = useThemeCache(() => {\n    const style = styleFactory(\"container\");\n    const globalVars = globalVariables();\n    const vars = containerVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const root = style(\n        {\n            display: \"flex\",\n            flexDirection: \"column\",\n            position: \"relative\",\n            boxSizing: \"border-box\",\n            width: percent(100),\n            maxWidth: globalVars.content.width,\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            ...paddings(vars.spacing.padding),\n        },\n        mediaQueries.oneColumnDown({\n            ...paddings({\n                horizontal: 8,\n            }),\n        }),\n    );\n\n    return { root };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { color, em, percent } from \"csx\";\nimport { margins, paddings, unit } from \"@library/styles/styleHelpers\";\nimport { containerVariables } from \"@library/layout/components/containerStyles\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { NestedCSSProperties, NestedCSSSelectors } from \"typestyle/lib/types\";\n\nexport const typographyClasses = useThemeCache(() => {\n    const style = styleFactory(\"typography\");\n    const globalVars = globalVariables();\n    const vars = containerVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const largeTitle = style(\"largeTitle\", {});\n\n    const pageTitle = style(\n        \"pageTitle\",\n        {\n            fontSize: unit(globalVars.fonts.size.title),\n            lineHeight: globalVars.lineHeights.condensed,\n            transform: `translateX(${em(globalVars.fonts.alignment.headings.horizontal)})`,\n            $nest: {\n                ...lineHeightAdjustment(),\n                [`&.${largeTitle}`]: {\n                    fontSize: unit(globalVars.fonts.size.largeTitle),\n                },\n            },\n        } as NestedCSSProperties,\n        mediaQueries.oneColumnDown({\n            fontSize: unit(globalVars.fonts.mobile.size.title),\n            $nest: {\n                [`&.${largeTitle}`]: {\n                    fontSize: unit(globalVars.fonts.mobile.size.title),\n                },\n            },\n        }),\n    );\n\n    const subTitle = style(\"subTitle\", {\n        fontSize: unit(globalVars.fonts.size.subTitle),\n    });\n\n    const componentSubTitle = style(\"componentSubTitle\", {\n        fontSize: unit(globalVars.fonts.size.large),\n    });\n\n    return {\n        largeTitle,\n        pageTitle,\n        subTitle,\n        componentSubTitle,\n    };\n});\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { typographyClasses } from \"@library/styles/typographyStyles\";\n\nexport interface ICommonHeadingProps {\n    id?: string;\n    depth?: 1 | 2 | 3 | 4 | 5 | 6;\n    renderAsDepth?: 1 | 2 | 3 | 4 | 5 | 6;\n    className?: string;\n    title: string;\n}\n\nexport interface IHeadingProps extends ICommonHeadingProps {\n    children?: React.ReactNode;\n    titleRef: React.RefObject<HTMLHeadingElement | null>;\n}\n\n/**\n * A component representing a element.\n */\nexport default class Heading extends React.Component<IHeadingProps> {\n    public static defaultProps: Partial<IHeadingProps> = {\n        depth: 2,\n    };\n\n    private get renderAsDepth(): number {\n        return this.props.renderAsDepth ? this.props.renderAsDepth : this.props.depth!;\n    }\n\n    public render() {\n        const { children, title } = this.props;\n        const Tag = `h${this.props.depth}` as \"h1\" | \"h2\" | \"h3\" | \"h4\" | \"h5\" | \"h6\";\n        const classesTypography = typographyClasses();\n\n        return (\n            <Tag\n                id={this.props.id}\n                ref={this.props.titleRef}\n                className={classNames(\n                    \"heading\",\n                    `heading-${this.renderAsDepth}`,\n                    { [`${classesTypography.pageTitle}`]: this.renderAsDepth === 1 },\n                    this.props.className,\n                )}\n            >\n                {children ? children : title}\n            </Tag>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport * as React from \"react\";\nimport classNames from \"classnames\";\nimport { flyoutPosition } from \"@rich-editor/flyouts/pieces/flyoutPosition\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport { TabHandler } from \"@vanilla/dom-utils\";\n\nexport interface IProps {\n    id: string;\n    parentID: string;\n    className?: string;\n    children: React.ReactNode;\n    isVisible?: boolean;\n    renderAbove: boolean;\n    renderLeft: boolean;\n    legacyMode?: boolean;\n    openAsModal?: boolean;\n    selfPadded?: boolean;\n    size: DropDownContentSize;\n}\n\nexport enum DropDownContentSize {\n    SMALL = \"small\",\n    MEDIUM = \"medium\",\n}\n\n/**\n * The contents of the flyouts (not the wrapper and not the button to toggle it).\n * Note that it renders an empty, hidden div when closed so that the aria-labelledby points to an element in the DOM.\n */\nexport default class DropDownContents extends React.Component<IProps> {\n    public render() {\n        const classes = dropDownClasses();\n        const asDropDownClasses = !this.props.openAsModal\n            ? classNames(\"dropDown-contents\", classes.contents, {\n                  isMedium: this.props.size === DropDownContentSize.MEDIUM,\n              })\n            : undefined;\n        const asModalClasses = this.props.openAsModal ? classNames(\"dropDown-asModal\", classes.asModal) : undefined;\n\n        if (this.props.isVisible) {\n            return (\n                <div\n                    id={this.props.id}\n                    aria-labelledby={this.props.parentID}\n                    className={classNames(\n                        asDropDownClasses,\n                        asModalClasses,\n                        this.props.className,\n                        !this.props.selfPadded ? classes.verticalPadding : \"\",\n                    )}\n                    style={flyoutPosition(this.props.renderAbove, this.props.renderLeft, !!this.props.legacyMode)}\n                    onClick={this.doNothing}\n                    onMouseDown={this.forceTryFocus}\n                >\n                    {this.props.children}\n                </div>\n            );\n        } else {\n            return (\n                <div id={this.props.id} aria-hidden={true} aria-labelledby={this.props.parentID} className=\"sr-only\" />\n            ); // for accessibility\n        }\n    }\n\n    /**\n     * Our focus watcher has an exclusion for moving away focus when focus is moved to the body.\n     * This is standard behaviour on mousedown, if a non-focusable element is clicked.\n     *\n     * Unfortunately if this is rendered inside of a `content-editable`,\n     * the content editable will be focused instead of the body. This simple handler ensures that focus goes to the body\n     * if a non-focusable element is clicked inside a dropdown inside a content-editable.\n     */\n    private forceTryFocus = (e: React.MouseEvent) => {\n        if (e.target instanceof HTMLElement) {\n            if (!TabHandler.isTabbable(e.target)) {\n                e.preventDefault();\n                document.body.focus();\n            }\n        }\n    };\n\n    private doNothing = (e: React.MouseEvent) => {\n        e.stopPropagation();\n        e.nativeEvent.stopPropagation();\n        e.nativeEvent.stopImmediatePropagation();\n    };\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useRef } from \"react\";\nimport { frameHeaderClasses } from \"@library/layout/frame/frameHeaderStyles\";\nimport Heading from \"@library/layout/Heading\";\nimport DropDownContents, { DropDownContentSize } from \"@library/flyouts/DropDownContents\";\nimport { ButtonTypes } from \"@library/forms/buttonStyles\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport FlexSpacer from \"@library/layout/FlexSpacer\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport SmartAlign from \"@library/layout/SmartAlign\";\nimport CloseButton from \"@library/navigation/CloseButton\";\nimport FlyoutToggle from \"@library/flyouts/FlyoutToggle\";\nimport classNames from \"classnames\";\nimport { Devices, useDevice } from \"@library/layout/DeviceContext\";\nimport { DropDownMenuIcon } from \"@library/icons/common\";\nimport { props } from \"bluebird\";\n\nexport enum DropDownOpenDirection {\n    ABOVE_LEFT = \"aboveLeft\",\n    ABOVE_RIGHT = \"aboveRight\",\n    BELOW_LEFT = \"belowLeft\",\n    BELOW_RIGHT = \"belowRight\",\n    AUTO = \"auto\",\n}\n\ninterface IOpenDirectionProps {\n    openDirection?: DropDownOpenDirection;\n    renderAbove?: boolean; // @deprecated\n    renderLeft?: boolean; // @deprecated\n}\n\nexport interface IProps extends IOpenDirectionProps {\n    name?: string;\n    children: React.ReactNode;\n    className?: string;\n    describedBy?: string;\n    contentsClassName?: string;\n    buttonContents?: React.ReactNode;\n    buttonClassName?: string;\n    buttonBaseClass?: ButtonTypes;\n    disabled?: boolean;\n    toggleButtonClassName?: string;\n    initialFocusElement?: HTMLElement | null;\n    buttonRef?: React.RefObject<HTMLButtonElement>;\n    isVisible?: boolean;\n    onVisibilityChange?: (isVisible: boolean) => void;\n    openAsModal?: boolean;\n    title?: string;\n    flyoutType: FlyoutType;\n    selfPadded?: boolean;\n    isSmall?: boolean;\n    id?: string;\n}\n\nexport enum FlyoutType {\n    LIST = \"list\",\n    FRAME = \"frame\",\n}\n\nexport interface IState {\n    selectedText: string;\n}\n\n/**\n * Creates a drop down menu\n */\nexport default function DropDown(props: IProps) {\n    const ownID = useUniqueID(\"dropDown\");\n    const id = props.id || ownID;\n    const device = useDevice();\n\n    const { title } = props;\n    const classesDropDown = dropDownClasses();\n    const classesFrameHeader = frameHeaderClasses();\n    const classes = dropDownClasses();\n    const ContentTag = props.flyoutType === FlyoutType.FRAME ? \"div\" : \"ul\";\n    const openAsModal = props.openAsModal || device === Devices.MOBILE || device === Devices.XS;\n    const ownButtonRef = useRef<HTMLButtonElement>(null);\n    const openDirection = resolveOpenDirection(props, props.buttonRef || ownButtonRef);\n\n    return (\n        <FlyoutToggle\n            id={id}\n            className={classNames(props.className)}\n            buttonBaseClass={props.buttonBaseClass || ButtonTypes.ICON}\n            name={props.name!}\n            buttonContents={props.buttonContents || <DropDownMenuIcon />}\n            buttonClassName={props.buttonClassName}\n            disabled={props.disabled}\n            buttonRef={props.buttonRef || ownButtonRef}\n            toggleButtonClassName={props.toggleButtonClassName}\n            isVisible={props.isVisible}\n            onVisibilityChange={props.onVisibilityChange}\n            openAsModal={openAsModal}\n            initialFocusElement={props.initialFocusElement}\n        >\n            {params => {\n                return (\n                    <DropDownContents\n                        {...params}\n                        id={id + \"-handle\"}\n                        parentID={id}\n                        className={classNames(props.contentsClassName)}\n                        renderLeft={[DropDownOpenDirection.ABOVE_LEFT, DropDownOpenDirection.BELOW_LEFT].includes(\n                            openDirection,\n                        )}\n                        renderAbove={[DropDownOpenDirection.ABOVE_RIGHT, DropDownOpenDirection.ABOVE_LEFT].includes(\n                            openDirection,\n                        )}\n                        openAsModal={openAsModal}\n                        selfPadded={\n                            props.selfPadded !== undefined ? props.selfPadded : props.flyoutType === FlyoutType.FRAME\n                        }\n                        size={\n                            props.flyoutType === FlyoutType.FRAME && !props.isSmall\n                                ? DropDownContentSize.MEDIUM\n                                : DropDownContentSize.SMALL\n                        }\n                    >\n                        {title ? (\n                            <header className={classNames(\"frameHeader\", classesFrameHeader.root)}>\n                                {openAsModal && (\n                                    <FlexSpacer\n                                        className={classNames(\"frameHeader-leftSpacer\", classesFrameHeader.leftSpacer)}\n                                    />\n                                )}\n                                {openAsModal && (\n                                    <SmartAlign>\n                                        (\n                                        <Heading\n                                            title={title}\n                                            className={classNames(\n                                                \"dropDown-title\",\n                                                classesDropDown.title,\n                                                classes.title,\n                                            )}\n                                        />\n                                    </SmartAlign>\n                                )}\n\n                                {!openAsModal && (\n                                    <Heading\n                                        title={title}\n                                        className={classNames(\"dropDown-title\", classesDropDown.title, classes.title)}\n                                    />\n                                )}\n\n                                <CloseButton\n                                    className={classNames(classesFrameHeader.action, classesFrameHeader.categoryIcon)}\n                                    onClick={params.closeMenuHandler}\n                                />\n                            </header>\n                        ) : null}\n                        <ContentTag className={classNames(\"dropDownItems\", classes.items)}>{props.children}</ContentTag>\n                    </DropDownContents>\n                );\n            }}\n        </FlyoutToggle>\n    );\n}\n\nfunction resolveOpenDirection(props: IOpenDirectionProps, ref: React.RefObject<HTMLElement>): DropDownOpenDirection {\n    let { renderAbove, renderLeft } = props;\n    if ((props.openDirection && renderAbove) || (props.openDirection && renderLeft)) {\n        throw new Error(\"`renderAbove` & `renderLeft` may not be used with `openDirection` in <DropDown />\");\n    }\n\n    // Early bailout if we aren't auto.\n    if (ref.current && (props.openDirection === DropDownOpenDirection.AUTO || (!renderAbove && !renderLeft))) {\n        const documentWidth = document.body.clientWidth;\n        const documentHeight = document.body.clientHeight;\n\n        const rect = ref.current.getBoundingClientRect() as ClientRect;\n        const centerX = (rect.left + rect.right) / 2;\n        const centerY = (rect.top + rect.bottom) / 2;\n        renderAbove = centerY > documentHeight / 2;\n        renderLeft = centerX > documentWidth / 2;\n    } else if (props.openDirection) {\n        return props.openDirection;\n    }\n\n    if (renderAbove && renderLeft) {\n        return DropDownOpenDirection.ABOVE_LEFT;\n    } else if (renderAbove && !renderLeft) {\n        return DropDownOpenDirection.ABOVE_RIGHT;\n    } else if (!renderAbove && renderLeft) {\n        return DropDownOpenDirection.BELOW_LEFT;\n    } else if (!renderAbove && !renderLeft) {\n        return DropDownOpenDirection.BELOW_RIGHT;\n    }\n\n    // DEFAULT\n    return DropDownOpenDirection.BELOW_RIGHT;\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { flexHelper } from \"@library/styles/styleHelpers\";\nimport { style } from \"typestyle\";\n\ninterface IProps {\n    className?: string;\n    children?: React.ReactNode;\n    tag?: keyof JSX.IntrinsicElements;\n}\n\n/**\n * Implements Flex Spacer component - to keep flexed iteams centered, when the components in the flex box are not symmetric\n */\nexport default class FlexSpacer extends React.Component<IProps> {\n    public render() {\n        const content = ` `;\n        const Tag = this.props.tag || \"div\";\n        return (\n            <Tag className={classNames(this.props.className)} aria-hidden={true} tabIndex={-1}>\n                {content}\n                {this.props.children && <span className=\"sr-only\">{this.props.children}</span>}\n            </Tag>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\nimport { percent } from \"csx\";\n\nexport const smartAlignClasses = useThemeCache(() => {\n    const style = styleFactory(\"smartAlign\");\n\n    const root = style({\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        width: percent(100),\n    });\n\n    const inner = style(\"inner\", {\n        textAlign: \"left\",\n    });\n\n    return {\n        root,\n        inner,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { smartAlignClasses } from \"@library/layout/smartAlignStyles\";\n\ninterface IProps {\n    className?: string;\n    children: React.ReactNode;\n    outerTag?: keyof JSX.IntrinsicElements;\n    innerTag?: keyof JSX.IntrinsicElements;\n}\n\nexport default class SmartAlign extends React.Component<IProps> {\n    public render() {\n        const Outer = this.props.outerTag || \"div\";\n        const Inner = this.props.outerTag || \"div\";\n        const classes = smartAlignClasses();\n        return (\n            <Outer className={classNames(\"smartAlign-outer\", this.props.className, classes.root)}>\n                <Inner className={classNames(\"smartAlign-inner\", classes.inner)}>{this.props.children}</Inner>\n            </Outer>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { t } from \"@library/utility/appUtils\";\nimport { ButtonTypes } from \"@library/forms/buttonStyles\";\nimport Button from \"@library/forms/Button\";\nimport { CloseCompactIcon, CloseIcon } from \"@library/icons/common\";\n\ninterface IProps {\n    className?: string;\n    disabled?: boolean;\n    onClick: any;\n    baseClass?: ButtonTypes;\n    title?: string;\n    compact?: boolean;\n}\n\n/**\n * A standardized close button.\n */\nexport default class CloseButton extends React.PureComponent<IProps> {\n    public static defaultProps = {\n        baseClass: ButtonTypes.ICON,\n        compact: false,\n    };\n\n    /**\n     * There are 2 rendering modes. 1 with w real icon, and one using text in place of an icon.\n     */\n    public render() {\n        const closeLabel = this.props.title ? this.props.title : t(\"Close\");\n        const componentClasses = classNames(\"buttonClose\", \"closeButton\", this.props.className);\n        return (\n            <Button\n                disabled={this.props.disabled}\n                className={componentClasses}\n                title={closeLabel}\n                onClick={this.props.onClick}\n                baseClass={this.props.baseClass}\n            >\n                {this.props.compact ? <CloseCompactIcon /> : <CloseIcon />}\n            </Button>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { absolutePosition, allLinkStates, borders, margins, negative, unit } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { percent, px } from \"csx\";\n\nexport const attachmentVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"attachment\");\n\n    const padding = makeThemeVars(\"padding\", {\n        default: 12,\n    });\n\n    const text = makeThemeVars(\"text\", {\n        fontSize: globalVars.fonts.size.medium,\n    });\n\n    const title = makeThemeVars(\"title\", {\n        color: globalVars.mixBgAndFg(0.9),\n    });\n\n    const loading = makeThemeVars(\"loading\", {\n        opacity: 0.5,\n    });\n\n    return { padding, text, title, loading };\n});\n\nexport const attachmentClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const formElementVars = formElementsVariables();\n    const vars = attachmentVariables();\n    const style = styleFactory(\"attachment\");\n\n    const link = style(\"link\", {\n        display: \"block\",\n        width: \"100%\",\n        ...allLinkStates({\n            allStates: {\n                textDecoration: \"none\",\n            },\n        }),\n    });\n\n    const box = style(\"box\", {\n        position: \"relative\",\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        alignItems: \"flex-start\",\n        justifyContent: \"space-between\",\n        padding: vars.padding.default,\n        width: percent(100),\n        ...borders({\n            color: globalVars.elementaryColors.transparent,\n            width: 2,\n            radius: 0,\n        }),\n    });\n\n    const format = style(\"format\", {\n        flexBasis: px(globalVars.icon.sizes.small + vars.padding.default),\n        height: unit(globalVars.icon.sizes.small),\n        paddingRight: unit(vars.padding.default),\n        flexShrink: 1,\n    });\n\n    const main = style(\"main\", {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"flex-start\",\n        justifyContent: \"flex-start\",\n        flexGrow: 1,\n    });\n\n    const title = style(\"title\", {\n        fontSize: px(vars.text.fontSize),\n        color: vars.title.color.toString(),\n        fontWeight: globalVars.fonts.weights.semiBold,\n        lineHeight: px(globalVars.icon.sizes.small),\n    });\n\n    const metas = style(\"metas\", {\n        ...margins({\n            left: unit(negative(vars.padding.default / 2)),\n            right: unit(negative(vars.padding.default / 2)),\n            bottom: 0,\n        }),\n        lineHeight: globalVars.lineHeights.condensed,\n    });\n\n    const close = style(\"close\", {\n        ...margins({\n            top: px(-((formElementVars.sizing.height - globalVars.icon.sizes.default) / 2)),\n            right: px(-((formElementVars.sizing.height - globalVars.icon.sizes.default) / 2)),\n        }),\n        pointerEvents: \"all\",\n    });\n\n    const loadingProgress = style(\"loadingProgress\", {\n        ...absolutePosition.bottomLeft(),\n        transition: `width ease-out .2s`,\n        height: px(3),\n        marginBottom: px(0),\n        width: 0,\n        maxWidth: percent(100),\n        backgroundColor: globalVars.mainColors.primary.toString(),\n    });\n\n    const loadingContent = style(\"loadingContent\", {\n        $nest: {\n            [`.${format}`]: {\n                opacity: vars.loading.opacity,\n            },\n            [`.${main}`]: {\n                opacity: vars.loading.opacity,\n            },\n        },\n    });\n\n    return { link, box, format, main, title, metas, close, loadingProgress, loadingContent };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { margins } from \"@library/styles/styleHelpers\";\nimport { componentThemeVariables, styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\nimport { calc, px } from \"csx\";\n\nexport const attachmentIconVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const themeVars = componentThemeVariables(\"attachmentIcon\");\n\n    const spacing = {\n        default: 12,\n        ...themeVars.subComponentStyles(\"spacing\"),\n    };\n\n    const shadow = {\n        color: globalVars.mixBgAndFg(0.1),\n        ...themeVars.subComponentStyles(\"shadow\"),\n    };\n\n    const icon = {\n        size: 16,\n        errorIconHeight: 14.39,\n    };\n\n    return { spacing, shadow, icon };\n});\n\nexport const attachmentIconsClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = attachmentIconVariables();\n    const style = styleFactory(\"attachmentIcons\");\n\n    const root = style({\n        display: \"block\",\n        position: \"relative\",\n    });\n\n    const items = style(\"items\", {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        alignItems: \"flex-start\",\n        justifyContent: \"flex-end\",\n        width: calc(`100% + ${px(vars.spacing.default * 2)}`),\n        overflow: \"hidden\",\n        ...margins({\n            top: -vars.spacing.default,\n            left: -vars.spacing.default,\n            right: globalVars.meta.spacing.default,\n        }),\n    });\n\n    const item = style(\"item\", {\n        margin: vars.spacing.default,\n    });\n\n    return { root, items, item };\n});\n\nexport const attachmentIconClasses = useThemeCache(() => {\n    const vars = attachmentIconVariables();\n    const style = styleFactory(\"attachmentIcon\");\n\n    const root = style({\n        display: \"block\",\n        width: px(vars.icon.size),\n        height: px(vars.icon.size),\n        boxShadow: `0 0 0 1px ${vars.shadow.color}`,\n    });\n\n    const error = style(\"error\", {\n        width: px(vars.icon.size),\n        height: px(vars.icon.errorIconHeight),\n    });\n\n    return { root, error };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { colorOut, paddings, singleBorder, unit } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\nimport { important } from \"csx\";\nimport { frameVariables } from \"@library/layout/frame/frameStyles\";\n\nexport const frameFooterClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"frameFooter\");\n    const vars = frameVariables();\n\n    const root = style({\n        display: \"flex\",\n        minHeight: unit(vars.footer.minHeight),\n        alignItems: \"center\",\n        position: \"relative\",\n        zIndex: 1,\n        borderTop: singleBorder(),\n        flexWrap: \"wrap\",\n        justifyContent: \"space-between\",\n        ...paddings({\n            top: 0,\n            bottom: 0,\n            left: vars.footer.spacing,\n            right: vars.footer.spacing,\n        }),\n    });\n\n    const justifiedRight = style(\"justifiedRight\", {\n        $nest: {\n            \"&&\": {\n                justifyContent: \"flex-end\",\n            },\n        },\n    });\n\n    const markRead = style(\"markRead\", {\n        $nest: {\n            \"&.buttonAsText\": {\n                fontWeight: globalVars.fonts.weights.semiBold,\n                color: colorOut(globalVars.mainColors.primary),\n            },\n        },\n    });\n\n    const actionButton = style(\"actionButton\", {\n        marginLeft: unit(24),\n    });\n\n    const selfPadded = style({\n        paddingLeft: important(0),\n        paddingRight: important(0),\n    });\n\n    return {\n        root,\n        markRead,\n        selfPadded,\n        actionButton,\n        justifiedRight,\n    };\n});\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { frameFooterClasses } from \"@library/layout/frame/frameFooterStyles\";\nimport classNames from \"classnames\";\n\nexport interface IFrameFooterProps {\n    className?: string;\n    children: React.ReactNode;\n    selfPadded?: boolean;\n    justifyRight?: boolean;\n}\n\n/**\n * Generic footer for frame component\n */\nexport default class FrameFooter extends React.PureComponent<IFrameFooterProps> {\n    public static defaultProps = {\n        validSelection: false,\n    };\n\n    public render() {\n        const classes = frameFooterClasses();\n        return (\n            <footer\n                className={classNames(\n                    \"frameFooter\",\n                    this.props.className,\n                    classes.root,\n                    this.props.justifyRight && classes.justifiedRight,\n                    this.props.selfPadded ? classes.selfPadded : \"\",\n                )}\n            >\n                {this.props.children}\n            </footer>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { paddings, unit, importantUnit } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\nimport { frameVariables } from \"@library/layout/frame/frameStyles\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\n\nexport const frameBodyClasses = useThemeCache(() => {\n    const vars = frameVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"frameBody\");\n    const classesInputBlock = inputBlockClasses();\n\n    const root = style({\n        position: \"relative\",\n        ...paddings({\n            left: vars.spacing.padding,\n            right: vars.spacing.padding,\n        }),\n        $nest: {\n            \"&.isSelfPadded\": {\n                ...paddings({\n                    left: 0,\n                    right: 0,\n                }),\n            },\n            [`& > .${classesInputBlock.root}`]: {\n                $nest: {\n                    \"&.isFirst\": {\n                        marginTop: unit(globalVars.gutter.half),\n                    },\n                    \"&.isLast\": {\n                        marginBottom: unit(globalVars.gutter.half),\n                    },\n                },\n            },\n        },\n    });\n\n    const noContentMessage = style(\"noContentMessage\", {\n        ...paddings({\n            top: vars.header.spacing * 2,\n            right: vars.header.spacing,\n            bottom: vars.header.spacing * 2,\n            left: vars.header.spacing,\n        }),\n    });\n    const contents = style(\"contents\", {\n        ...paddings({\n            top: vars.spacing.padding,\n            right: 0,\n            bottom: vars.spacing.padding,\n            left: 0,\n        }),\n        fontSize: importantUnit(globalVars.fonts.size.medium),\n        minHeight: unit(50),\n    });\n    return {\n        root,\n        noContentMessage,\n        contents,\n    };\n});\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { frameBodyClasses } from \"@library/layout/frame/frameBodyStyles\";\nimport classNames from \"classnames\";\n\nexport interface IFrameBodyProps {\n    className?: string;\n    selfPadded?: boolean;\n    children: React.ReactNode;\n    scrollable?: boolean; // DON'T use at the same time as the Modal scrollable.\n}\n\n/**\n * This section goes between the header/footer.\n * Note the each child will be split into a separate \"FramePanel\". This will allow animations/transitions in the future.\n */\nexport default class FrameBody extends React.PureComponent<IFrameBodyProps> {\n    public render() {\n        const classes = frameBodyClasses();\n        return (\n            <div\n                className={classNames(\"frameBody\", this.props.className, classes.root, {\n                    isSelfPadded: this.props.selfPadded,\n                })}\n            >\n                {this.props.children}\n            </div>\n        );\n    }\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport { IMe, IMeCounts, IUser, IUserFragment } from \"@library/@types/api/users\";\nimport UserSuggestionModel, { IUserSuggestionState } from \"@library/features/users/suggestion/UserSuggestionModel\";\nimport UserActions from \"@library/features/users/UserActions\";\nimport produce from \"immer\";\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport NotificationsActions from \"@library/features/notifications/NotificationsActions\";\n\nexport interface IInjectableUserState {\n    currentUser: ILoadable<IMe>;\n}\n\ninterface IUsersState {\n    current: ILoadable<IMe>;\n    countInformation: {\n        counts: IMeCounts;\n        lastRequested: number | null; // A timestamp of the last time we received this count data.\n    };\n    suggestions: IUserSuggestionState;\n}\n\nexport interface IUsersStoreState {\n    users: IUsersState;\n}\n\nconst suggestionReducer = new UserSuggestionModel().reducer;\n\nconst INITIAL_STATE: IUsersState = {\n    current: {\n        status: LoadStatus.PENDING,\n    },\n    countInformation: {\n        counts: [],\n        lastRequested: null,\n    },\n    suggestions: suggestionReducer(undefined, \"\" as any),\n};\n\nexport const GUEST_USER_ID = 0;\n\n/**\n * Determine if a user fragment is a guest.\n */\nexport function isUserGuest(user: IUserFragment | null | undefined) {\n    return user && user.userID === GUEST_USER_ID;\n}\n/**\n * Reducer for user related data.\n */\nexport const usersReducer = produce(\n    reducerWithInitialState(INITIAL_STATE)\n        .case(UserActions.getMeACs.started, state => {\n            state.current.status = LoadStatus.LOADING;\n            return state;\n        })\n        .case(UserActions.getMeACs.done, (state, payload) => {\n            state.current.data = payload.result;\n            state.current.status = LoadStatus.SUCCESS;\n            return state;\n        })\n        .case(UserActions.getMeACs.failed, (state, payload) => {\n            state.current.status = LoadStatus.ERROR;\n            state.current.error = payload.error;\n            return state;\n        })\n        .case(UserActions.getCountsACs.started, state => {\n            state.countInformation.lastRequested = new Date().getTime();\n            return state;\n        })\n        .case(UserActions.getCountsACs.done, (state, payload) => {\n            state.countInformation.counts = payload.result.counts;\n            return state;\n        })\n        .default((state, action) => {\n            if (action.type === NotificationsActions.MARK_ALL_READ_RESPONSE) {\n                if (state.current.data) {\n                    state.current.data.countUnreadNotifications = 0;\n                }\n            }\n            state.suggestions = suggestionReducer(state.suggestions, action as any);\n            return state;\n        }),\n);\n\nexport function mapUsersStoreState(state: ICoreStoreState): IInjectableUserState {\n    if (!state.users || !state.users.current) {\n        throw new Error(\n            `It seems you did not initialize the users model correctly. Could not find \"users.current\" in state: ${state}`,\n        );\n    }\n\n    return {\n        currentUser: state.users.current,\n    };\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { onContent } from \"@library/utility/appUtils\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\n\ntype HLJS = typeof import(\"highlight.js\");\n\nexport function initCodeHighlighting() {\n    void highlightCodeBlocks();\n    onContent(() => void highlightCodeBlocks());\n}\n\nexport async function highlightCodeBlocks(domNode: HTMLElement = document.body) {\n    const hljs = await importHLJS();\n    const blocks = domNode.querySelectorAll(\".code.codeBlock\");\n    blocks.forEach(hljs.highlightBlock);\n}\n\n/**\n * Highlight some text and return HTML for it.\n *\n * @param text Some text to highlight.\n */\nexport async function highlightText(text: string): Promise<string> {\n    const hljs = await importHLJS();\n    return hljs.highlightAuto(text).value;\n}\n\nlet requestPromise: Promise<HLJS> | null = null;\n\n/**\n * Ensure we only import this once.\n */\nfunction importHLJS(): Promise<HLJS> {\n    if (requestPromise !== null) {\n        return requestPromise;\n    }\n\n    const innerImport = async () => {\n        // Lazily initialize this because it can be rather heavy.\n        const hljs = await import(\"highlight.js\" /* webpackChunkName: \"highlightJs\" */);\n\n        // Start fetching the styles.\n        const vars = globalVariables();\n        const useLight = vars.mainColors.bg.lightness() >= 0.5;\n        if (useLight) {\n            await import(\"./_codeLight.scss\" /* webpackChunkName: \"highlightJs-light\" */ as any); // Sorry typescript.\n        } else {\n            await import(\"./_codeDark.scss\" /* webpackChunkName: \"highlightJs-dark\" */ as any); // Sorry typescript.\n        }\n\n        return hljs;\n    };\n\n    requestPromise = innerImport();\n    return requestPromise;\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonStyles\";\nimport Modal from \"@library/modal/Modal\";\nimport ModalSizes from \"@library/modal/ModalSizes\";\nimport { t } from \"@library/utility/appUtils\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { forceRenderStyles } from \"typestyle\";\nimport { useFocusWatcher, useEscapeListener } from \"@vanilla/react-utils\";\n\nexport interface IFlyoutToggleChildParameters {\n    id: string;\n    isVisible: boolean;\n    closeMenuHandler(event?: React.SyntheticEvent<any>);\n    renderAbove?: boolean;\n    renderLeft?: boolean;\n}\n\ninterface IProps {\n    name?: string;\n    id: string;\n    className?: string;\n    buttonContents: React.ReactNode;\n    disabled?: boolean;\n    children: (props: IFlyoutToggleChildParameters) => JSX.Element;\n    onClose?: () => void;\n    buttonBaseClass: ButtonTypes;\n    buttonClassName?: string;\n    isVisible?: boolean;\n    onVisibilityChange?: (isVisible: boolean) => void;\n    renderAbove?: boolean;\n    renderLeft?: boolean;\n    toggleButtonClassName?: string;\n    buttonRef?: React.RefObject<HTMLButtonElement>;\n    openAsModal: boolean;\n    initialFocusElement?: HTMLElement | null;\n}\n\nexport default function FlyoutToggle(props: IProps) {\n    const { initialFocusElement, onVisibilityChange, onClose } = props;\n\n    // IDs unique to the component instance.\n    const ID = useMemo(() => uniqueIDFromPrefix(\"flyout\"), []);\n    const buttonID = ID + \"-handle\";\n    const contentID = ID + \"-contents\";\n\n    // Focus management & visibility\n    const ownButtonRef = useRef<HTMLButtonElement>(null);\n    const buttonRef = props.buttonRef || ownButtonRef;\n\n    const controllerRef = useRef<HTMLDivElement>(null);\n    const [ownIsVisible, ownSetVisibility] = useState(false);\n    const isVisible = props.isVisible !== undefined ? props.isVisible : ownIsVisible;\n    const setVisibility = useCallback(\n        (visibility: boolean) => {\n            ownSetVisibility(visibility);\n            onVisibilityChange && onVisibilityChange(visibility);\n\n            // Kludge for interaction with old flyout system.\n            if (visibility === true && window.closeAllFlyouts) {\n                window.closeAllFlyouts();\n            }\n        },\n        [ownSetVisibility, onVisibilityChange],\n    );\n\n    useEffect(() => {\n        if (isVisible && initialFocusElement) {\n            // Focus the inital focusable element when we gain visibility.\n            if (initialFocusElement) {\n                initialFocusElement.focus();\n            }\n        }\n    }, [isVisible, initialFocusElement]);\n\n    /**\n     * Toggle Menu menu\n     */\n    const buttonClickHandler = useCallback(\n        (e: MouseEvent) => {\n            e.stopPropagation();\n            setVisibility(!isVisible);\n        },\n        [isVisible, setVisibility],\n    );\n\n    useEffect(() => {\n        const buttonElement = buttonRef.current;\n        if (!buttonElement) {\n            return;\n        }\n\n        buttonElement.addEventListener(\"click\", buttonClickHandler);\n        return () => {\n            buttonElement.removeEventListener(\"click\", buttonClickHandler);\n        };\n    }, [buttonRef, buttonClickHandler]);\n\n    const closeMenuHandler = useCallback(\n        event => {\n            event.stopPropagation();\n            event.preventDefault();\n\n            onClose && onClose();\n\n            const { activeElement } = document;\n            const parentElement = controllerRef.current;\n\n            setVisibility(false);\n\n            if (parentElement && parentElement.contains(activeElement)) {\n                if (buttonRef.current) {\n                    buttonRef.current.focus();\n                    buttonRef.current.classList.add(\"focus-visible\");\n                }\n            }\n        },\n        [onClose, controllerRef, buttonRef, setVisibility],\n    );\n\n    /**\n     * Stop click propagation outside the flyout\n     */\n    const handleBlockEventPropogation = useCallback((e: React.SyntheticEvent) => {\n        e.stopPropagation();\n    }, []);\n\n    const handleFocusChange = (hasFocus: boolean) => {\n        if (!hasFocus) {\n            setVisibility(false);\n        }\n    };\n\n    // Focus handling\n    useFocusWatcher(controllerRef, handleFocusChange, props.openAsModal);\n    useEscapeListener({\n        root: controllerRef.current,\n        returnElement: buttonRef.current,\n        callback: closeMenuHandler,\n    });\n\n    const classes = dropDownClasses();\n    const buttonClasses = classNames(props.buttonClassName, props.toggleButtonClassName, {\n        isOpen: isVisible,\n    });\n    useEffect(() => {\n        // Prevent flashing on the first render\n        forceRenderStyles();\n    }, []);\n\n    const childrenData: IFlyoutToggleChildParameters = {\n        id: contentID,\n        isVisible: !!isVisible,\n        closeMenuHandler,\n        renderAbove: props.renderAbove,\n        renderLeft: props.renderLeft,\n    };\n\n    const classesDropDown = !props.openAsModal ? classNames(\"flyouts\", classes.root) : null;\n    return (\n        <div\n            id={ID}\n            className={classNames(classesDropDown, props.className, {\n                asModal: props.openAsModal,\n            })}\n            ref={controllerRef}\n            onClick={handleBlockEventPropogation}\n        >\n            <Button\n                id={buttonID}\n                className={buttonClasses}\n                title={props.name}\n                aria-label={\"name\" in props ? props.name : undefined}\n                aria-controls={contentID}\n                aria-expanded={isVisible}\n                aria-haspopup=\"true\"\n                disabled={props.disabled}\n                baseClass={props.buttonBaseClass}\n                buttonRef={buttonRef}\n            >\n                {props.buttonContents}\n            </Button>\n\n            {!props.disabled && isVisible && (\n                <React.Fragment>\n                    {props.openAsModal ? (\n                        <Modal\n                            label={t(\"title\")}\n                            size={ModalSizes.SMALL}\n                            exitHandler={closeMenuHandler}\n                            elementToFocusOnExit={buttonRef.current!}\n                        >\n                            {props.children(childrenData)}\n                        </Modal>\n                    ) : (\n                        props.children(childrenData)\n                    )}\n                </React.Fragment>\n            )}\n        </div>\n    );\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ModalSizes from \"@library/modal/ModalSizes\";\nimport { ModalView } from \"@library/modal/ModalView\";\nimport { logWarning } from \"@vanilla/utils\";\nimport React, { ReactElement } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { TabHandler } from \"@vanilla/dom-utils\";\n\ninterface IHeadingDescription {\n    titleID: string;\n}\n\ninterface ITextDescription {\n    label: string; // Necessary if there's no proper title\n}\n\ninterface IModalCommonProps {\n    className?: string;\n    exitHandler?: (event?: React.SyntheticEvent<any>) => void;\n    pageContainer?: Element | null;\n    container?: Element;\n    description?: string;\n    children: React.ReactNode;\n    elementToFocus?: HTMLElement;\n    size: ModalSizes;\n    scrollable?: boolean;\n    elementToFocusOnExit: HTMLElement; // Should either be a specific element or use document.activeElement\n    isWholePage?: boolean;\n}\n\ninterface IModalTextDescription extends IModalCommonProps, ITextDescription {}\n\ninterface IModalHeadingDescription extends IModalCommonProps, IHeadingDescription {}\n\ntype IProps = IModalTextDescription | IModalHeadingDescription;\n\ninterface IState {\n    exitElementSet: boolean;\n}\n\nexport const MODAL_CONTAINER_ID = \"modals\";\nexport const PAGE_CONTAINER_ID = \"page\";\n\n/**\n * Mount a modal with ReactDOM. This is only needed at the top level context.\n *\n * If you are already in a react context, just use `<Modal />`.\n * Note: Using this will clear any other modals mounted with this component.\n *\n * @param element The <Modal /> element to render.\n */\nexport function mountModal(element: ReactElement<any>) {\n    // Ensure we have our modal container.\n    let modals = document.getElementById(MODAL_CONTAINER_ID);\n    if (!modals) {\n        modals = document.createElement(\"div\");\n        modals.id = MODAL_CONTAINER_ID;\n        document.body.appendChild(modals);\n    } else {\n        ReactDOM.unmountComponentAtNode(modals);\n    }\n\n    ReactDOM.render(\n        element,\n        modals, // Who cares where we go. This is a portal anyways.\n    );\n}\n\n/**\n * An accessible Modal component.\n *\n * - Renders into the `#modals` element with a React portal.\n * - Implements tab trapping.\n * - Closes with the escape key.\n * - Sets aria-hidden on the main application.\n * - Prevents scrolling of the body.\n * - Focuses the first focusable element in the Modal.\n */\nexport default class Modal extends React.Component<IProps, IState> {\n    public static defaultProps: Partial<IProps> = {\n        isWholePage: false,\n    };\n\n    public static focusHistory: HTMLElement[] = [];\n    public static stack: Modal[] = [];\n    private selfRef = React.createRef<HTMLDivElement>();\n\n    public state = {\n        exitElementSet: false,\n    };\n\n    /**\n     * Render the contents into a portal.\n     */\n    public render() {\n        const portal = ReactDOM.createPortal(\n            <ModalView\n                scrollable={this.props.scrollable}\n                onKeyDown={this.handleTabbing}\n                onModalClick={this.handleModalClick}\n                onOverlayClick={this.handleScrimClick}\n                description={this.props.description}\n                size={this.props.size}\n                modalRef={this.selfRef}\n                titleID={\"titleID\" in this.props ? this.props.titleID : undefined}\n                label={\"label\" in this.props ? this.props.label : undefined}\n            >\n                {this.props.children}\n            </ModalView>,\n            this.getModalContainer(),\n        );\n        return portal;\n    }\n\n    /**\n     * Get a fresh instance of the TabHandler.\n     *\n     * Since the contents of the modal could be changing constantly\n     * we are creating a new instance every time we need it.\n     */\n    private get tabHandler(): TabHandler {\n        return new TabHandler(this.selfRef.current!);\n    }\n\n    /**\n     * Initial component setup.\n     *\n     * Everything here should be torn down in componentWillUnmount\n     */\n    public componentDidMount() {\n        const pageContainer = this.getPageContainer();\n        if (!pageContainer) {\n            logWarning(`\nA modal was mounted, but the page container could not be found.\nPlease wrap your primary content area with the ID \"${PAGE_CONTAINER_ID}\" so it can be hidden to screenreaders.\n            `);\n        }\n\n        this.focusInitialElement();\n        pageContainer && pageContainer.setAttribute(\"aria-hidden\", true);\n\n        // Add the escape keyboard listener only on the first modal in the stack.\n        if (Modal.stack.length === 0) {\n            document.addEventListener(\"keydown\", this.handleDocumentEscapePress);\n        }\n        Modal.stack.push(this);\n        this.forceUpdate();\n    }\n\n    /**\n     * We need to check again for focus if the focus is by ref\n     */\n    public componentDidUpdate(prevProps: IProps) {\n        if (prevProps.elementToFocus !== this.props.elementToFocus) {\n            this.focusInitialElement();\n        }\n        this.setCloseFocusElement();\n    }\n\n    /**\n     * Tear down setup from componentDidMount\n     */\n    public componentWillUnmount() {\n        const pageContainer = this.getPageContainer();\n        // Set aria-hidden on page and reenable scrolling if we're removing the last modal\n        Modal.stack.pop();\n        if (Modal.stack.length === 0) {\n            pageContainer && pageContainer.removeAttribute(\"aria-hidden\");\n\n            // This event listener is only added once (on the top modal).\n            // So we only remove when clearing the last one.\n            document.removeEventListener(\"keydown\", this.handleDocumentEscapePress);\n        } else {\n            pageContainer && pageContainer.setAttribute(\"aria-hidden\", true);\n        }\n        const prevFocussedElement = Modal.focusHistory.pop() || document.body;\n        prevFocussedElement.focus();\n        setImmediate(() => {\n            prevFocussedElement.focus();\n        });\n    }\n\n    private getModalContainer(): HTMLElement {\n        let container = document.getElementById(MODAL_CONTAINER_ID)!;\n        if (container === null) {\n            container = document.createElement(\"div\");\n            container.id = MODAL_CONTAINER_ID;\n            document.body.appendChild(container);\n        }\n        return container;\n    }\n\n    private getPageContainer(): HTMLElement | null {\n        return document.getElementById(PAGE_CONTAINER_ID);\n    }\n\n    /**\n     * Focus the initial element in the Modal.\n     */\n    private focusInitialElement() {\n        const focusElement = this.props.elementToFocus ? this.props.elementToFocus : this.tabHandler.getInitial();\n        if (focusElement) {\n            focusElement!.focus();\n        }\n    }\n\n    /**\n     * Set focus on element to target when we close the modal\n     */\n    private setCloseFocusElement() {\n        // if we need to rerender the component, we don't want to include a bad value in the focus history\n        if (this.props.elementToFocusOnExit && !this.state.exitElementSet) {\n            Modal.focusHistory.push(this.props.elementToFocusOnExit);\n            this.setState({\n                exitElementSet: true,\n            });\n        }\n    }\n\n    /**\n     * Handle tab keyboard presses.\n     */\n    private handleTabbing = (event: React.KeyboardEvent) => {\n        const tabKey = 9;\n\n        if (event.shiftKey && event.keyCode === tabKey) {\n            this.handleShiftTab(event);\n        } else if (!event.shiftKey && event.keyCode === tabKey) {\n            this.handleTab(event);\n        }\n    };\n\n    /**\n     * Handle escape press and close the top modal.\n     *\n     * This listener is added to the document in the event a non-focusable element inside the modal is clicked.\n     * In that case focus will be on the document.\n     *\n     * Because of this we have to be smarter and call only the top modal's escape handler.\n     */\n    private handleDocumentEscapePress = (event: React.SyntheticEvent | KeyboardEvent) => {\n        const topModal = Modal.stack[Modal.stack.length - 1];\n        const escKey = 27;\n\n        if (\"keyCode\" in event && event.keyCode === escKey) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (Modal.stack.length === 1 && this.props.isWholePage) {\n                return;\n            } else {\n                if (topModal.props.exitHandler) {\n                    topModal.props.exitHandler(event as any);\n                }\n            }\n        }\n    };\n\n    /**\n     * Stop propagation of events at the top of the modal so they don't make it\n     * to the scrim click handler.\n     */\n    private handleModalClick = (event: React.MouseEvent) => {\n        event.stopPropagation();\n    };\n\n    /**\n     * Call the exit handler when the scrim is clicked directly.\n     */\n    private handleScrimClick = (event: React.MouseEvent) => {\n        event.preventDefault();\n        if (this.props.exitHandler) {\n            this.props.exitHandler(event);\n        }\n    };\n\n    /**\n     * Handle shift tab key presses.\n     *\n     * - Focuses the previous element in the modal.\n     * - Loops if we are at the beginning\n     *\n     * @param event The react event.\n     */\n    private handleShiftTab(event: React.KeyboardEvent) {\n        const nextElement = this.tabHandler.getNext(undefined, true);\n        if (nextElement) {\n            event.preventDefault();\n\n            event.stopPropagation();\n            nextElement.focus();\n        }\n    }\n\n    /**\n     * Handle tab key presses.\n     *\n     * - Focuses the next element in the modal.\n     * - Loops if we are at the end.\n     *\n     * @param event The react event.\n     */\n    private handleTab(event: React.KeyboardEvent) {\n        const previousElement = this.tabHandler.getNext();\n        if (previousElement) {\n            event.preventDefault();\n            event.stopPropagation();\n            previousElement.focus();\n        }\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { titleBarVariables } from \"@library/headers/titleBarStyles\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { shadowHelper } from \"@library/styles/shadowHelpers\";\nimport {\n    borders,\n    colorOut,\n    fullSizeOfParent,\n    margins,\n    sticky,\n    unit,\n    absolutePosition,\n} from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { calc, percent, translate, translateX, viewHeight } from \"csx\";\nimport { NestedCSSProperties } from \"typestyle/lib/types\";\nimport { cssRule } from \"typestyle\";\n\nexport const modalVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"modal\");\n\n    const { elementaryColors } = globalVars;\n\n    const colors = makeThemeVars(\"colors\", {\n        fg: globalVars.mainColors.fg,\n        bg: globalVars.mainColors.bg,\n        overlayBg:\n            globalVars.mainColors.fg.lightness() > 0.5\n                ? elementaryColors.white.fade(0.4)\n                : elementaryColors.black.fade(0.4),\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        large: 720,\n        medium: 516,\n        small: 375,\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        horizontalMargin: 16,\n    });\n\n    const border = makeThemeVars(\"border\", {\n        radius: globalVars.border.radius,\n    });\n\n    const dropDown = makeThemeVars(\"dropDown\", {\n        padding: globalVars.spacer.size,\n    });\n\n    const header = makeThemeVars(\"header\", {\n        minHeight: 60,\n        verticalPadding: 12,\n        boxShadow: `0 1px 2px 0 ${colorOut(globalVars.overlay.bg)}`,\n    });\n\n    const footer = makeThemeVars(\"footer\", {\n        minHeight: header.minHeight,\n        verticalPadding: header.verticalPadding,\n        boxShadow: `0 -1px 2px 0 ${colorOut(globalVars.overlay.bg)}`,\n    });\n\n    return {\n        colors,\n        sizing,\n        spacing,\n        border,\n        dropDown,\n        header,\n        footer,\n    };\n});\n\nexport const modalClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = modalVariables();\n    const style = styleFactory(\"modal\");\n    const mediaQueries = layoutVariables().mediaQueries();\n    const shadows = shadowHelper();\n    const titleBarVars = titleBarVariables();\n\n    cssRule(\"#modals\", {\n        position: \"relative\",\n        zIndex: 1050, // Sorry it's so high. Our dashboard uses some bootstrap which specifies 1040 for the old modals.\n        // When nesting our modals on top we need to be higher.\n    });\n\n    const overlay = style(\"overlay\", {\n        position: \"fixed\",\n        // Viewport units are useful here because\n        // we're actually fine this being taller than the initially visible viewport.\n        height: viewHeight(100),\n        width: percent(100),\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: colorOut(vars.colors.overlayBg),\n        zIndex: 10,\n    });\n\n    const root = style({\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: percent(100),\n        maxWidth: percent(100),\n        maxHeight: viewHeight(80),\n        zIndex: 1,\n        backgroundColor: colorOut(vars.colors.bg),\n        position: \"fixed\",\n        top: percent(50),\n        left: percent(50),\n        bottom: \"initial\",\n        overflow: \"hidden\",\n        borderRadius: unit(vars.border.radius),\n        // NOTE: This transform can cause issues if anything inside of us needs fixed positioning.\n        // See http://meyerweb.com/eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/\n        // See also https://www.w3.org/TR/2009/WD-css3-2d-transforms-20091201/#introduction\n        // This is why fullscreen unsets the transforms.\n        transform: translate(`-50%`, `-50%`),\n        ...margins({ all: \"auto\" }),\n        $nest: {\n            \"&&.isFullScreen\": {\n                width: percent(100),\n                height: percent(100),\n                maxHeight: percent(100),\n                maxWidth: percent(100),\n                borderRadius: 0,\n                border: \"none\",\n                top: 0,\n                bottom: 0,\n                transform: \"none\",\n                left: 0,\n                right: 0,\n            },\n            \"&.isLarge\": {\n                width: unit(vars.sizing.large),\n                maxWidth: calc(`100% - ${unit(vars.spacing.horizontalMargin * 2)}`),\n            },\n            \"&.isMedium\": {\n                width: unit(vars.sizing.medium),\n                maxWidth: calc(`100% - ${unit(vars.spacing.horizontalMargin * 2)}`),\n            },\n            \"&.isSmall\": {\n                width: unit(vars.sizing.small),\n                maxWidth: calc(`100% - ${unit(vars.spacing.horizontalMargin * 2)}`),\n            },\n            \"&&&.isSidePanel\": {\n                left: unit(vars.dropDown.padding),\n                width: calc(`100% - ${unit(vars.dropDown.padding)}`),\n                display: \"flex\",\n                flexDirection: \"column\",\n                top: 0,\n                bottom: 0,\n                right: 0,\n                transform: \"none\",\n                borderTopRightRadius: 0,\n                borderBottomRightRadius: 0,\n            },\n            \"&&.isDropDown\": {\n                top: 0,\n                left: 0,\n                right: 0,\n                bottom: globalVars.gutter.size,\n                width: percent(100),\n                marginBottom: \"auto\",\n                transform: \"none\",\n                maxHeight: percent(100),\n                borderTopLeftRadius: 0,\n                borderTopRightRadius: 0,\n                border: \"none\",\n            },\n            \"&.isShadowed\": {\n                ...shadows.dropDown(),\n                ...borders(),\n            },\n        },\n    } as NestedCSSProperties);\n\n    const scroll = style(\"scroll\", {\n        // ...absolutePosition.fullSizeOfParent(),\n        width: percent(100),\n        maxHeight: percent(100),\n        overflow: \"auto\",\n    });\n\n    const content = style(\"content\", shadows.modal());\n\n    const pageHeader = style(\n        \"pageHeader\",\n        sticky(),\n        {\n            ...shadows.embed(),\n            top: 0,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            height: unit(titleBarVars.sizing.height),\n            minHeight: unit(titleBarVars.sizing.height),\n            zIndex: 2,\n            background: colorOut(vars.colors.bg),\n            $nest: {\n                \"&.noShadow\": {\n                    boxShadow: \"none\",\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            height: unit(titleBarVars.sizing.mobile.height),\n            minHeight: unit(titleBarVars.sizing.mobile.height),\n        }),\n    );\n\n    return {\n        root,\n        scroll,\n        content,\n        pageHeader,\n        overlay,\n    };\n});\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ModalSizes from \"@library/modal/ModalSizes\";\nimport { modalClasses } from \"@library/modal/modalStyles\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport React, { useMemo, useRef } from \"react\";\nimport ScrollLock, { TouchScrollable } from \"react-scrolllock\";\nimport { forceRenderStyles } from \"typestyle\";\n\ninterface IProps {\n    onOverlayClick: React.MouseEventHandler;\n    onModalClick: React.MouseEventHandler;\n    onKeyDown: React.KeyboardEventHandler;\n    description?: string;\n    titleID?: string;\n    label?: string;\n    className?: boolean;\n    scrollable?: boolean;\n    size: ModalSizes;\n    modalRef?: React.RefObject<HTMLDivElement>;\n    children?: React.ReactNode;\n}\n\n/**\n * Render the contents into a portal.\n */\nexport function ModalView(props: IProps) {\n    const domID = useMemo(() => uniqueIDFromPrefix(\"modal\"), []);\n    const descriptionID = domID + \"-description\";\n\n    const ownRef = useRef<HTMLDivElement>(null);\n    const modalRef = props.modalRef || ownRef;\n\n    const { titleID, label, size } = props;\n    const classes = modalClasses();\n\n    let contents = (\n        <>\n            {props.description && (\n                <div id={descriptionID} className=\"sr-only\">\n                    {props.description}\n                </div>\n            )}\n            {props.children}\n        </>\n    );\n\n    if (props.scrollable) {\n        contents = (\n            <TouchScrollable>\n                <div className={classes.scroll}>{contents}</div>\n            </TouchScrollable>\n        );\n    }\n\n    // We HAVE to render force the styles to render before componentDidMount\n    // And our various focusing tricks or the page will jump.\n    forceRenderStyles();\n    return (\n        <ScrollLock>\n            <div className={classes.overlay} onClick={props.onOverlayClick}>\n                <div\n                    role=\"dialog\"\n                    aria-modal={true}\n                    className={classNames(\n                        classes.root,\n                        {\n                            isFullScreen: size === ModalSizes.FULL_SCREEN || size === ModalSizes.MODAL_AS_SIDE_PANEL,\n                            isSidePanel: size === ModalSizes.MODAL_AS_SIDE_PANEL,\n                            isDropDown: size === ModalSizes.MODAL_AS_DROP_DOWN,\n                            isLarge: size === ModalSizes.LARGE,\n                            isMedium: size === ModalSizes.MEDIUM,\n                            isSmall: size === ModalSizes.SMALL,\n                            isShadowed: size === ModalSizes.LARGE || ModalSizes.MEDIUM || ModalSizes.SMALL,\n                        },\n                        props.className,\n                    )}\n                    ref={modalRef}\n                    onKeyDown={props.onKeyDown}\n                    onClick={props.onModalClick}\n                    aria-label={label}\n                    aria-labelledby={titleID}\n                    aria-describedby={props.description ? descriptionID : undefined}\n                >\n                    {contents}\n                </div>\n            </div>\n        </ScrollLock>\n    );\n}\n"],"sourceRoot":""}